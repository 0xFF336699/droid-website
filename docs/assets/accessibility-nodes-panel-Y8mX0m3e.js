import"./modulepreload-polyfill-B5Qt9EMX.js";import{b as e,A as t,i as n,c as o,g as i,a as l}from"./AutoWebViewJs-C3CFEN_X.js";import{a as s}from"./androidDispatchers-BsATMfwW.js";class c{constructor(e,t,n){this.prop=e,this.alias=t,this.valueType=n}}let a={},d=[],r=[],u=[],p=[],f="text";!function(){var e,t;function n(e){a[e.prop]=e,d.push(e)}function o(e){a[e.prop]=e,u.push(e)}function i(e,t,n){return new c(e,t,n)}n(i("viewIdResourceName","id",f)),n(i("text","文本","unused")),n(i("contentDescription","说明",f)),n(i("availableExtraData","其它",f)),n(i("hintText","提示",f)),n(i("className","类名",f)),a[(e=i("boundsInScreen","位置","rect")).prop]=e,p.push(e),a[(t=i("index","父级位置","num")).prop]=t,r.push(t),o(i("isAccessibilityDataSensitive","私密","bl")),o(i("isAccessibilityFocused","辅助焦点","bl")),o(i("isCheckable","可选","bl")),o(i("isChecked","已选","bl")),o(i("isClickable","可点击","bl")),o(i("isContentInvalid","内容可用","bl")),o(i("isContextClickable","内容可点击","bl")),o(i("isDismissable","可丢弃","bl")),o(i("isEditable","可编辑","bl")),o(i("isEnabled","可用","bl")),o(i("isFocusable","可焦点","bl")),o(i("isFocused","正在焦点","bl")),o(i("isHeading","标题","bl")),o(i("isImportantForAccessibility","重要辅助","bl")),o(i("isLongClickable","可长按","bl")),o(i("isMultiLine","多行","bl")),o(i("isPassword","密码","bl")),o(i("isScreenReaderFocusable","读取器焦点","bl")),o(i("isScrollable","可滚动","bl")),o(i("isSelected","可选","bl")),o(i("isShowingHintText","正在提示","bl")),o(i("isTextEntryKey","按键","bl")),o(i("isTextSelectable","文字可选","bl")),o(i("isVisibleToUser","对用户可见","bl"))}();let m=new t;function b(e){return e?decodeURIComponent(e):""}!async function(){n(),o();let t="htmls/pages/accessibility-nodes-panel/content",c=await i(t),f=await l(t,"content.title");m.init(),document.title=f,function(t){var n;if(!m.isInApp){console.log("not in app");return}let{error:o,errMsg:i,javaResultString:l}=m.callJavaToJsDataString();if(o){console.log("callJavaToJsDataString error",i,o);return}n="howToUse",document.getElementById(n).innerText=t(`content.${n}`),function(t){let n,o;let i={};try{t=window.atob(t),o=(n=JSON.parse(t)).event;let e=n.info;n=JSON.parse(e),console.log("iiiiiiiiiiiiiiinof",e)}catch(e){console.log("ffffffffffffaaaaaaaaaaaaa err",e),console.log("ssss is",t),v()}let l=n.root;if(!l)return;let c=document.getElementById("layout");if(!c)return;c.innerHTML="";let f=[],g=null,h=!0,y=[],x=[],I;function v(){console.log("html nodes info panel excute exit"),m.onJsCallEvent("callExit",""),m.callExitFromJs(),console.log("html nodes info panel exited")}document.getElementById("pn").onclick=function(){m.clipboardSetText(n.pn)},document.getElementById("an").onclick=function(){m.clipboardSetText(n.activeActivity)},document.getElementById("cn").onclick=function(){m.clipboardSetText(n.className)};let E=document.getElementById("nodeInfoDialog");function S(e){E.close(e),h=!0}function T(e){return(e.right-e.left)*(e.bottom-e.top)}function k(e){if(!1==h)return;g=null;let t=e.pageX-window.pageXOffset,n=e.pageY-window.pageYOffset;if(function(e,t){y=[],x=[];let n=document.elementsFromPoint(e,t);if(!n){console.log("getNodesUnderPoint list is null");return}for(let e=0;e<n.length;e++){let t=n[e].getAttribute("data-index");if(null==t)continue;let o=f[t];o&&(y.push(o),x.push(o.listIndex))}}(t,n),null==y||0==y.length){console.log(`not find, x=${t}, y=${n}`);return}let o=document.getElementById("moreNodes");o.innerHTML="",g=null;for(let e=0;e<y.length;e++){let t=y[e];g?T(t.boundsInScreen)<T(g.boundsInScreen)&&(g=t):g=t;let n=t.listIndex,i=`nodeUnderPoint${n}`,l=`
            <span>
            <input class="radioinline" name="nodeUnderPoint" type="radio" id="${i}" checked value="${n}">  
                            <label for="${i}">${n}</label>
</span>
            `,s=document.createElement("span");s.innerHTML=l,o.appendChild(s),document.getElementById(i).onchange=e=>{e&&e.target&&function(e){E.close(e);let t=f[e];t?w(t):console.log("no node finde",e,f.length)}(e.target.value)}}h=!1,document.removeEventListener("click",k),w(g)}function w(t){I=t;let o=document.getElementById(`node${t.listIndex}`);o.onanimationend=()=>{o.onanimationend=null,o.classList.remove("twinkle2"),E.open||(document.removeEventListener("click",k),E.showModal())},function(t,n){let o=document.getElementById("propertiesContainer");o.innerHTML="",document.createElement("p").innerHTML=`
                  <span >
                  <input id="clipboardinput" class=""  type="text" value="def" />
                  <label><span>cccc:</span><span >hhh</span></label>
</span>
`;let i=p[0];for(i of(s(o,t,i.prop,i.alias,`x=${t.boundsInScreen.left},y=${t.boundsInScreen.top},width=${t.boundsInScreen.right-t.boundsInScreen.left},height=${t.boundsInScreen.bottom-t.boundsInScreen.top}`),d))s(o,t,i.prop,i.alias,t[i.prop]||"");for(i of r)s(o,t,i.prop,i.alias,t[i.prop]);for(i of u){var l;s(o,t,l=i.prop,i.alias,t[l]?"是":"否")}function s(t,o,i,l,s){let c,a=o[i];if(void 0!==a&&""!==a){a=JSON.stringify(a);let e=n[i];if(e){let t=e[a];t&&(c=t.length>1)}}(function(t,n,o,i,l){let s=document.createElement("p");s.innerHTML=`
                  <span >
                  <input class="nodePropertyClass" data-name="${n}" type="checkbox" value="${n}" />
                  <label><span>${n}:</span><span style="color:${null==l?"black":l?"red":"green"}">${i}</span></label>
</span>
`,s.onclick=function(){e.clipboardSetText(i)},t.appendChild(s)})(t,i,0,s,c)}}(t,i),document.getElementById("pn").innerHTML=n.pn,document.getElementById("an").innerHTML=n.activeActivity,document.getElementById("cn").innerHTML=n.className,function(){for(let e of document.getElementsByClassName("nodePropertyClass"))e.onchange=function(e){e.target&&console.log("ddddddddddddddddd",e.target.checked)}}(),o.classList.add("twinkle2");let l=document.getElementById(`nodeUnderPoint${t.listIndex}`);l?l.checked=!0:console.log("ssssssssssssssssssssssssss",t.listIndex,f.length)}document.getElementById("nodeInfoDialogCloseButton").onclick=function(){S()},document.getElementById("nodeInfoDialogOkButton").onclick=function(){delete I.parent;let e={activeActivity:n.activeActivity,pn:n.pn,cn:n.className,node:I};console.log("node selected",o),m.dispatchData(s.WebViewJsDispatcher.name,o,JSON.stringify(e)),S(),v()},E.onclose=function(){h=!0,document.removeEventListener("click",k),document.addEventListener("click",k)},document.addEventListener("click",k),function e(t,o){if(!t)return;t.textDecoded||(t.textDecoded=!0,t.text&&(t.text=b(t.text)),t.contentDescription&&(t.contentDescription=b(t.contentDescription)),t.hintText&&(t.hintText=b(t.hintText)),t.listIndex=f.length,f.push(t)),function(e,t){for(let n in a)(function(e,n){let o=e[n];if(void 0===o||""===o)return;o=JSON.stringify(o);let i=t[n];i||(i={},t[n]=i);let l=i[o];l||(l=[],i[o]=l),l.push(e)})(e,a[n].prop)}(t,i);let l=t.boundsInScreen;if(!l)return;let s=n.deviceScale,c=l.left,d=l.top,r=l.right-c,u=l.bottom-d;c/=s,d/=s,d+=n.statusBarHeight/s,r/=s,u/=s;let p=document.createElement("div");p.id=`node${t.listIndex}`,p.style.width=r+"px",p.style.height=u+"px",p.style.left=c+"px",p.style.top=d+"px",p.style.position="absolute",p.style["border-color"]=`#${Number((0xffffff*Math.random()).toFixed(0)).toString(16)}`,p.classList.add("rect"),p.setAttribute("data-index",t.listIndex),o.appendChild(p);for(let n=0;n<t.children.length;n++){let i=t.children[n];i.index=n,e(i,o)}}(l,c)}(l)}(c)}();