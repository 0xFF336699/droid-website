import"./modulepreload-polyfill-B5Qt9EMX.js";import{b as e,A as t,i as n,c as o,g as i,a as l}from"./AutoWebViewJs-BDC28pUD.js";import{a as s}from"./androidDispatchers-BsATMfwW.js";class a{constructor(e,t,n){this.prop=e,this.alias=t,this.valueType=n}}let c={},d=[],r=[],u=[],p=[],f="text";!function(){var e,t;function n(e){c[e.prop]=e,d.push(e)}function o(e){c[e.prop]=e,u.push(e)}function i(e,t,n){return new a(e,t,n)}n(i("viewIdResourceName","id",f)),n(i("text","文本","unused")),n(i("contentDescription","说明",f)),n(i("availableExtraData","其它",f)),n(i("hintText","提示",f)),n(i("className","类名",f)),c[(e=i("boundsInScreen","位置","rect")).prop]=e,p.push(e),c[(t=i("index","父级位置","num")).prop]=t,r.push(t),o(i("isAccessibilityDataSensitive","私密","bl")),o(i("isAccessibilityFocused","辅助焦点","bl")),o(i("isCheckable","可选","bl")),o(i("isChecked","已选","bl")),o(i("isClickable","可点击","bl")),o(i("isContentInvalid","内容可用","bl")),o(i("isContextClickable","内容可点击","bl")),o(i("isDismissable","可丢弃","bl")),o(i("isEditable","可编辑","bl")),o(i("isEnabled","可用","bl")),o(i("isFocusable","可焦点","bl")),o(i("isFocused","正在焦点","bl")),o(i("isHeading","标题","bl")),o(i("isImportantForAccessibility","重要辅助","bl")),o(i("isLongClickable","可长按","bl")),o(i("isMultiLine","多行","bl")),o(i("isPassword","密码","bl")),o(i("isScreenReaderFocusable","读取器焦点","bl")),o(i("isScrollable","可滚动","bl")),o(i("isSelected","可选","bl")),o(i("isShowingHintText","正在提示","bl")),o(i("isTextEntryKey","按键","bl")),o(i("isTextSelectable","文字可选","bl")),o(i("isVisibleToUser","对用户可见","bl"))}();let m=new t;function b(e){return e?decodeURIComponent(e):""}async function g(t){let n,o;let i={};try{t=window.atob(t),o=(n=JSON.parse(t)).event;let e=n.info;n=JSON.parse(e),console.log("iiiiiiiiiiiiiiinof",e)}catch(e){console.log("ffffffffffffaaaaaaaaaaaaa err",e),console.log("ssss is",t),v()}let l=n.root;if(!l)return;let a=document.getElementById("layout");if(!a)return;a.innerHTML="";let f=[],g=null,h=!0,y=[],x=[],I;function v(){console.log("html nodes info panel excute exit"),m.onJsCallEvent("callExit",""),m.callExitFromJs(),console.log("html nodes info panel exited")}document.getElementById("pn").onclick=function(){m.clipboardSetText(n.pn)},document.getElementById("an").onclick=function(){m.clipboardSetText(n.activeActivity)},document.getElementById("cn").onclick=function(){m.clipboardSetText(n.className)};let E=document.getElementById("nodeInfoDialog");function w(e){E.close(e),h=!0}function S(e){return(e.right-e.left)*(e.bottom-e.top)}document.getElementById("nodeInfoDialogCloseButton").onclick=function(){w()},document.getElementById("nodeInfoDialogOkButton").onclick=function(){delete I.parent;let e={activeActivity:n.activeActivity,pn:n.pn,cn:n.className,node:I};console.log("node selected",o),console.log("data=",e),console.log("androidDispatchers.WebViewJsDispatcher.name, nodeSelectedEventType",s.WebViewJsDispatcher.name,o),m.dispatchData(s.WebViewJsDispatcher.name,o,JSON.stringify(e)),w(),v()},E.onclose=function(){h=!0,document.removeEventListener("click",D),document.addEventListener("click",D)},document.addEventListener("click",D);let T=Date.now();function D(e){if(!1==h)return;g=null;let t=e.pageX-window.pageXOffset,n=e.pageY-window.pageYOffset;if(function(e,t){y=[],x=[];let n=document.elementsFromPoint(e,t);if(!n){console.log("getNodesUnderPoint list is null");return}for(let e=0;e<n.length;e++){let t=n[e].getAttribute("data-index");if(null==t)continue;let o=f[t];o&&(y.push(o),x.push(o.listIndex))}}(t,n),null==y||0==y.length){console.log(`not find, x=${t}, y=${n}`);return}let o=document.getElementById("moreNodes");o.innerHTML="",g=null;for(let e=0;e<y.length;e++){let t=y[e];g?S(t.boundsInScreen)<S(g.boundsInScreen)&&(g=t):g=t;let n=t.listIndex,i=`nodeUnderPoint${n}`,l=`
            <span>
            <input class="radioinline" name="nodeUnderPoint" type="radio" id="${i}" checked value="${n}">  
                            <label for="${i}">${n}</label>
</span>
            `,s=document.createElement("span");s.innerHTML=l,o.appendChild(s),document.getElementById(i).onchange=e=>{e&&e.target&&function(e){E.close(e);let t=f[e];t?k(t):console.log("no node finde",e,f.length)}(e.target.value)}}h=!1,document.removeEventListener("click",D),k(g)}function k(t){I=t;let o=document.getElementById(`node${t.listIndex}`);o.onanimationend=()=>{o.onanimationend=null,o.classList.remove("twinkle2"),E.open||(document.removeEventListener("click",D),E.showModal())},function(t,n){let o=document.getElementById("propertiesContainer");o.innerHTML="",document.createElement("p").innerHTML=`
                  <span >
                  <input id="clipboardinput" class=""  type="text" value="def" />
                  <label><span>cccc:</span><span >hhh</span></label>
</span>
`;let i=p[0];for(i of(s(o,t,i.prop,i.alias,`x=${t.boundsInScreen.left},y=${t.boundsInScreen.top},width=${t.boundsInScreen.right-t.boundsInScreen.left},height=${t.boundsInScreen.bottom-t.boundsInScreen.top}`),d))s(o,t,i.prop,i.alias,t[i.prop]||"");for(i of r)s(o,t,i.prop,i.alias,t[i.prop]);for(i of u){var l;s(o,t,l=i.prop,i.alias,t[l]?"true":"false")}function s(t,o,i,l,s){let a,c=o[i];if(void 0!==c&&""!==c){c=JSON.stringify(c);let e=n[i];if(e){let t=e[c];t&&(a=t.length>1)}}(function(t,n,o,i,l){let s=document.createElement("p");s.innerHTML=`
                  <span >
                  <!--<input class="nodePropertyClass" data-name="${n}" type="checkbox" value="${n}" />-->
                  <label><span>${n}:</span><span style="color:${null==l?"black":l?"red":"green"}">${i}</span></label>
</span>
`,s.onclick=function(){e.clipboardSetText(i)},t.appendChild(s)})(t,i,0,s,a)}}(t,i),document.getElementById("pn").innerHTML=n.pn,document.getElementById("an").innerHTML=n.activeActivity,document.getElementById("cn").innerHTML=n.className,function(){for(let e of document.getElementsByClassName("nodePropertyClass"))e.onchange=function(e){e.target&&console.log("ddddddddddddddddd",e.target.checked)}}(),o.classList.add("twinkle2");let l=document.getElementById(`nodeUnderPoint${t.listIndex}`);l?l.checked=!0:console.log("ssssssssssssssssssssssssss",t.listIndex,f.length)}async function B(){Date.now()-T>1e3&&(await new Promise(e=>setTimeout(e,500)),T=Date.now(),console.log("checkLaterDraw"))}async function $(e,t){if(!e)return;await B(),e.textDecoded||(e.textDecoded=!0,e.text&&(e.text=b(e.text)),e.contentDescription&&(e.contentDescription=b(e.contentDescription)),e.hintText&&(e.hintText=b(e.hintText)),e.listIndex=f.length,f.push(e)),function(e,t){for(let n in c)(function(e,n){let o=e[n];if(void 0===o||""===o)return;o=JSON.stringify(o);let i=t[n];i||(i={},t[n]=i);let l=i[o];l||(l=[],i[o]=l),l.push(e)})(e,c[n].prop)}(e,i);let o=e.boundsInScreen;if(!o)return;let l=n.deviceScale,s=o.left,a=o.top,d=o.right-s,r=o.bottom-a;s/=l,a/=l,a+=n.statusBarHeight/l,d/=l,r/=l;let u=document.createElement("div");u.id=`node${e.listIndex}`,u.style.width=d+"px",u.style.height=r+"px",u.style.left=s+"px",u.style.top=a+"px",u.style.position="absolute",u.style["border-color"]=`#${Number((0xffffff*Math.random()).toFixed(0)).toString(16)}`,u.classList.add("rect"),u.setAttribute("data-index",e.listIndex),t.appendChild(u);for(let n=0;n<e.children.length;n++){let o=e.children[n];o.index=n,await $(o,t)}}await $(l,a)}!async function(){n(),o();let e="htmls/pages/accessibility-nodes-panel/content",t=await i(e),s=await l(e,"content.title");m.init(),document.title=s,function(e){if(!m.isInApp){console.log("not in app");return}let{error:t,errMsg:n,javaResultString:o}=m.callJavaToJsDataString();if(t){console.log("callJavaToJsDataString error",n,t);return}(function(e){function t(t,n){document.getElementById(t).innerText=e(`content.${t}`)}t("howToUse"),t("howToUseTooltip"),t("otherNodesSummary"),t("moreNodes"),t("nodeInfoDialogOkButton")})(e),g(o)}(t)}();