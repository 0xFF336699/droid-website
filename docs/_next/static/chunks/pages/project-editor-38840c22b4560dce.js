(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{43932:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-editor",function(){return n(22147)}])},19605:(e,t,n)=>{"use strict";n.d(t,{j:()=>_,v:()=>M});var i=n(22938),r=n(39561),o=n(77758),a=n(18856),c=n(95536),s=n(32788),l=n(89243),d=n(62169),p=n(54634),u=n(75421),g=n(68872),x=(e,t,n)=>new Promise((i,r)=>{var o=e=>{try{c(n.next(e))}catch(e){r(e)}},a=e=>{try{c(n.throw(e))}catch(e){r(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);c((n=n.apply(e,t)).next())}),h=n(59316),j=n(15751),f=n(26841),m=n(27458),y=n(33914);let A={activeActivity:"com.fanfanlo.droid.MainActivity",pn:"com.fanfanlo.droid.debug",cn:"android.widget.FrameLayout",node:{availableExtraData:["android.view.accessibility.extra.DATA_TEXT_CHARACTER_LOCATION_KEY"],boundsInScreen:{bottom:733,left:57,right:264,top:631},children:[],className:"android.widget.Button",isAccessibilityDataSensitive:!1,isAccessibilityFocused:!1,isCheckable:!1,isChecked:!1,isClickable:!0,isContentInvalid:!1,isContextClickable:!1,isDismissable:!1,isEditable:!1,isEnabled:!0,isFocusable:!0,isFocused:!0,isHeading:!1,isImportantForAccessibility:!1,isLongClickable:!1,isMultiLine:!1,isPassword:!1,isScreenReaderFocusable:!1,isScrollable:!1,isSelected:!1,isShowingHintText:!1,isTextEntryKey:!1,isTextSelectable:!1,isVisibleToUser:!0,text:"选择节点",viewIdResourceName:"a11y-node-select-action-item-df1c",index:0,listIndex:24}};var b=n(45396);let v={id:"a11y-node-select-action-item-df1c",i18nNs:"homepage/components/page/action-list/groups/a11y/node-select/content",nameKey:"content.name",group:"a11yNodeSelectActionItem.group",descriptionKey:"content.description",type:"action",LinkRender:(0,y.cI)(C)};async function k(){return new Promise(e=>{if(!r.nd)return e(A);let t="a11yNodeSelectActionItem",n=o.yx.shellListen(a.m.WebViewJsDispatcher.name,t,t,!1,function(t){let r=JSON.parse(t);console.log("fffffffffffffff",t),c.q.exitWindowById(i),o.yx.shellRemoveListen(a.m.WebViewJsDispatcher.name,n),e(r)}),i=(0,b.Z0)();!function(e,t){x(this,null,function*(){let n,i,[r,o]=yield(0,s.A)((0,d.uu)(l._.Permission.SYSTEM_ALERT_WINDOW,l._.Permission.BIND_ACCESSIBILITY_SERVICE));if(r){alert(r.toString()),u.L.instance.toast(r.toString());return}return n={htmlConf:{url:"".concat(g._.htmlOrigin,"pages/accessibility-info-buttons/#/"),webViewJsParams:{javaToJsDataString:JSON.stringify({event:e})}},windowId:t},i=(0,p.Sb)(n),u.L.instance.createWindow(JSON.stringify(i))})}(t,i)})}async function C(e){let{query:t,router:n}=e,r=n.pathname,a=await k(),c=h.U.mergeDataToDefultData({});c.javaData.info=a;let s=(0,j.getTriggerOrActionListPageParams)(t);f.T.dispatchEditEvent(f.T.EditType.add,{data:c,projectMemberType:m.K.actionGroup,projectInfo:s.data}),i.V.checkToPath(n,r,t.backPath||"",1),o.yx.openSelfByPackage()}async function T(e){let{query:t}=e,n=await k(),i=(0,j.getTriggerOrActionListPageParams)(t);f.T.dispatchEditEvent(f.T.EditType.updateJavaData,{data:n,projectMemberType:m.K.action,projectInfo:i.data}),o.yx.openSelfByPackage()}h.U.onClickChange=T;var w=n(21725);let P={id:"selectAppActionItem-7537eb25-586d-4178-9d9b-b817706a4c6b",i18nNs:"homepage/components/page/action-list/groups/app/app-select/content",nameKey:"content.name",group:"selectAppActionItem.group",descriptionKey:"content.description",type:"page",LinkRender:(0,y.IS)("/app-selector","selectAppActionItem-7537eb25-586d-4178-9d9b-b817706a4c6b",{actionType:w.F.type})};var S=n(78725),I=n(77545),E=n(21858);let D={id:"to-app-main-page-action-item-df1c",i18nNs:"homepage/components/page/action-list/groups/app/to-app-main-page/content",nameKey:"content.name",group:"toAppMainPageActionItem.group",descriptionKey:"content.description",type:"action",LinkRender:(0,y.cI)(G)};async function O(){return r.nd?await (0,S.U)(!0):{pn:"".concat((0,E.g0)(Math.floor(5*Math.random())+5),".").concat((0,E.g0)(Math.floor(5*Math.random())+5),".").concat((0,E.g0)(Math.floor(5*Math.random())+5)),an:(0,E.g0)(Math.floor(5*Math.random())+5)}}async function G(e){let{query:t}=e,n=await O(),i=(0,j.getTriggerOrActionListPageParams)(t),r=I.w.mergeDataToDefultData({javaData:{pn:n.pn,an:n.an}});f.T.dispatchEditEvent(f.T.EditType.add,{data:r,projectMemberType:m.K.actionGroup,projectInfo:i.data}),window.history.back(),o.yx.openSelfByPackage()}async function L(e){let{query:t}=e,n=await O(),i=(0,j.getTriggerOrActionListPageParams)(t);f.T.dispatchEditEvent(f.T.EditType.updateJavaData,{data:n,projectMemberType:m.K.action,projectInfo:i.data}),o.yx.openSelfByPackage()}I.w.onClickChange=L;let _=[{i18nNs:"homepage/components/page/action-list/groups/app/content",nameKey:"content.name",descriptionKey:"content.description",items:[P,D]},{i18nNs:"homepage/components/page/action-list/groups/a11y/content",nameKey:"content.name",descriptionKey:"content.description",items:[v]}];async function M(){}},20017:(e,t,n)=>{"use strict";n.d(t,{J:()=>b,R:()=>A});var i=n(83421),r=n(15751),o=n(72028),a=n(27458),c=n(26841),s=n(91239),l=n(33914);let d={id:"timeout-trigger-item-ce8c",i18nNs:"homepage/components/page/trigger-list/groups/time/timeout/content",nameKey:"content.name",group:"timeoutTriggerItem.group",descriptionKey:"content.description",type:"trigger",LinkRender:(0,l.cI)(function(e){let{query:t,item:n}=e,l=(0,r.getTriggerOrActionListPageParams)(t);switch(t.type){case i.ActionOrTriggerListTypeEnum.addAction:let d=o.V.createDefultData();if(!l.data.triggerGroup)return(0,s.w)("triggerGroup is not found",t);c.T.dispatchEditEvent(c.T.EditType.add,{projectMemberType:a.K.triggerGroup,data:d,projectInfo:l.data}),window.history.back();case i.ActionOrTriggerListTypeEnum.updateAction:}})};var p=n(39561),u=n(78725),g=n(77758),x=n(88474),h=n(21858);let j={id:"activity-in-item-ce8c",i18nNs:"homepage/components/page/trigger-list/groups/app/activity/content",nameKey:"content.name",group:"activityInItem.group",descriptionKey:"content.description",type:"trigger",LinkRender:(0,l.cI)(m)};async function f(){return p.nd?await (0,u.U)(!0):{pn:"".concat((0,h.g0)(Math.floor(5*Math.random())+5),".").concat((0,h.g0)(Math.floor(5*Math.random())+5),".").concat((0,h.g0)(Math.floor(5*Math.random())+5)),an:(0,h.g0)(Math.floor(5*Math.random())+5),cn:(0,h.g0)(Math.floor(5*Math.random())+5)}}async function m(e){let{query:t}=e,n=await f(),i=(0,r.getTriggerOrActionListPageParams)(t),o=x.S.mergeDataToDefultData({javaData:{pn:n.pn,an:n.an,cn:n.cn}});c.T.dispatchEditEvent(c.T.EditType.add,{data:o,projectMemberType:a.K.triggerGroup,projectInfo:i.data}),console.log("ccccccccccccccall open self"),g.yx.openSelfByPackage(),window.history.back()}async function y(e){let{query:t}=e,n=await f(),i=(0,r.getTriggerOrActionListPageParams)(t);c.T.dispatchEditEvent(c.T.EditType.updateJavaData,{data:n,projectMemberType:a.K.trigger,projectInfo:i.data}),g.yx.openSelfByPackage()}x.S.onClickChange=y;let A=[{i18nNs:"homepage/components/page/trigger-list/groups/time/content",nameKey:"content.name",descriptionKey:"content.description",items:[d]},{i18nNs:"homepage/components/page/trigger-list/groups/app/content",nameKey:"content.name",descriptionKey:"content.description",items:[j]}];async function b(){}},22147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e4});var i=n(50612),r=n(25065);window.android,window.global||(window.global=window);let o=new r.m;var a=n(15751),c=n(87696),s=n(67835),l=n(87825),d=n(81681),p=n(2599),u=n(23026),g=n(96421),x=n(42590),h=n(36734),j=n(38212),f=n(80740),m=n(3607),y=n(22066),A=n(94011),b=n(94344),v=n(7843);function k(e){let{setText:t,title:n,cancelText:r,saveText:o,contentText:a,helperText:c,minHeight:s,children:l}=e,{t:d}=(0,v.Bd)("fanfanlo/mui/dialog/content"),[p,u]=(0,b.useState)(""),[g,x]=(0,b.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{style:{cursor:"pointer",width:"100%",textAlign:"center",display:"inline-block",backgroundColor:"",minHeight:s||"1rem"},onClick:()=>x(!0),children:(0,i.jsx)("span",{children:l||""})}),g&&(0,i.jsxs)(h.A,{open:g,onClose:()=>x(!1),children:[(0,i.jsx)(j.A,{children:n||d("EditableText.title")}),a&&(0,i.jsx)(f.A,{children:a}),(0,i.jsx)(f.A,{children:(0,i.jsx)(m.A,{id:"editable-text","aria-label":"editable-text",autoFocus:!0,required:!0,fullWidth:!0,helperText:c,variant:"standard",value:p,onChange:e=>{u(e.target.value)}})}),(0,i.jsxs)(y.A,{children:[(0,i.jsx)(A.A,{id:"editable-text-cancel","data-id":"editable-text-cancel",onClick:()=>x(!1),children:r||d("EditableText.cancel")}),(0,i.jsx)(A.A,{id:"editable-text-save","data-id":"editable-text-save",onClick:()=>{x(!1),t(p)},children:o||d("EditableText.save")})]})]})]})}var C=n(60789),T=n(40614),w=n(75869),P=n(67779),S=n(64565),I=n(17777),E=n(96142),D=n(21239),O=n(38149),G=n(85364),L=n(53757),_=n(84116),M=n(38712),B=n(32537),K=n.n(B);let N=new Map;function R(e){let t=function(e){let t=N.get(e)||[];return t[t.length-1]}(e.id);return!(t&&K().isEqual(t.project,e))&&(!function(e){_.o.runPauseProxyFn(()=>{e.project=K().cloneDeep((0,M.EL)(e.project))});let t=N.get(e.project.id);if(!t){N.set(e.project.id,[e]);return}t.push(e)}({index:t?t.index+1:0,project:e,date:new Date().toISOString()}),!0)}var q=n(40242),F=n(52591),J=(e,t,n)=>new Promise((i,r)=>{var o=e=>{try{c(n.next(e))}catch(e){r(e)}},a=e=>{try{c(n.throw(e))}catch(e){r(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);c((n=n.apply(e,t)).next())});let U=(0,u.I$)({}),V=new r.m,W={edit:e=>U[e.id]=function(e){let t=(0,u.I$)({project:e,askStay:!1,giveup:!1,updated:!1,historyId:0,testTime:new Date().toLocaleString(),save:()=>J(this,null,function*(){t.updated=!1,t.askStay=!1,t.giveup=!1,c.D.saveProject(e),V.dispatch("project-saved",e);let n=yield(0,q.loadI18nValue)("droid-project/project/manager/content","edit-project-info-utils.projectSaved");F.Ay.success(n)})});return t}(e)},$=(0,b.createContext)({});var z=n(52229),H=n(82987),X=n(7892);let Y=0,Z=new WeakMap;function Q(e){let t=Z.get(e)||(0,u.I$)({version:++Y,count:0,key:"".concat(Y,"-0")});return Z.has(e)||(Z.set(e,t),(0,u.Ax)(e).addListener(X._l,(e,n)=>{t.count++,t.version=++Y,t.key="".concat(t.version,"-").concat(t.count)})),t}var ee=n(96062),et=n(63437),en=n(4079),ei=n(49820),er=n(17387),eo=n(48658),ea=n(83421),ec=n(91884),es=n(25355),el=n(18668),ed=Object.defineProperty,ep=Object.getOwnPropertySymbols,eu=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,ex=(e,t,n)=>t in e?ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eh=(e,t)=>{for(var n in t||(t={}))eu.call(t,n)&&ex(e,n,t[n]);if(ep)for(var n of ep(t))eg.call(t,n)&&ex(e,n,t[n]);return e};function ej(e,t){let[n,i]=(0,b.useState)(e);return(0,b.useEffect)(()=>{(0,x.c)(e,t=>{K().isArray(t.target)?[...t.target]:t.target,i(K().isArray(e)?[...e]:eh({},e))},t)},[]),[n]}var ef=n(58553),em=n(42623);function ey(e){let{list:t,index:n}=e,r=new l.tG(!1,"Check2_fn");r.isPaused=!0,r.log("list=",t);let[o]=ej(t),c=(0,b.useContext)(a.GroupCheckList1Context);return r.log("l=",o),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(er.A,{container:!0,children:[(0,i.jsx)(er.A,{container:!0,size:"grow",children:o.map((e,n)=>(0,i.jsx)(er.A,{children:(0,i.jsx)(ec.A,{children:(0,i.jsx)(es.A,{label:n.toString(),control:(0,i.jsx)(em.A,{"data-id":"group-check-checkbox","data-checked":e,"data-value":e,checked:e,onChange:e=>{t[n]=e.target.checked}})})})},p._.getNewCountId().toString()))}),(0,i.jsx)(er.A,{children:(0,i.jsx)(ef.b,{title:"提醒",onConfirm:function(){c.splice(n,1)},content:"您要删除此条校验吗？",children:(0,i.jsx)(E.A,{"data-id":"group-check-remove",children:(0,i.jsx)(eo.A,{})})})})]})})}function eA(e){let{list:t}=e,n=new l.tG(!1,"Check1_fn");return n.isPaused=!0,n.log("Check1 list=",t),(0,i.jsx)(a.GroupCheckList1Context.Provider,{value:t,children:t.map((e,n)=>(0,i.jsx)(ey,{list:t[n],index:n},Q(e).key))})}function eb(e){let{group:t}=e,n=new l.tG(!1,"GroupCheck_fn");n.isPaused=!0;let[r]=(0,d.x)(t,"isSequential",t.isSequential),[o]=(0,d.x)(t,"list",t.list),[a]=ej(o),[c]=(0,d.x)(a,"length",a.length),[s]=(0,d.x)(t,"checks",t.checks),[p]=ej(s);return((0,b.useEffect)(()=>{n.log("updateChecks2_fn","listSize=",c,t.checks),t.checks.forEach(e=>{n.log("updateChecks2_fn","checks2=",e);for(let t=e.length;t<c;t++)e.push(!0);e.length=c})},[c]),n.log("list.length=",a.length),a.length<=1||r)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(P.A,{children:[(0,i.jsx)(er.A,{container:!0,children:(0,i.jsx)(er.A,{children:(0,i.jsx)(G.A,{"data-id":"group-add-check-list.875aec4f-5049-426a-a395-0ac0c6666a35",onClick:()=>{t.checks.push(Array(c).fill(!0))},children:"添加校验组"})})}),(0,i.jsx)(eA,{list:t.checks})]})}var ev=Object.defineProperty,ek=Object.defineProperties,eC=Object.getOwnPropertyDescriptors,eT=Object.getOwnPropertySymbols,ew=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,eS=(e,t,n)=>t in e?ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eI=(e,t)=>{for(var n in t||(t={}))ew.call(t,n)&&eS(e,n,t[n]);if(eT)for(var n of eT(t))eP.call(t,n)&&eS(e,n,t[n]);return e},eE=(e,t)=>ek(e,eC(t));function eD(e){let{query:t,attrs:n,path:r,btnId:o,children:a}=e,c=(0,L.useRouter)();return t.backPath=c.pathname,(0,i.jsx)(G.A,eE(eI({onClick:function(){let e=new URLSearchParams(Object.keys(t).map(e=>[e,t[e].toString()])),n="".concat(r,"?").concat(e.toString());c.push(n)}},n),{id:o,"data-id":o,children:a}))}var eO=n(24048),eG=n(12066);function eL(e){let{actionData:t}=e,n=(0,b.useContext)(a.ActionListContext),r=eO.Gh[t.type];return(0,i.jsxs)(eG.A,{sx:{position:"relative",padding:"2px",marginTop:"2px",marginBottom:"2px","&::after":{content:'""',position:"absolute",right:0,top:"5px",bottom:"5px",borderRight:"1px solid red"},"&::before":{content:'""',position:"absolute",left:0,top:"5px",bottom:"5px",borderLeft:"1px solid red"}},children:[r.UI(t),(0,i.jsx)(eG.A,{sx:{textAlign:"center"},children:(0,i.jsx)(ef.b,{title:"删除动作",content:"确定删除本动作吗？",onConfirm:function(){let e=n.indexOf(t);-1!==e&&n.splice(e,1)},children:(0,i.jsx)(A.A,{id:"del-action-btn","data-id":"del-action-btn",children:"删除"})})})]})}function e_(){let e=(0,b.useContext)(a.ActionGroupContext),[t]=ej(e.list);return t&&K().isArray(t)||console.log("lllllllllllllist is null",e),(0,i.jsx)("div",{children:e.list.map(e=>(0,i.jsx)(eL,{actionData:e},Q(e).key))})}function eM(e){let{actionGroup:t}=e,{t:n}=(0,q.useTranslation)("droid-project/project/ui/project/edit-project/trigger-action-group/trigger-action/action-group/content"),r=(0,b.useContext)($),o=(0,b.useContext)(a.TriggerActionGroupContext),c=(0,b.useContext)(a.TriggerActionContext),s={projectId:r.project.id,triggerActionGroupId:o.id,triggerActionId:c.id,actionGroupId:t.id,type:ea.ActionOrTriggerListTypeEnum.addAction,actionType:""},[l]=(0,d.x)(t,"isSequential",t.isSequential),[p]=(0,d.x)(t.list,"length",t.list.length);return(0,i.jsx)(a.ActionGroupContext.Provider,{value:t,children:(0,i.jsx)(a.ActionListContext.Provider,{value:t.list,children:(0,i.jsxs)(P.A,{sx:{border:"2px solid #ccc",padding:"4px"},children:[(0,i.jsxs)(er.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsx)(er.A,{size:"grow",children:(0,i.jsx)(P.A,{children:n("content.title")})}),(0,i.jsx)(er.A,{children:p>1&&(0,i.jsx)(ec.A,{children:(0,i.jsx)(es.A,{control:(0,i.jsx)(el.A,{checked:l,"data-id":"action-group-checkbox-is-sequential.122f","aria-checked":l,"data-checked":l,onChange:e=>{var n;n=e.target.checked,(0,u.I$)(t).isSequential=n}}),label:n("content.sequential")})})}),(0,i.jsx)(er.A,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(eD,{query:s,attrs:(0,H.q_)(t),path:"/action-list",btnId:"link-router-to-action-list",children:n("content.list")})})})]}),(0,i.jsx)(eb,{group:t}),(0,i.jsx)(e_,{})]})})})}var eB=n(56700);function eK(e){let{triggerData:t}=e,n=(0,b.useContext)(a.TriggerListContext),r=(0,eB.gq)(t.type);return(0,i.jsx)(a.TriggerContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{children:[r.UI(t),(0,i.jsx)(P.A,{sx:{textAlign:"center"},children:(0,i.jsx)(ef.b,{title:"删除触发",content:"确定删除本触发吗？",onConfirm:()=>{let e=n.indexOf((0,u.I$)(t));-1!==e&&(0,u.I$)(n).splice(e,1)},children:(0,i.jsx)(G.A,{id:"del-trigger-btn","data-id":"del-trigger-btn",children:"删除"})})})]})})}function eN(){let e=(0,b.useContext)(a.TriggerGroupContext),[t]=ej(e.list);return(0,i.jsx)(a.TriggerListContext.Provider,{value:e.list,children:(0,i.jsx)(P.A,{children:e.list.map(e=>(0,i.jsx)(eK,{triggerData:e},Q(e).version))})})}function eR(e){let{triggerGroup:t}=e,{t:n}=(0,q.useTranslation)("droid-project/project/ui/project/edit-project/trigger-action-group/trigger-action/trigger-group/content"),r=(0,b.useContext)($),o=(0,b.useContext)(a.TriggerActionGroupContext),c=(0,b.useContext)(a.TriggerActionContext),s={projectId:r.project.id,triggerActionGroupId:o.id,triggerActionId:c.id,triggerGroupId:t.id,type:ea.ActionOrTriggerListTypeEnum.addAction,actionType:""},[l]=(0,d.x)(t,"isSequential",t.isSequential),[p]=(0,d.x)(t.list,"length",t.list.length);return(0,i.jsx)(a.TriggerGroupContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{sx:{border:"2px solid #a4a737",padding:"4px",marginBottom:"2px",marginTop:"2px"},children:[(0,i.jsxs)(er.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsx)(er.A,{size:"grow",children:(0,i.jsx)(P.A,{children:n("content.title")})}),(0,i.jsx)(er.A,{children:p>1&&(0,i.jsx)(ec.A,{children:(0,i.jsx)(es.A,{control:(0,i.jsx)(el.A,{checked:l,"data-id":"trigger-group-checkbox-is-sequential.122f","aria-checked":l,"data-checked":l,onChange:e=>{var n;n=e.target.checked,(0,u.I$)(t).isSequential=n}}),label:n("content.sequential")})})}),(0,i.jsx)(er.A,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(eD,{query:s,attrs:H.mR.triggerGroup.getTriggerGroupElement(t),path:"/trigger-list",btnId:"link-router-to-trigger-list",children:n("content.list")})})})]}),(0,i.jsx)(eb,{group:t}),(0,i.jsx)(eN,{})]})})}function eq(e){let{triggerAction:t}=e,[n,r]=(0,b.useState)(t.name||"未命名");return(0,i.jsx)(a.TriggerActionContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{sx:{border:"2px solid #02450e",padding:"4px"},"data-id-trigger-action":t.id,children:[(0,i.jsxs)(er.A,{sx:{alignItems:"center"},container:!0,children:[(0,i.jsxs)(er.A,{children:[(0,i.jsx)(en.A,{}),(0,i.jsx)(et.A,{})]}),(0,i.jsx)(er.A,{size:"grow",children:(0,i.jsx)(k,{setText:function(e){t.name=e,r(e)},children:(0,i.jsx)("span",{"data-id":"rename-trigger-action-btn.a4c6",children:n})})}),(0,i.jsx)(er.A,{children:(0,i.jsx)(ef.b,{title:"提示",content:"确认要删除这条触发器和动作吗",onConfirm:function(){let e=(0,g.SZ)(t);e&&e.splice(e.indexOf(t),1)},children:(0,i.jsx)(E.A,{"data-id":"del-trigger-action-btn",children:(0,i.jsx)(eo.A,{})})})})]}),(0,i.jsx)(eR,{triggerGroup:t.triggerGroup}),(0,i.jsx)(eM,{actionGroup:t.actionGroup})]})})}var eF=Object.defineProperty,eJ=Object.defineProperties,eU=Object.getOwnPropertyDescriptors,eV=Object.getOwnPropertySymbols,eW=Object.prototype.hasOwnProperty,e$=Object.prototype.propertyIsEnumerable,ez=(e,t,n)=>t in e?eF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eH=(e,t)=>{for(var n in t||(t={}))eW.call(t,n)&&ez(e,n,t[n]);if(eV)for(var n of eV(t))e$.call(t,n)&&ez(e,n,t[n]);return e},eX=(e,t)=>eJ(e,eU(t));function eY(){let{t:e}=(0,v.Bd)("droid-project/project/ui/project/edit-project/trigger-action-group/content"),t=(0,b.useContext)($),[n,r]=(0,b.useState)(t.project.triggerActionGroup.name||e("TriggerActionGroup.unamed")),[o]=function(e){let[t,n]=(0,b.useState)([...e]),i=(0,u.Ax)(e).addListener(X._l,()=>{n([...e])});return(0,b.useEffect)(()=>()=>{i()},[]),[t,i]}(t.project.triggerActionGroup.list),c=t.project.triggerActionGroup;return(0,i.jsx)(a.TriggerActionGroupContext.Provider,{value:c,children:(0,i.jsxs)(P.A,eX(eH({sx:{border:"2px solid rgb(217, 217, 217)",padding:"4px"}},H.mR.triggerActionGroup.getTriggerActionGroupElementByProp(c.list)),{"data-id-trigger-action-group":c.id,children:[(0,i.jsxs)(er.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsxs)(er.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsx)(en.A,{}),(0,i.jsx)(et.A,{}),(0,i.jsx)(ei.A,{})]}),(0,i.jsx)(er.A,{size:"grow",sx:{alignItems:"center",width:"100%"},children:(0,i.jsx)(P.A,{sx:{width:"100%"},children:(0,i.jsx)(k,{setText:function(n){t.project.triggerActionGroup.name=n,r(n||e("TriggerActionGroup.unamed"))},children:(0,i.jsx)("span",{"data-id":"rename-groupname-btn-a322",style:{backgroundColor:"red"},children:n})})})}),(0,i.jsx)(er.A,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(E.A,{"data-id":"add-trigger-action-btn.22fab779-75e2-4e34-82f4-64667e7fc017",onClick:function(){let e=(0,z.n)();(0,g.sd)(c).list.push(e)},children:(0,i.jsx)(ee.A,{})})})})]}),(0,i.jsx)(P.A,{children:o.map((e,t)=>{let n=c.list[t];return(0,i.jsx)(eq,{triggerAction:n},Q(n).version)})})]}))})}var eZ=n(34552);let eQ=(0,T.Ay)(w.A)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function e0(){let e=(0,b.useContext)(a.ProjectContext);return(0,i.jsx)(P.A,{"data-id-project":e.id,children:(0,i.jsx)(S.A,{children:(0,i.jsx)(eY,{})})})}function e1(){let e=(0,b.useContext)($),t=l.tG.createCountedLogger(!1,"project-editor-effect"),[n]=(0,d.x)(e,"askStay",e.askStay),r=(0,L.useRouter)();function o(){e.askStay=!1,e.giveup=!0,r.back(),e.giveup=!1,e.updated=!1}function a(){e.askStay=!1}return(0,i.jsx)(P.A,{children:(0,i.jsxs)(eQ,{onClose:a,"aria-labelledby":"customized-dialog-title",open:n,children:[(0,i.jsx)(I.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:"提示:您有更改没有保存，确定要离开吗？"}),(0,i.jsx)(E.A,{"aria-label":"close",onClick:a,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,i.jsx)(C.A,{})}),(0,i.jsx)(D.A,{dividers:!0}),(0,i.jsxs)(O.A,{children:[(0,i.jsx)(G.A,{onClick:function(){o(),c.D.deleteDraft(e.project.id)},children:"放弃保存并离开"}),(0,i.jsx)(G.A,{onClick:function(){c.D.addDraft(e.project),o()},children:"保存变更到草稿并离开"}),(0,i.jsx)(G.A,{onClick:function(){e.save(),o(),c.D.deleteDraft(e.project.id)},children:"保存并离开"}),(0,i.jsx)(G.A,{onClick:function(){e.askStay=!1,e.giveup=!1,t.log("handleStayAndEdit fn called ","objectCount=",p._.getObjectCount(e),"editInfo=",e)},children:"留下编辑"})]})]})})}var e2=n(75936),e5=n(73256),e7=n(19605),e8=n(20017);function e4(){let{Content:e,Title:t,dispatcher:n}=function(){let e=new r.m,{id:t}=(0,L.useRouter)().query,n=c.D.findDraftOrSavedProject(t||"-1")||(0,s.D)({id:t||"-1"}),p=n,h=n=c.D.addDraft(p),j=n=(0,u.I$)(h),f=n=(0,g.sd)(j),m=W.edit(f);function y(){let e=new l.tG(!1,"checkUpdated_fn");e.isPaused=!0;let t=c.D.findSavedProject(n.id);return(e.log("checkUpdated fn called","c=",t),m.updated=!t||!K().isEqual(t,n),e.log("editInfo.updated=",m.updated),m.updated&&!m.giveup)?(m.askStay=!0,e.log("checkUpdated fn called","editInfo.askStay=",m.askStay),!0):(e.log("checkUpdated fn called2","editInfo.askStay=",m.askStay),!1)}return{Content:function(){(0,b.useEffect)(()=>{if(R(n),!n)return;let e=(0,x.c)((0,g.Al)(n),()=>{R(n),m.updated=!0});return()=>{e()}},[]),(0,b.useEffect)(()=>{let e=o.addListener("checkBrowserCanBack",e=>{let t=e.result=y();console.log("ooooooooooooooooooooooooo checkBrowserCanBack_fn",e,"canback=",t),t&&c.D.deleteDraft(n.id)});return()=>{e()}},[]),(0,b.useEffect)(()=>e.addListener("back",e=>{(e.defaultPrevented=y())&&c.D.deleteDraft(n.id)}),[]);let t=(0,u.I$)(m.project);return(0,i.jsx)($.Provider,{value:m,children:(0,i.jsx)(a.ProjectContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{children:[(0,i.jsx)(e0,{}),(0,i.jsx)(e1,{})]})})})},Title:function(){let{t:e}=(0,v.Bd)("droid-project/project/ui/project/edit-project/content"),t=e("content.clickToSetProjectName"),[r]=(0,d.x)(n,"name",t);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:16,width:"100%",alignItems:"center"},children:[(0,i.jsx)("span",{style:{flexGrow:1,paddingLeft:"2rem"},children:(0,i.jsx)(k,{setText:function(e){n.name=e},children:(0,i.jsx)("h2",{children:(0,i.jsx)("span",{id:"project-name-editor","data-id":"project-name-editor",children:r||t})})})}),(0,i.jsx)(E.A,{onClick:()=>{m.save()},children:(0,i.jsx)(eZ.A,{})})]})},dispatcher:e}}();(0,e7.v)(),(0,e8.J)();let p={title:(0,i.jsx)(t,{}),back:!0,backDispatcher:n};return(0,i.jsx)(e2.G,{children:(0,i.jsx)(e5.W,{appbarProps:p,titleConf:{ns:"homepage/pages/project-editor/content",key:"editor.title"},children:(0,i.jsx)(e,{})})})}},22938:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var i=(e,t,n)=>new Promise((i,r)=>{var o=e=>{try{c(n.next(e))}catch(e){r(e)}},a=e=>{try{c(n.throw(e))}catch(e){r(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);c((n=n.apply(e,t)).next())});let r={checkToPath:function(e,t,n,r){return i(this,null,function*(){let i=e.pathname;if(console.log("nowpath=",i),console.log("expectNowPath=",t),console.log("pointPath=",n),i!==n){for(t!==i&&e.replace(n);r>0;)e.back(),r--;e.pathname!==n&&n&&e.push(n)}})}}},58553:(e,t,n)=>{"use strict";n.d(t,{b:()=>p});var i=n(50612),r=n(36734),o=n(38212),a=n(80740),c=n(22066),s=n(94011),l=n(94344),d=n(7843);function p(e){let{title:t,content:n,confirmText:p,cancelText:u,onConfirm:g,onCancel:x,onClose:h,cancelId:j,confirmId:f,children:m}=e,[y,A]=(0,l.useState)(!1),{t:b}=(0,d.Bd)("fanfanlo/mui/dialog/content");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{onClick:()=>A(!0),children:m}),(0,i.jsxs)(r.A,{open:y,onClose:()=>A(!1),children:[(0,i.jsx)(o.A,{children:t||b("ButtonConfirm.title")}),(0,i.jsx)(a.A,{children:n||b("ButtonConfirm.content")}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(s.A,{id:j||"btn-dialog-button-confirm-cancel","data-id":j||"btn-dialog-button-confirm-cancel",onClick:()=>{A(!1),null==x||x(),null==h||h(!1)},children:u||b("ButtonConfirm.cancel")}),(0,i.jsx)(s.A,{id:f||"btn-dialog-button-confirm-confirm","data-id":f||"btn-dialog-button-confirm-confirm",onClick:()=>{A(!1),null==g||g(),null==h||h(!0)},children:p||b("ButtonConfirm.confirm")})]})]})]})}},7843:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>i.Bd});var i=n(4216)}},e=>{var t=t=>e(e.s=t);e.O(0,[798,603,362,250,136,737,357,249,264,547,365,636,593,792],()=>t(43932)),_N_E=e.O()}]);