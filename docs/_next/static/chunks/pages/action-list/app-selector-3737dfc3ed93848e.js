(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{19328:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/action-list/app-selector",function(){return r(91779)}])},91779:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>U});var n=r(50612),o=r(83421),i=r(22938),a=r(53004),c=r(77758),s=r(39561),l=(t,e,r)=>new Promise((n,o)=>{var i=t=>{try{c(r.next(t))}catch(t){o(t)}},a=t=>{try{c(r.throw(t))}catch(t){o(t)}},c=t=>t.done?n(t.value):Promise.resolve(t.value).then(i,a);c((r=r.apply(t,e)).next())});let u="com.fanfanlo.droid.js.JsReceiver.readAllPackages();",g={script:u,readAllPackages:s.nd?function(){let t=c.yx.callScript(u).javaResultData||[];return a.I.savePackages(t),t}:function(){return l(this,null,function*(){let t=yield r.e(416).then(r.bind(r,4416));return a.I.savePackages(t.readAllPackagesMockData),t.readAllPackagesMockData})}};var d=r(68053),p=r(91239),x=r(23026),h=r(81681),f=r(40242),C=r(75044),A=r(6967),y=r(12066),P=r(71108),k=r(77257),T=r(9415),w=r(39690),j=r(187),m=r(73191),v=r(48635),L=r(51114),G=r(44125),b=r(64601),E=r(53757),I=r(94344),O=r(75936),D=r(73256),N=r(15751),S=r(27458),_=r(24048),q=r(21725),R=r(26841);let F=d.P.namespace("app-selector"),K="recentlyPackageList";var M=function(t){return t.all="all",t.recently="recently",t}(M||{});let X=(0,I.createContext)({packageList:[],showPackageList:[],recentlyPackageList:[],tab:"all",onPackageSelect:t=>{}});function B(){let t=(0,I.useContext)(X),[e]=(0,h.x)(t,"showPackageList",t.showPackageList);return(0,n.jsx)(y.A,{children:(0,n.jsx)(P.A,{children:e.map((e,r)=>(0,n.jsx)(k.Ay,{onClick:()=>t.onPackageSelect(e),children:(0,n.jsx)(T.A,{container:!0,children:(0,n.jsxs)(T.A,{size:"grow",container:!0,"data-id":"app-selector-893f",children:[(0,n.jsx)("img",{width:30,style:{borderRadius:"8px"},src:"data:image/gif;base64,".concat(e.iconBase64)}),(0,n.jsx)(w.A,{primary:e.label})]})})},r))})})}function V(){let[t,e]=(0,I.useState)(0),{t:r}=(0,f.useTranslation)("homepage/pages/action-list/app-selector/content"),o=(0,I.useContext)(X);return(0,n.jsx)(y.A,{sx:{width:"100%"},children:(0,n.jsxs)(j.A,{sx:{width:"100%"},onChange:(t,r)=>{e(r),o.tab=0===r?"all":"recently"},value:t,"aria-label":"Tabs where selection follows focus",selectionFollowsFocus:!0,children:[(0,n.jsx)(m.A,{sx:{width:"50%"},label:r("content.all")}),(0,n.jsx)(m.A,{sx:{width:"50%"},label:r("content.recently")})]})})}let z=(0,v.Ay)("div")(t=>{let{theme:e}=t;return{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,L.X4)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,L.X4)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}}}),W=(0,v.Ay)("div")(t=>{let{theme:e}=t;return{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),H=(0,v.Ay)(G.Ay)(t=>{let{theme:e}=t;return{color:"inherit",width:"100%","& .MuiInputBase-input":{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}});function J(){let{t}=(0,f.useTranslation)("homepage/pages/action-list/app-selector/content"),e=(0,I.useContext)(X);return(0,n.jsxs)(T.A,{container:!0,width:"100%",justifyContent:"space-between",sx:{alignItems:"center"},children:[(0,n.jsx)(T.A,{children:(0,n.jsxs)(z,{children:[(0,n.jsx)(W,{children:(0,n.jsx)(A.A,{})}),(0,n.jsx)(H,{onChange:function(t){e.searchKey=t.target.value},placeholder:t("content.searchPlaceholder"),inputProps:{"aria-label":"search"}})]})}),(0,n.jsx)(T.A,{children:(0,n.jsx)(b.A,{onClick:()=>{g.readAllPackages()},children:(0,n.jsx)(C.A,{})})})]})}function U(){let[t]=function(){let t=(0,E.useRouter)(),e=t.pathname,r=(0,x.I$)({packageList:[],showPackageList:[],recentlyPackageList:F.read(K)||[],tab:"all",onPackageSelect:function(n){(function(t){let e=r.recentlyPackageList.findIndex(e=>e.packageName===t.packageName);-1!==e&&r.recentlyPackageList.splice(e,1),r.recentlyPackageList.unshift(t),F.write(K,r.recentlyPackageList)})(n),function(r){let n=t.query;switch(n.type){case o.ActionOrTriggerListTypeEnum.addAction:{let o=(0,N.getTriggerOrActionListPageParams)(n);if(!o.data.actionGroup)throw console.error("actionGroup is undefined query=",n,"packageInfo=",r),Error("actionGroup is undefined");if(!n.actionType)return(0,p.w)("actionType is undefined query=".concat(n),n,r);let a=(0,_.e9)(n.actionType);if(!a)throw Error("actionType ".concat(n.actionType," is not found"));let c=a.createDefultData();if(n.actionType===q.F.type)c.javaData.packageName=r.packageName;else throw Error("actionType ".concat(n.actionType," is not found"));R.T.dispatchEditEvent(R.T.EditType.add,{projectMemberType:S.K.actionGroup,data:c,projectInfo:o.data}),i.V.checkToPath(t,e,n.backPath,2);break}case o.ActionOrTriggerListTypeEnum.updateAction:{let e=(0,N.getTriggerOrActionListPageParams)(n);if(console.log("res",e),!e.data.actionGroup)throw console.error("actionGroup is undefined query=",n,"packageInfo=",r),Error("actionGroup is undefined");if(!e.data.action)throw console.error("action is undefined query= ",n,"packageinfo=",r),Error("action is undefined");if(R.T.dispatchEditEvent(R.T.EditType.updateJavaData,{projectMemberType:S.K.action,data:{packageName:r.packageName},projectInfo:e.data}),console.log("dispatch event232323456"),n.actionType===q.F.type)t.back();else throw Error("actionType ".concat(n.actionType," is not found"))}}}(n)}});function n(){r.showPackageList=[...function(){let t=function(){if("all"===r.tab)return r.packageList;if("recently"===r.tab)return r.recentlyPackageList;throw Error("tab is not valid")}();return r.searchKey?t.filter(t=>t.label.includes(r.searchKey)):t}()]}return(0,x.kE)(r,"tab",(t,e)=>{n()}),(0,x.kE)(r,"searchKey",(t,e)=>{n()}),(0,x.kE)(r,"searchKey",(t,e)=>{n()}),(0,x.kE)(a.I.data,"list",(t,e)=>{r.packageList=[...a.I.data.list],n()}),(0,I.useEffect)(()=>{!(r.packageList.length>0)&&(a.I.loadPackages(),a.I.data.list.length>0||g.readAllPackages())},[]),n(),[r]}();return(0,n.jsx)(O.G,{children:(0,n.jsx)(X.Provider,{value:t,children:(0,n.jsxs)(D.W,{titleConf:{ns:"homepage/pages/action-list/app-selector/content",key:"content.title"},appbarProps:{title:(0,n.jsx)(J,{}),back:!0},children:[(0,n.jsx)(V,{}),(0,n.jsx)(B,{})]})})})}},22938:(t,e,r)=>{"use strict";r.d(e,{V:()=>o});var n=(t,e,r)=>new Promise((n,o)=>{var i=t=>{try{c(r.next(t))}catch(t){o(t)}},a=t=>{try{c(r.throw(t))}catch(t){o(t)}},c=t=>t.done?n(t.value):Promise.resolve(t.value).then(i,a);c((r=r.apply(t,e)).next())});let o={checkToPath:function(t,e,r,o){return n(this,null,function*(){let n=t.pathname;if(console.log("nowpath=",n),console.log("expectNowPath=",e),console.log("pointPath=",r),n!==r){for(e!==n&&t.replace(r);o>0;)t.back(),o--;t.pathname!==r&&r&&t.push(r)}})}}},75936:(t,e,r)=>{"use strict";r.d(e,{G:()=>d});var n=r(50612),o=r(40242),i=r(68053),a=r(23026),c=r(42590),s=r(57555),l=r(53757),u=r(94344),g=r(26954);function d(t){let{children:e}=t,r=(0,l.useRouter)(),d="scrollPositionInfo",p=window.location.href.split("#")[0],x="dynamic-".concat(p),h=i.P.namespace(x),f=h.read(x);return f||(f={}),f=(0,a.I$)(f),(0,u.useEffect)(()=>{r.beforePopState(t=>(h.clearAll(),!0))}),(0,u.useEffect)(()=>(h.write(x,f),(0,c.c)(f,()=>{h.write(x,f)})),[]),(0,u.useEffect)(()=>{let t=h.read(d)||{x:0,y:0};function e(t){h.write(d,{x:window.scrollX,y:window.scrollY})}function r(){window.addEventListener("scroll",e)}return 0==t.x&&0==t.y?r():window.requestAnimationFrame(()=>{window.scrollTo(t.x,t.y),r()}),function(){window.removeEventListener("scroll",e)}}),(0,n.jsx)(s.q,{value:h,children:(0,n.jsx)(s.p,{value:f,children:(0,n.jsx)(g.xC,{i18n:o.i18n,children:e})})})}(0,o.i18nInit)()},73256:(t,e,r)=>{"use strict";r.d(e,{W:()=>F});var n=r(50612),o=r(35011),i=r(80686),a=r(9655),c=r(67779),s=r(16425),l=r(23235),u=r(92776),g=r(64909),d=r(61150),p=r(88778),x=r(62754),h=r(28542),f=r(94344),C=r(53757),A=r(25065),y=(t,e,r)=>new Promise((n,o)=>{var i=t=>{try{c(r.next(t))}catch(t){o(t)}},a=t=>{try{c(r.throw(t))}catch(t){o(t)}},c=t=>t.done?n(t.value):Promise.resolve(t.value).then(i,a);c((r=r.apply(t,e)).next())});let P=new A.m,k={dipsatcher:P,screenLockCount:0,switchPage:()=>y(void 0,null,function*(){P.dispatch("switchPage"),k.screenLockCount=0}),listenSwitchPage:t=>P.addListener("switchPage",t)};var T=r(76838),w=r(2196);function j(t){let{children:e}=t,r=(0,C.useRouter)();return(0,n.jsx)(T.N,{mode:"wait",children:(0,n.jsx)(w.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e},r.route)})}let m=0;function v(t){let{children:e}=t,r="app-shell-".concat(m++);return(0,f.useEffect)(()=>{let t=document.querySelector("#".concat(r)),e=k.listenSwitchPage(()=>{if(!t)return});if(t)return t.addEventListener("click",t=>{0!=k.screenLockCount&&(t.stopPropagation(),t.preventDefault())}),()=>{e()}},[]),(0,n.jsx)(c.A,{id:r,children:(0,n.jsx)(j,{children:e})})}var L=r(22726),G=Object.defineProperty,b=Object.defineProperties,E=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,N=(t,e,r)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S=(t,e)=>{for(var r in e||(e={}))O.call(e,r)&&N(t,r,e[r]);if(I)for(var r of I(e))D.call(e,r)&&N(t,r,e[r]);return t},_=(t,e)=>b(t,E(e));function q(t){let{children:e,window:r}=t,a=(0,o.A)({target:r?r():void 0});return(0,n.jsx)(i.A,{appear:!1,direction:"down",in:!a,children:null!=e?e:(0,n.jsx)("div",{})})}function R(t){let{children:e,window:r}=t,i=(0,o.A)({target:r?r():void 0,disableHysteresis:!0,threshold:100});return(0,n.jsx)(a.A,{in:i,children:(0,n.jsx)(c.A,{"data-id":"content-scroll-top-button",onClick:t=>{let e=(t.target.ownerDocument||document).querySelector("#back-to-top-anchor");e&&e.scrollIntoView({block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:e})})}function F(t){let{children:e,appbarProps:r,titleConf:o}=t,i=(0,C.useRouter)();return(0,n.jsx)(v,{children:(0,n.jsxs)(f.Fragment,{children:[(0,n.jsx)(s.Ay,{}),(0,n.jsx)(q,_(S({},t),{children:(0,n.jsx)(l.A,{color:"inherit",children:(0,n.jsxs)(u.A,{children:[(0,n.jsx)(x.A,{onClick:function(){if(!p.W.askHistoryBack().defaultPrevented){if(r.backDispatcher){let t={defaultPrevented:!1};if(r.backDispatcher.dispatch("back",t),t.defaultPrevented)return}i.back()}}}),r.title]})})})),(0,n.jsx)(u.A,{id:"back-to-top-anchor"}),(0,n.jsx)(g.A,{sx:{padding:"0",marginTop:"17px"},children:(0,n.jsx)(L.A,{titleConf:o,children:e})}),(0,n.jsx)(R,_(S({},t),{children:(0,n.jsx)(d.A,{size:"small","aria-label":"scroll back to top",children:(0,n.jsx)(h.A,{})})}))]})})}},22726:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var n=r(50612),o=r(67779),i=r(85364),a=r(64909),c=r(94344),s=r(77570),l=r(40242),u=(t,e,r)=>new Promise((n,o)=>{var i=t=>{try{c(r.next(t))}catch(t){o(t)}},a=t=>{try{c(r.throw(t))}catch(t){o(t)}},c=t=>t.done?n(t.value):Promise.resolve(t.value).then(i,a);c((r=r.apply(t,e)).next())});function g(){return s.Cu?(0,n.jsxs)(o.A,{children:[(0,n.jsx)(i.A,{onClick:()=>{window.location.reload()},children:"reload"}),new Date().toLocaleString()]}):(0,n.jsx)(n.Fragment,{children:"  "})}let d=(0,c.createContext)({x:0,y:0}),p=0;function x(t){let{children:e,titleConf:r}=t;p++;let i=(0,c.useContext)(d),s="".concat(Date.now()+Math.random()*Date.now());return(0,c.useEffect)(()=>{!function(){u(this,null,function*(){if(!r)return;let t=r.title;r.ns&&(t=yield(0,l.loadI18nValue)(r.ns,r.key||"content.title")),t&&(document.title=t)})}()},[]),(0,c.useEffect)(()=>{let t=document.getElementsByClassName(s)[0];if(!t)return;t.scrollTop=i.y;let e=()=>{var e=t.scrollTop;i.y=e};return t.removeEventListener("scroll",e),t.addEventListener("scroll",e,{passive:!0}),()=>t.removeEventListener("scroll",e)},[s,i]),(0,n.jsx)(a.A,{className:s,sx:{flexGrow:1,overflow:"auto",padding:"0px"},children:(0,n.jsxs)(o.A,{children:[(0,n.jsx)(g,{}),e]})})}function h(t){let{children:e,titleConf:r}=t;return(0,n.jsx)(x,{titleConf:r,children:e})}},3112:()=>{},81577:()=>{},49345:()=>{},72758:()=>{},79069:()=>{},11697:()=>{},44454:(t,e,r)=>{"use strict";r.d(e,{ActionGroupContext:()=>n.Tj,ActionListContext:()=>n.Us,GroupCheckList1Context:()=>n.oc,ProjectContext:()=>n.vz,TriggerActionContext:()=>n.Ck,TriggerActionGroupContext:()=>n.NF,TriggerContext:()=>n.MS,TriggerGroupContext:()=>n.bf,TriggerListContext:()=>n.Ue,getTriggerOrActionListPageParams:()=>c}),r(3112);var n=r(24681);r(81577),r(49345),r(72758),r(11697),r(79069);var o=r(87696),i=(t=>(t.project="project",t))(i||{}),a=(t=>(t.addAction="add",t.updateAction="update",t))(a||{});function c(t){let e=o.D.findDraftOrSavedProject(t.projectId),r={},n={data:r,params:t};if(!e||(r.project=e,e.triggerActionGroup.id!==t.triggerActionGroupId)||(r.triggerActionGroup=e.triggerActionGroup,!t.triggerActionId))return n;let i=r.triggerActionGroup.list.find(e=>e.id===t.triggerActionId);return i&&(r.triggerAction=i,function(t,e,r){if(!e.actionGroupId||!r.actionGroup||e.actionGroupId!=r.actionGroup.id)return;t.actionGroup=r.actionGroup;let n=r.actionGroup.list.find(t=>t.id===e.actionId);n&&(t.action=n)}(r,t,i),function(t,e,r){if(!e.triggerGroupId||!r.triggerGroup||e.triggerGroupId!=r.triggerGroup.id)return;t.triggerGroup=r.triggerGroup;let n=r.triggerGroup.list.find(t=>t.id===e.triggerId);n&&(t.trigger=n)}(r,t,i)),n}},15751:(t,e,r)=>{"use strict";r.d(e,{ActionGroupContext:()=>o.ActionGroupContext,ActionListContext:()=>o.ActionListContext,GroupCheckList1Context:()=>o.GroupCheckList1Context,ProjectContext:()=>o.ProjectContext,TriggerActionContext:()=>o.TriggerActionContext,TriggerActionGroupContext:()=>o.TriggerActionGroupContext,TriggerContext:()=>o.TriggerContext,TriggerGroupContext:()=>o.TriggerGroupContext,TriggerListContext:()=>o.TriggerListContext,getTriggerOrActionListPageParams:()=>o.getTriggerOrActionListPageParams});var n=r(76463);r.o(n,"ActionGroupContext")&&r.d(e,{ActionGroupContext:function(){return n.ActionGroupContext}}),r.o(n,"ActionListContext")&&r.d(e,{ActionListContext:function(){return n.ActionListContext}}),r.o(n,"GroupCheckList1Context")&&r.d(e,{GroupCheckList1Context:function(){return n.GroupCheckList1Context}}),r.o(n,"ProjectContext")&&r.d(e,{ProjectContext:function(){return n.ProjectContext}}),r.o(n,"TriggerActionContext")&&r.d(e,{TriggerActionContext:function(){return n.TriggerActionContext}}),r.o(n,"TriggerActionGroupContext")&&r.d(e,{TriggerActionGroupContext:function(){return n.TriggerActionGroupContext}}),r.o(n,"TriggerContext")&&r.d(e,{TriggerContext:function(){return n.TriggerContext}}),r.o(n,"TriggerGroupContext")&&r.d(e,{TriggerGroupContext:function(){return n.TriggerGroupContext}}),r.o(n,"TriggerListContext")&&r.d(e,{TriggerListContext:function(){return n.TriggerListContext}}),r.o(n,"getTriggerOrActionListPageParams")&&r.d(e,{getTriggerOrActionListPageParams:function(){return n.getTriggerOrActionListPageParams}});var o=r(44454)},65517:()=>{},76463:(t,e,r)=>{"use strict";var n=r(65517);r.o(n,"ActionGroupContext")&&r.d(e,{ActionGroupContext:function(){return n.ActionGroupContext}}),r.o(n,"ActionListContext")&&r.d(e,{ActionListContext:function(){return n.ActionListContext}}),r.o(n,"GroupCheckList1Context")&&r.d(e,{GroupCheckList1Context:function(){return n.GroupCheckList1Context}}),r.o(n,"ProjectContext")&&r.d(e,{ProjectContext:function(){return n.ProjectContext}}),r.o(n,"TriggerActionContext")&&r.d(e,{TriggerActionContext:function(){return n.TriggerActionContext}}),r.o(n,"TriggerActionGroupContext")&&r.d(e,{TriggerActionGroupContext:function(){return n.TriggerActionGroupContext}}),r.o(n,"TriggerContext")&&r.d(e,{TriggerContext:function(){return n.TriggerContext}}),r.o(n,"TriggerGroupContext")&&r.d(e,{TriggerGroupContext:function(){return n.TriggerGroupContext}}),r.o(n,"TriggerListContext")&&r.d(e,{TriggerListContext:function(){return n.TriggerListContext}}),r.o(n,"getTriggerOrActionListPageParams")&&r.d(e,{getTriggerOrActionListPageParams:function(){return n.getTriggerOrActionListPageParams}})}},t=>{var e=e=>t(t.s=e);t.O(0,[162,602,852,426,455,257,461,415,654,636,593,792],()=>e(19328)),_N_E=t.O()}]);