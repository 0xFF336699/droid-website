(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{9328:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/action-list/app-selector",function(){return r(1779)}])},1779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var n=r(612),a=r(3377),i=r(3004),o=r(7730),c=r(9561),s=(e,t,r)=>new Promise((n,a)=>{var i=e=>{try{c(r.next(e))}catch(e){a(e)}},o=e=>{try{c(r.throw(e))}catch(e){a(e)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,o);c((r=r.apply(e,t)).next())});let l="com.fanfanlo.droid.js.JsReceiver.readAllPackages();",u={script:l,readAllPackages:c.nd?function(){let e=o.yx.callScript(l).javaResultData||[];return i.I.savePackages(e),e}:function(){return s(this,null,function*(){let e=yield r.e(416).then(r.bind(r,4416));return i.I.savePackages(e.readAllPackagesMockData),e.readAllPackagesMockData})}};var d=r(3026),p=r(1681),g=r(242),h=r(5044),f=r(6967),x=r(2066),k=r(1108),y=r(7257),j=r(4761),w=r(9690),b=r(187),A=r(3191),v=r(8635),P=r(1114),m=r(4125),G=r(4601),L=r(3757),I=r(4344),E=r(7068),C=r.n(E),T=r(5936),D=r(3256),N=r(6933),O=r(4048),_=r(7311);let S=C().namespace("app-selector"),R="recentlyPackageList";var q=function(e){return e.all="all",e.recently="recently",e}(q||{});let F=(0,I.createContext)({packageList:[],showPackageList:[],recentlyPackageList:[],tab:"all",onPackageSelect:e=>{}});function K(){let e=(0,I.useContext)(F),[t]=(0,p.x)(e,"showPackageList",e.showPackageList);return(0,n.jsx)(x.A,{children:(0,n.jsx)(k.A,{children:t.map((t,r)=>(0,n.jsx)(y.Ay,{onClick:()=>e.onPackageSelect(t),children:(0,n.jsx)(j.A,{container:!0,children:(0,n.jsxs)(j.A,{size:"grow",container:!0,"data-id":"app-selector-893f",children:[(0,n.jsx)("img",{width:30,style:{borderRadius:"8px"},src:"data:image/gif;base64,".concat(t.iconBase64)}),(0,n.jsx)(w.A,{primary:t.label})]})})},r))})})}function B(){let[e,t]=(0,I.useState)(0),{t:r}=(0,g.useTranslation)("homepage/pages/action-list/app-selector/content"),a=(0,I.useContext)(F);return(0,n.jsx)(x.A,{sx:{width:"100%"},children:(0,n.jsxs)(b.A,{sx:{width:"100%"},onChange:(e,r)=>{t(r),a.tab=0===r?"all":"recently"},value:e,"aria-label":"Tabs where selection follows focus",selectionFollowsFocus:!0,children:[(0,n.jsx)(A.A,{sx:{width:"50%"},label:r("content.all")}),(0,n.jsx)(A.A,{sx:{width:"50%"},label:r("content.recently")})]})})}let M=(0,v.Ay)("div")(e=>{let{theme:t}=e;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,P.X4)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,P.X4)(t.palette.common.white,.25)},marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{marginLeft:t.spacing(1),width:"auto"}}}),X=(0,v.Ay)("div")(e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),W=(0,v.Ay)(m.Ay)(e=>{let{theme:t}=e;return{color:"inherit",width:"100%","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),[t.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}});function z(){let{t:e}=(0,g.useTranslation)("homepage/pages/action-list/app-selector/content"),t=(0,I.useContext)(F);return(0,n.jsxs)(j.A,{container:!0,width:"100%",justifyContent:"space-between",sx:{alignItems:"center"},children:[(0,n.jsx)(j.A,{children:(0,n.jsxs)(M,{children:[(0,n.jsx)(X,{children:(0,n.jsx)(f.A,{})}),(0,n.jsx)(W,{onChange:function(e){t.searchKey=e.target.value},placeholder:e("content.searchPlaceholder"),inputProps:{"aria-label":"search"}})]})}),(0,n.jsx)(j.A,{children:(0,n.jsx)(G.A,{onClick:()=>{u.readAllPackages()},children:(0,n.jsx)(h.A,{})})})]})}function H(){let[e]=function(){let e=(0,L.useRouter)(),t=(0,d.I$)({packageList:[],showPackageList:[],recentlyPackageList:S.get(R)||[],tab:"all",onPackageSelect:function(r){(function(e){let r=t.recentlyPackageList.findIndex(t=>t.packageName===e.packageName);-1!==r&&t.recentlyPackageList.splice(r,1),t.recentlyPackageList.unshift(e),S.set(R,t.recentlyPackageList)})(r),function(t){let r=e.query;switch(r.type){case a.Q.addAction:{let n=(0,N.Ge)(r);if(!n.data.actionGroup)throw console.error("actionGroup is undefined query=",r,"packageInfo=",t),Error("actionGroup is undefined");let a=(0,O.e9)(r.actionType);if(!a)throw Error("actionType ".concat(r.actionType," is not found"));let i=a.createDefultData();if(r.actionType===_.F.type)i.javaData.packageName=t.packageName;else throw Error("actionType ".concat(r.actionType," is not found"));n.data.actionGroup.list.push(i),e.back(),e.back();break}case a.Q.updateAction:{let n=(0,N.Ge)(r);if(console.log("res",n),!n.data.actionGroup)throw console.error("actionGroup is undefined query=",r,"packageInfo=",t),Error("actionGroup is undefined");if(r.actionType===_.F.type)n.data.action.javaData.packageName=t.packageName,e.back();else throw Error("actionType ".concat(r.actionType," is not found"))}}}(r)}});function r(){t.showPackageList=[...function(){let e=function(){if("all"===t.tab)return t.packageList;if("recently"===t.tab)return t.recentlyPackageList;throw Error("tab is not valid")}();return t.searchKey?e.filter(e=>e.label.includes(t.searchKey)):e}()]}return(0,d.kE)(t,"tab",(e,t)=>{r()}),(0,d.kE)(t,"searchKey",(e,t)=>{r()}),(0,d.kE)(t,"searchKey",(e,t)=>{r()}),(0,d.kE)(i.I.data,"list",(e,n)=>{t.packageList=[...i.I.data.list],r()}),(0,I.useEffect)(()=>{!(t.packageList.length>0)&&(i.I.loadPackages(),i.I.data.list.length>0||u.readAllPackages())},[]),r(),[t]}();return(0,n.jsx)(T.G,{children:(0,n.jsx)(F.Provider,{value:e,children:(0,n.jsxs)(D.W,{appbarProps:{title:(0,n.jsx)(z,{}),back:!0},children:[(0,n.jsx)(B,{}),(0,n.jsx)(K,{})]})})})}},5936:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r(612),a=r(242),i=r(4216);function o(e){let{children:t}=e;return(0,n.jsx)(i.xC,{i18n:a.i18n,children:t})}(0,a.i18nInit)()},3256:(e,t,r)=>{"use strict";r.d(t,{W:()=>F});var n=r(612),a=r(5011),i=r(686),o=r(9655),c=r(7779),s=r(6425),l=r(3235),u=r(2776),d=r(4909),p=r(1150),g=r(8778),h=r(2754),f=r(8542),x=r(4344),k=r(3757),y=r(5065),j=(e,t,r)=>new Promise((n,a)=>{var i=e=>{try{c(r.next(e))}catch(e){a(e)}},o=e=>{try{c(r.throw(e))}catch(e){a(e)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,o);c((r=r.apply(e,t)).next())});let w=new y.m,b={dipsatcher:w,screenLockCount:0,switchPage:()=>j(void 0,null,function*(){w.dispatch("switchPage"),b.screenLockCount=0}),listenSwitchPage:e=>w.addListener("switchPage",e)};var A=r(6838),v=r(2196);function P(e){let{children:t}=e,r=(0,k.useRouter)();return(0,n.jsx)(A.N,{mode:"wait",children:(0,n.jsx)(v.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:t},r.route)})}let m=0;function G(e){let{children:t}=e,r="app-shell-".concat(m++);return console.log("i am app shell"),(0,x.useEffect)(()=>{let e=document.querySelector("#".concat(r)),t=b.listenSwitchPage(()=>{if(!e)return});if(e)return e.addEventListener("click",e=>{0!=b.screenLockCount&&(e.stopPropagation(),e.preventDefault())}),()=>{t()}},[]),console.log("this is page shell"),(0,n.jsx)(c.A,{id:r,children:(0,n.jsx)(P,{children:t})})}var L=r(2726),I=Object.defineProperty,E=Object.defineProperties,C=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&O(e,r,t[r]);if(T)for(var r of T(t))N.call(t,r)&&O(e,r,t[r]);return e},S=(e,t)=>E(e,C(t));function R(e){let{children:t,window:r}=e,o=(0,a.A)({target:r?r():void 0});return(0,n.jsx)(i.A,{appear:!1,direction:"down",in:!o,children:null!=t?t:(0,n.jsx)("div",{})})}function q(e){let{children:t,window:r}=e,i=(0,a.A)({target:r?r():void 0,disableHysteresis:!0,threshold:100});return(0,n.jsx)(o.A,{in:i,children:(0,n.jsx)(c.A,{"data-id":"content-scroll-top-button",onClick:e=>{let t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}function F(e){let{children:t,appbarProps:r}=e,a=(0,k.useRouter)();return(0,n.jsx)(G,{children:(0,n.jsxs)(x.Fragment,{children:[(0,n.jsx)(s.Ay,{}),(0,n.jsx)(R,S(_({},e),{children:(0,n.jsx)(l.A,{color:"inherit",children:(0,n.jsxs)(u.A,{children:[(0,n.jsx)(h.A,{onClick:function(){if(!g.W.askHistoryBack().defaultPrevented){if(r.backDispatcher){let e={defaultPrevented:!1};if(r.backDispatcher.dispatch("back",e),e.defaultPrevented)return}a.back()}}}),r.title]})})})),(0,n.jsx)(u.A,{id:"back-to-top-anchor"}),(0,n.jsx)(d.A,{sx:{padding:"0",marginTop:"17px"},children:(0,n.jsx)(L.A,{children:t})}),(0,n.jsx)(q,S(_({},e),{children:(0,n.jsx)(p.A,{size:"small","aria-label":"scroll back to top",children:(0,n.jsx)(f.A,{})})}))]})})}},2726:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(612),a=r(4909),i=r(7779),o=r(4344),c=r(3757);let s=(0,o.createContext)({x:0,y:0}),l=0;function u(e){let{children:t}=e;l++;let r=(0,o.useContext)(s);(0,c.useRouter)();let u="".concat(Date.now()+Math.random()*Date.now());return(0,o.useEffect)(()=>{let e=document.getElementsByClassName(u)[0];if(!e)return;e.scrollTop=r.y;let t=()=>{var t=e.scrollTop;r.y=t};return e.removeEventListener("scroll",t),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)},[u,r]),(0,n.jsx)(a.A,{className:u,sx:{flexGrow:1,overflow:"auto",padding:"0px"},children:(0,n.jsx)(i.A,{children:t})})}function d(e){let{children:t}=e;return(0,n.jsx)(u,{children:t})}},6933:(e,t,r)=>{"use strict";r.d(t,{Ge:()=>o});var n=r(7696),a=(e=>(e.project="project",e))(a||{}),i=(e=>(e.addAction="add",e.updateAction="update",e))(i||{});function o(e){let t=n.D.findDraftOrSavedProject(e.projectId),r={},a={data:r,params:e};if(!t||(r.project=t,t.triggerActionGroup.id!==e.triggerActionGroupId)||(r.triggerActionGroup=t.triggerActionGroup,!e.triggerActionId))return a;let i=r.triggerActionGroup.list.find(t=>t.id===e.triggerActionId);return i&&(r.triggerAction=i,function(e,t,r){if(!t.actionGroupId||!r.actionGroup||t.actionGroupId!=r.actionGroup.id)return;e.actionGroup=r.actionGroup;let n=r.actionGroup.list.find(e=>e.id===t.actionId);n&&(e.action=n)}(r,e,i),function(e,t,r){if(!t.triggerGroupId||!r.triggerGroup||t.triggerGroupId!=r.triggerGroup.id)return;e.triggerGroup=r.triggerGroup;let n=r.triggerGroup.list.find(e=>e.id===t.triggerId);n&&(e.trigger=n)}(r,e,i)),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[74,602,852,250,737,164,761,811,636,593,792],()=>t(9328)),_N_E=e.O()}]);