{"version":3,"file":"static/chunks/pages/add-market-by-url-3afc31651236a8ec.js","mappings":";;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,KAAgD;AACvE;AACA;AACA,OAAO,KAAU,EAAE,EAId;AACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZuO;;;;AC6D/N;AA5D0H;AACxG;AACmB;AACb;AAGhC,gBAAQ,CAAC;AACF,SAAS,cAAoB,EAAsB;UAA/B,SAAS,IAAX;IACvB,MAAM,SAAS,yBAAS,CAAC;IACzB,MAAM,YAAY;IAClB,MAAM,OAAO,OAAO,SAAS,KAAK,MAAM,GAAG,EAAE,CAAC;IAC9C,MAAM,aAAa,WAAe,OAAJ,IAAI;IAClC,MAAM,IAAI,6BAAU,CAAC,UAAU,UAAU;IACzC,IAAI,IAAuC,EAAE,KAAK,UAAU;IAC5D,IAAI,CAAC,GAAG;QACN,IAAI,CAAC;QACL,EAAE,MAAM,YAAY,CAAC;IACvB;IACA,IAAI,8BAAO,CAAC,CAAC;IACb,mBAAS,CAAC;QAER,OAAO,eAAe,CAAC;YACrB,EAAE,SAAS;YACX,OAAO;QACT,CAAC;IACH,CAAC;IACD,mBAAS,CAAC;QACR,EAAE,MAAM,YAAY,CAAC;QACrB,OAAO,oCAAY,CAAC,GAAG;YACrB,EAAE,MAAM,YAAY,CAAC;QACvB,CAAC;IACH,GAAG,CAAC,CAAC;IACL,mBAAS,CAAC;QACR,MAAM,OAAQ,EAAE,KAAK,SAAS,KAAK;YAAE,GAAG;YAAG,GAAG;QAAE;QAEhD,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG;YAC9B,aAAa;QACf,OAAO;YACL,OAAO,sBAAsB;gBAC3B,OAAO,SAAS,KAAK,GAAG,KAAK,CAAC;gBAC9B,aAAa;YACf,CAAC;QACH;QACA,SAAS,SAAS,GAAU;YAE1B,EAAE,MAAM,WAAW;gBAAE,GAAG,OAAO;gBAAS,GAAG,OAAO;YAAQ,CAAC;QAC7D;QACA,SAAS,eAAe;YACtB,OAAO,iBAAiB,UAAU,QAAQ;QAC5C;QAEA,SAAS,QAAQ;YACf,OAAO,oBAAoB,UAAU,QAAQ;QAC/C;QACA,OAAO;IACT,CAAC;IACD,OACE,oCAAC,0CAAgB,EAAhB;QAAiB,OAAO;QACvB,8CAAC,iDAAuB,EAAvB;YAAwB,OAAO;YAE9B,8CAAC,0BAAe,EAAf;gBAAgB,IAAI;gBAClB;YAAA,CACH;QAAA,CACF;IAAA,CACF;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3DmB;AARoB;AACiC;AAEK;AAI7E,SAAS,SAAQ;IACf,IAAG,CAAC,iBAAK,CAAC,QAAO;QAAE;IAAA,CAAE;IACrB,OACE,qCAAC,kBAAG,EAAH;QACC;YAAA,oCAAC,qBAAM,EAAN;gBAAO,SAAS;oBAAO,OAAO,SAAS,OAAO;gBAAC;gBAAG;YAAA,CAAQ;YAC1D,oBAAI,KAAK,EAAE,eAAe;SAAA;IAAA,CAC7B;AAEJ;AAEA,MAAM,wBAAU,uBAAa,CAAC;IAAE,GAAG;IAAG,GAAG;AAAE,CAAC;AAC5C,IAAI,QAAQ;AACZ,SAAwB,iBAA0C,EAAsE;UAAlG,UAAU,WAAW,OAAO,IAA9B;IAClC;IACA,MAAM,SAAS,oBAAU,CAAC,OAAO;IACjC,MAAM,QAAQ,GAA0C,OAAvC,KAAK,IAAI,IAAI,KAAK,OAAO,IAAI,KAAK,IAAI,CAAC;IACxD,mBAAS,CAAC;QACR,SAAe,YAAW;YAAA;gBACxB,IAAG,CAAC,UAAU;gBACd,IAAI,QAAQ,UAAU;gBACtB,IAAG,UAAU,IAAG;oBACd,QAAQ,MAAM,qBAAa,CAAC,UAAU,IAAI,UAAU,OAAO,eAAe;gBAC5E;gBACA,IAAG,CAAC,MAAM;gBACV,SAAS,QAAQ;YACnB;QAAA;QACA,UAAU;IACZ,GAAG,CAAC,CAAC;IACL,mBAAS,CAAC;QACR,MAAM,YAAY,SAAS,uBAAuB,KAAK,EAAE,CAAC;QAC1D,IAAI,CAAC,UAAW;QAChB,UAAU,YAAY,OAAO;QAC7B,MAAM,WAAW;YACf,IAAI,YAAY,UAAU;YAC1B,OAAO,IAAI;QACb;QACA,UAAU,oBAAoB,UAAU,QAAQ;QAChD,UAAU,iBAAiB,UAAU,UAAU;YAAE,SAAS;QAAK,CAAC;QAChE,OAAO,IAAM,UAAU,oBAAoB,UAAU,QAAQ;IAC/D,GAAG;QAAC;QAAO,MAAM;KAAC;IAClB,OAEE,oCAAC,wBAAS,EAAT;QAAU,WAAW;QAAO,IAAI;YAAE,UAAU;YAAG,UAAU;YAAQ,SAAS;QAAM;QAC/E,+CAAC,kBAAG,EAAH;YACG;gBAAA,WAAW,UAAU,WAAe,oCAAC,UAAO;gBAC7C;aAAA;QAAA,CACH;IAAA,CACF;AAEJ;;;;ACnDQ;AAJgB;AAExB,SAAwB,wBAAiD,EAAuE;UAAnG,UAAU,WAAW,OAAO,IAA9B;IACvC,OACI,oCAAC,WAAW,EAAX;QAAY;QAAsB;QAC9B;IAAA,CACL;AAER;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPkB;AAGX,MAAM,gBAAgB;IA8ElB,YAAY,SAAuB;QACtC,KAAK,sBAAsB;QAC3B,KAAK,uBAAuB;QAC5B,MAAM,eAAe,8DAEqB,OAAb,KAAK,QAAQ;QAkE1C,MAAM,cAAc,QAAQ,SAAS,SAAS,IACxC,QAAQ,QAAQ,WAAW,GAAe,OAAZ,YAAY,UAAS,MACnD,UAAG,OAAO,EAAe,OAAZ,YAAY;QAE/B,KAAK,OAAO,SAAS;IACzB;IAAA;;;;GAAA,GAOO,WAAW,UAAyB,WAAgC;QACvE,KAAK,WAAW;QAChB,KAAK,YAAY;IACrB;IAAA;;;;GAAA,GAOO,WAAW,UAAyB,WAAgC;QACvE,KAAK,WAAW;QAChB,KAAK,YAAY;IACrB;IAEQ,oBAAoB,OAA2B;QACnD,IAAI,MAAM,KAAK,SAAS,YAAY,MAAM,KAAK,aAAa,KAAK,UAAU;YACvE,IAAI,EAAE,QAAQ,MAAM,IAAI,MAAM;YAC9B,MAAM,iBAAiB,OAAO;YAG9B,IAAI,KAAK,aAAa,MAAM;gBACxB,QAAQ,KAAK,IAAI,OAAO,KAAK,QAAQ;YACzC;YACA,IAAI,KAAK,cAAc,MAAM;gBACzB,SAAS,KAAK,IAAI,QAAQ,KAAK,SAAS;YAC5C;YAGA,IAAI,KAAK,aAAa,MAAM;gBACxB,QAAQ,KAAK,IAAI,OAAO,KAAK,QAAQ;YACzC,OAAO;gBAEH,QAAQ,KAAK,IAAI,OAAO,cAAc;YAC1C;YAEA,IAAI,KAAK,cAAc,MAAM;gBACzB,SAAS,KAAK,IAAI,QAAQ,KAAK,SAAS;YAC5C;YAGA,KAAK,UAAU,MAAM,SAAS,GAAS,OAAN,MAAM;YACvC,KAAK,UAAU,MAAM,QAAQ,GAAQ,OAAL,KAAK;QACzC;IACJ;IAAA;;;;;GAAA,GAQa,QAAQ,KAAa,QAAqB,SAAkC;QAAA;YACrF,KAAK,sBAAsB,UAAU;YACrC,KAAK,uBAAuB,WAAW;YACvC,IAAI,KAAK,QAAQ;gBAEb,KAAK,OAAO,MAAM;YACtB,OAAO;gBACH,QAAQ,MAAM,qDAAqD;YACvE;QACJ;IAAA;IAEM,QAAQ,KAAW;QAAA;YACrB,IAAG;gBACC,MAAM,MAAM,MAAM,oBAAK,CAAC,IAAI,GAAG;gBAC/B,QAAQ,IAAI,QAAQ,GAAG;YAC3B,SAAO,GAAE;gBACL,QAAQ,MAAM,uBAAuB,CAAC;YAC1C;QACJ;IAAA;IAAA;IAAA;;;;GAAA,GAQa,iBAAiB,KAA4B;QAAA;YACtD,QAAQ,IAAI,uBAAuB,GAAG;YACtC,IAAI;gBACA,MAAM,WAAW,MAAM,MAAM,GAAG;gBAChC,IAAI,CAAC,SAAS,IAAI;oBACd,MAAM,IAAI,MAAM,uBAAsC,CAAE,MAAjB,SAAS,MAAM;gBAC1D;gBACA,MAAM,UAAU,MAAM,SAAS,KAAK;gBACpC,KAAK,YAAY,OAAO;YAC5B,SAAS,OAAO;gBACZ,QAAQ,MAAM,+BAA+B,KAAK;gBAClD,MAAM;YACV;QACJ;IAAA;IAAA;;;GAAA,GAMO,eAA+B;QAClC,OAAO,KAAK;IAChB;IAAA;;;;GAAA,GAOO,QAAQ,OAAe,QAAsB;QAChD,KAAK,UAAU,MAAM,QAAQ;QAC7B,KAAK,UAAU,MAAM,SAAS;IAClC;IAnQA,aAAc;QAPd,KAAQ,WAA0B;QAClC,KAAQ,YAA2B;QACnC,KAAQ,WAA0B;QAClC,KAAQ,YAA2B;QACnC,KAAQ,sBAA2C;QACnD,KAAQ,uBAAwD;QAG5D,KAAK,WAAW,YAAY,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC;QAGlE,KAAK,YAAY,SAAS,cAAc,KAAK;QAC7C,KAAK,SAAS,SAAS,cAAc,QAAQ;QAG7C,KAAK,UAAU,MAAM,QAAQ;QAC7B,KAAK,UAAU,MAAM,SAAS;QAC9B,KAAK,UAAU,MAAM,WAAW;QAChC,KAAK,UAAU,MAAM,WAAW;QAChC,KAAK,UAAU,MAAM,WAAW;QAChC,KAAK,UAAU,MAAM,SAAS;QAG9B,KAAK,OAAO,MAAM,QAAQ;QAC1B,KAAK,OAAO,MAAM,SAAS;QAC3B,KAAK,OAAO,MAAM,SAAS;QAC3B,KAAK,OAAO,MAAM,WAAW;QAC7B,KAAK,OAAO,aAAa,aAAa,IAAI;QAC1C,KAAK,OAAO,aAAa,YAAY,UAAU;QAG/C,KAAK,OAAO,SAAS;YACjB,IAAI,KAAK,qBAAqB;gBAC1B,KAAK,oBAAoB;YAG7B;YACA,IAAG,IAAkB,EAAc;gBAC/B,MAAM,eAAgB,OAAe;gBAErC,aAAa;oBACT,SAAQ,CAAC,UAET,CAFsB;oBAGtB,SAAS;oBACT,aAAY;oBACZ,KAAK;oBAAA;oBACL,aAAa;gBACf,GAAG,IAAiB,CAAE,MAAf,KAAK,QAAQ;YAE1B;QACJ;QAEA,KAAK,OAAO,UAAU,CAAC,OAAuB,QAAiB,QAAiB,OAAgB;YAC5F,QAAQ,MAAM,sDAAsD,kCAAkC,KAAK;YAC3G,MAAM,MAAM,SAAS,IAAI,MAAM,OAAO,UAAU,WAAW,QAAQ,+BAA+B;YAClG,IAAI,KAAK,sBAAsB;gBAC3B,KAAK,qBAAqB,GAAG;YAGjC;QACJ;QAIA,KAAK,UAAU,YAAY,KAAK,MAAM;QAGtC,KAAK,OAAO,KAAK,KAAK;QAGtB,OAAO,iBAAiB,WAAW,KAAK,oBAAoB,KAAK,IAAI,CAAC;IAC1E;AAmMJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpJgB;AAhImC;AACnB;AAEhB;AACa;AACN;AACL;AA0BX,MAAM,uBAA4D;QAAC,EACtE,OACA,WACA,KACA,SACA,UACA,WACA,UACA,WACA,SACA,QACJ,KAAM;IACF,MAAM,eAAe,gBAAM,CAAiB,IAAI;IAChD,MAAM,qBAAqB,gBAAM,CAAyB,IAAI;IAE9D,MAAM,CAAC,eAAe,gBAAgB,IAAI,kBAAQ,CAAU,KAAK;IAEjE,MAAM,CAAC,aAAa,cAAc,IAAI,kBAAQ,CAAe,IAAI;IAEjE,mBAAS,CAAC;QAEN,IAAI,CAAC,mBAAmB,WAAW,aAAa,SAAS;YACrD,mBAAmB,UAAU,IAAI,eAAe,CAAC;YACjD,MAAM,YAAY,mBAAmB;YACrC,UAAU,WAAW,8BAAY,MAAM,gCAAa,IAAI;YACxD,UAAU,WAAW,8BAAY,MAAM,gCAAa,IAAI;YACxD,aAAa,QAAQ,YAAY,UAAU,aAAa,CAAC;QAC7D;QAEA,OAAO;YAEH,IAAI,aAAa,WAAW,mBAAmB,SAAS;gBACpD,aAAa,QAAQ,YAAY,mBAAmB,QAAQ,aAAa,CAAC;gBAC1E,mBAAmB,UAAU;YACjC;QACJ;IACJ,GAAG;QAAC;QAAU;QAAW;QAAU,SAAS;KAAC;IAE7C,mBAAS,CAAC;QACN,MAAM,kBAAkB,mBAAmB;QAC3C,IAAI,CAAC,gBAAiB;QAEtB,MAAM,mBAAmB,IAAY;gBAEjC,iBAAiB,IAAI;gBACrB,eAAe,IAAI;gBAEnB,IAAI;oBACA,IAAI,SAAS;wBACT,gBAAgB,YAAY,OAAO;wBAGnC,iBAAiB,KAAK;wBACtB;oBACJ,WAAW,KAAK;wBAEZ,MAAM,aAAa;4BACf,iBAAiB,KAAK;4BACtB,eAAe,IAAI;4BACnB;wBACJ;wBAEA,MAAM,cAAc,CAAC;4BACjB,QAAQ,MAAM,kFAAkF,eAAe,KAAK;4BACpH,iBAAiB,KAAK;4BACtB,eAAe,KAAK;4BACpB,mCAAU;wBACd;wBAEA,gBAAgB,QAAQ,KAAK,YAAY,WAAW;oBAExD,OAAO;wBACH,iBAAiB,KAAK;oBAC1B;gBACJ,SAAS,OAAO;oBACZ,QAAQ,MAAM,iDAAiD,KAAK;oBACpE,IAAI,iBAAiB,OAAO;wBACxB,iBAAiB,KAAK;wBACtB,eAAe,KAAK;wBACpB,mCAAU;oBACd,OAAO;wBACH,MAAM,eAAe,IAAI,MAAM,wCAAwC;wBACvE,iBAAiB,KAAK;wBACtB,eAAe,YAAY;wBAC3B,mCAAU;oBACd;gBACJ;YACJ;QAEA,iBAAiB;IACrB,GAAG;QAAC;QAAK;QAAS;QAAS;QAAQ,mBAAmB,OAAO;KAAC;IAE9D,OACI,qCAAC;QAAI,KAAK;QAAc;QAAc;QAEjC;YAAA,iBACG,qCAAC,kBAAG,EAAH;gBAAI,IAAI;oBAAE,SAAS;oBAAQ,gBAAgB;oBAAU,YAAY;oBAAU,SAAS;gBAAE;gBACnF;oBAAA,oCAAC,+BAAgB,EAAhB;wBAAiB,MAAM;oBAAA,CAAI;oBAC5B,oCAAC,yBAAU,EAAV;wBAAW,SAAQ;wBAAQ,IAAI;4BAAE,IAAI;wBAAE;wBAAG;oBAAA,CAAkB;iBAAA;YAAA,CACjE;YAEH,eAAe,CAAC,iBACb,qCAAC,oBAAK,EAAL;gBAAM,UAAS;gBAAQ,IAAI;oBAAE,GAAG;gBAAE;gBAAG;oBAAA;oBAAgB,YAAY;iBAAA;YAAA,CAAQ;SAAA;IAAA,CAGlF;AAER;;;;;;;;;;AC3IqD;AACL;AACF;AACgB;AAC1B;AACG;AACI;AACjB;AAW1B,eAAeU,gBAAgBC,KAAa;IAC1C,MAAMC,MAAM,yDAAmF,OAA1BC,mBAAmBF;IACxF,MAAMG,MAAM,MAAML,oBAAKA,CAACM,GAAG,CAACH;IAC5B,IAAG,CAACE,IAAIE,IAAI,IAAI,CAACF,IAAIE,IAAI,CAACC,IAAI,EAAC;QAC7B,MAAM,IAAIC,MAAM;IAClB;IACA,mBAAmB;IACjB,eAAe;IACjB,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAIC,IAAIT;IAC3B,kCAAkC;IAClC,IAAIM,OAAOH,IAAIE,IAAI,CAACC,IAAI;IACxB,oBAAoB;IACpB,SAASI,eAAeF,MAAc,EAAEG,IAAY;QAClD,IAAIV;QACJ,IAAIO,OAAOI,QAAQ,CAAC,QAAQD,KAAKE,UAAU,CAAC,MAAM;YAChDZ,MAAMO,SAASG,KAAKG,KAAK,CAAC;QAC5B,OAAO,IAAI,CAACN,OAAOI,QAAQ,CAAC,QAAQ,CAACD,KAAKE,UAAU,CAAC,MAAM;YACzDZ,MAAMO,SAAS,MAAMG;QACvB,OAAO;YACLV,MAAMO,SAASG;QACjB;QACA,eAAe;QACf,MAAMI,YAAY,YAAuB,OAAXC,KAAKC,GAAG;QACtC,IAAIhB,IAAIiB,QAAQ,CAAC,MAAM;YACrB,2BAA2B;YAC3B,IAAI,kBAAkBC,IAAI,CAAClB,MAAM,OAAOA;YACxC,OAAOA,MAAOA,CAAAA,IAAIW,QAAQ,CAAC,QAAQX,IAAIW,QAAQ,CAAC,OAAO,KAAK,GAAE,IAAKG;QACrE,OAAO;YACL,OAAOd,MAAM,MAAMc;QACrB;IACF;IACA,uBAAuB;IACvBT,OAAOA,KAAKc,OAAO,CAAC,qDAAqD,CAACC,OAAWC,IAAQC,KAAW,GAAQb,OAALY,IAAgC,OAA3BZ,eAAeF,QAAQe;IACvI,6BAA6B;IAC7BjB,OAAOA,KAAKc,OAAO,CAAC,oDAAoD,CAACC,OAAWC,IAAQC,KAAW,GAAQb,OAALY,IAAgC,OAA3BZ,eAAeF,QAAQe;IACtI,4CAA4C;IAC5CjB,OAAOA,KAAKc,OAAO,CAAC,8CAA8C,CAACC,OAAWC,IAAQC,KAAW,GAAQb,OAALY,IAAgC,OAA3BZ,eAAeF,QAAQe;IAChIC,QAAQC,GAAG,CAAC,gBAAgBnB;IAC5B,OAAOA;AACT;AAEA,MAAMoB,kBAAkD;QAAC,EACvDC,gBAAgB,EAChBC,mBAAmB,EACnBC,eAAe,EAAE,EACjBC,eAAe,IAAI,EACpB;IACC,MAAM,CAACC,YAAYC,cAAc,GAAG1C,kBAAQA,CAASuC;IACrD,MAAM,CAACI,OAAOC,SAAS,GAAG5C,kBAAQA,CAAUwC;IAC5C,MAAM,CAACK,OAAOC,SAAS,GAAG9C,kBAAQA,CAAS;IAC3C,MAAM,EAAC+C,CAAC,EAAC,GAAGxC,sBAAcA,CAAC;IAC3B,yCAAyC;IACzC,MAAMyC,aAAa,CAACrC;QAClB,IAAI;YACF,IAAIQ,IAAIR;YACR,OAAO;QACT,EAAE,OAAOsC,GAAG;YACV,OAAO;QACT;IACF;IAEA,sCAAsC;IACtC,MAAMC,eAAejD,qBAAWA,CAAC,OAAOS,OAAeyC;QACrDjB,QAAQC,GAAG,CAAC,qBAAqBzB,OAAO,WAAWyC;QACnD,IAAG,CAACzC,OAAM;YACRoC,SAAS;YACTR,oBAAoB;gBAAEc,KAAK;gBAAIT;YAAM;YACrCT,QAAQC,GAAG,CAAC;YACZ;QACF;QACA,IAAIgB,cAAc;YAChB,IAAIzC,SAASsC,WAAWtC,QAAQ;gBAC9B,MAAMM,OAAO,MAAMP,gBAAgBC;gBACnC,IAAGM,MAAK;oBACN8B,SAAS;oBACTR,oBAAoB;wBAAEc,KAAKpC;wBAAM2B,OAAO;oBAAM;gBAChD,OAAK;oBACHG,SAAS;gBACX;YACF,OAAO,IAAIpC,OAAO;gBAChBoC,SAAS;YACX,OAAO;gBACLA,SAAS,KAAK,gCAAgC;YAChD;QACF,OAAO;YACL,sEAAsE;YACtE,yDAAyD;YACzDA,SAAS;YACTR,oBAAoB;gBAAEc,KAAK1C;gBAAOiC,OAAO;YAAM;QACjD;IACF,GAAG;QAACL;KAAoB;IAExB,0DAA0D;IAC1D,MAAM,EAAEe,KAAKC,qBAAqB,EAAE,GAAGhD,gCAAaA,CAClD4C,cACA;QACEK,MAAM;IACR;IAGF,MAAMC,oBAAoB,CAACC;QACzB,MAAMC,WAAWD,MAAME,MAAM,CAACjD,KAAK;QACnCgC,cAAcgB;QACd,0CAA0C;QAC1CJ,sBAAsBI,UAAUf;IAClC;IAEA,MAAMiB,uBAAuB,CAACH;QAC5B,MAAMI,WAAWJ,MAAME,MAAM,CAACG,OAAO;QACrClB,SAASiB;QACT,+DAA+D;QAC/DX,aAAaT,YAAYoB;IAC3B;IACA,IAAIE,aAAa;IACjB,IAAGpB,OAAM;QACPoB,aAAa1B,mBAAmBU,EAAE,sBAAsBA,EAAE;IAC5D,OAAK;QACHgB,aAAa1B,mBAAmBU,EAAE,uBAAuBA,EAAE;IAC7D;IACA,IAAIiB,cAAc;IAClB,IAAG,CAACrB,OAAM;QACRqB,cAAc3B,mBAAoB,oDAAkD,oBAA8GU,OAA1FA,EAAE,sBAAqB,qEAAwGA,OAArCA,EAAE,8BAA6B,QAA+B,OAAzBA,EAAE,wBAAuB;IAClQ,OAAK;QACHiB,cAAc3B,mBAAoB,4DAA4D;IAChG;IACA,qBACE,qBAAChC,kBAAGA;QAAC4D,IAAI;YAAEC,SAAS;YAAQC,eAAe;YAAUC,KAAK;QAAE;;0BAC1D,oBAAClE,wBAASA;gBACRmE,OAAON;gBACPO,SAAQ;gBACRC,SAAS;gBACT7D,OAAO+B;gBACP+B,UAAUhB;gBACVX,OAAO,CAAC,CAACA;gBACT4B,YAAY5B;gBACZmB,aAAaA;gBACbU,WAAW,CAAC/B;gBACZgC,MAAMhC,QAAQ,IAAI;;0BAEpB,oBAACvC,+BAAgBA;gBACfwE,uBACE,oBAACzE,uBAAQA;oBACP2D,SAASnB;oBACT6B,UAAUZ;;gBAGdS,OAAOtB,EAAE;;;;AAIjB;AAEA,wEAAeX,eAAeA,EAAC;;;;AC1KsB;AACf;AACc;AACF;AACd;AACQ;AACI;AACiB;AAEC;AAElE,MAAM8C,iBAA2B;IAC/B,MAAM,CAACC,MAAMC,QAAQ,GAAGpF,kBAAQA,CAAS;IACzC,MAAM,CAACqF,SAASC,WAAW,GAAGtF,kBAAQA,CAAS;IAC/C,MAAM,CAACuF,aAAaC,eAAe,GAAGxF,kBAAQA,CAAS;IACvD,MAAM,CAACyF,eAAeC,iBAAiB,GAAG1F,kBAAQA,CAA8B;IAChF,MAAM,CAAC2F,gBAAgBC,kBAAkB,GAAG5F,kBAAQA,CAA8B;IAElF,MAAM,EAAC+C,CAAC,EAAC,GAAGxC,sBAAcA,CAAC;IAC3B,MAAMsF,cAAmC;QACvCC,UAAU;QACVC,WAAW;QACXC,QAAQ;QACR9B,SAAS;IACX;IAEA,MAAM+B,0BAA0BhG,qBAAWA,CAAC,CAACiG;QAC3CR,iBAAiBQ;IACnB,GAAG,EAAE;IAEL,MAAMC,8BAA8BlG,qBAAWA,CAAC,CAACiG;QAC/CN,kBAAkBM;IACpB,GAAG,EAAE;IAEL,MAAME,aAAaX;IAEnB,qBACE,oBAACZ,mBAAIA;QAACZ,IAAI;YAAEoC,UAAU;YAAKC,QAAQ;YAAQC,IAAI;QAAE;kBAC/C,mCAACzB,0BAAWA;;8BACV,oBAACzE,kBAAGA;oBAAC4D,IAAI;wBAAEuC,IAAI;wBAAGC,OAAO;oBAAa;8BACnC1D,EAAE;;8BAEL,oBAACgC,yBAAUA;oBAACT,SAAQ;oBAAKoC,WAAU;oBAAKC,YAAY;8BACjD5D,EAAE;;8BAGL,qBAAC1C,kBAAGA;oBAAC4D,IAAI;wBAAEuC,IAAI;oBAAE;;sCACf,oBAACtG,wBAASA;4BACRqE,SAAS;4BACTF,OAAOtB,EAAE;4BACTuB,SAAQ;4BACR5D,OAAOyE;4BACPX,UAAU,CAACoC,IAAMxB,QAAQwB,EAAEjD,MAAM,CAACjD,KAAK;4BACvCuD,IAAI;gCAAEuC,IAAI;4BAAE;;sCAEd,oBAACtG,wBAASA;4BACRqE,SAAS;4BACTF,OAAOtB,EAAE;4BACTuB,SAAQ;4BACR5D,OAAO2E;4BACPb,UAAU,CAACoC,IAAMtB,WAAWsB,EAAEjD,MAAM,CAACjD,KAAK;4BAC1CgE,SAAS;4BACTC,MAAM;4BACNV,IAAI;gCAAEuC,IAAI;4BAAE;;sCAEd,oBAACtG,wBAASA;4BACRqE,SAAS;4BACTF,OAAOtB,EAAE;4BACTuB,SAAQ;4BACR5D,OAAO6E;4BACPf,UAAU,CAACoC,IAAMpB,eAAeoB,EAAEjD,MAAM,CAACjD,KAAK;4BAC9CgE,SAAS;4BACTC,MAAM;4BACNV,IAAI;gCAAEuC,IAAI;4BAAE;;;;8BAIhB,oBAACzB,yBAAUA;oBAACT,SAAQ;oBAAKqC,YAAY;oBAAC1C,IAAI;wBAAEsC,IAAI;oBAAE;8BAC/CxD,EAAE;;8BAEL,oBAACX,iCAAeA;oBAACE,qBAAqB2D;oBAAyB5D,kBAAkB;;8BAEjF,oBAAC0C,yBAAUA;oBAACT,SAAQ;oBAAKqC,YAAY;oBAAC1C,IAAI;wBAAEsC,IAAI;oBAAE;8BAC/CxD,EAAE;;8BAEL,oBAACX,iCAAeA;oBAACE,qBAAqB6D;oBAA6B9D,kBAAkB;;8BAErF,oBAAC2C,sBAAOA;oBAACf,IAAI;wBAAE4C,IAAI;oBAAE;;gBAEnB1B,CAAAA,QAAQE,WAAWE,eAAea,cAAcT,cAAa,mBAC7D,qBAACtF,kBAAGA;;sCACF,oBAACyG;sCAED,oBAAC/B,yBAAUA;4BAACd,IAAI;gCAAC8C,WAAW;4BAAQ;4BAAGzC,SAAQ;4BAAKoC,WAAU;4BAAKC,YAAY;sCAC9E5D,EAAE;;sCAGH,qBAACgC,yBAAUA;4BAACT,SAAQ;4BAAQoC,WAAU;4BAAIM,SAAS;;8CACjD,qBAACC;;wCAAQlE,EAAE;wCAAsB;;;gCAAU;gCAAEoC,QAAQpC,EAAE;;;sCAEzD,qBAACgC,yBAAUA;4BAACT,SAAQ;4BAAQoC,WAAU;4BAAIM,SAAS;;8CACjD,qBAACC;;wCAAQlE,EAAE;wCAAyB;;;gCAAU;gCAAEsC,WAAWtC,EAAE;;;sCAE/D,qBAACgC,yBAAUA;4BAACT,SAAQ;4BAAQoC,WAAU;4BAAIM,SAAS;;8CACjD,qBAACC;;wCAAQlE,EAAE;wCAA6B;;;gCAAU;gCAAEwC,eAAexC,EAAE;;;wBAGtEqD,4BACC,qBAAC/F,kBAAGA;4BAAC4D,IAAI;gCAAEuC,IAAI;4BAAE;;8CACf,oBAACzB,yBAAUA;oCAACT,SAAQ;oCAAYqC,YAAY;8CACzC5D,EAAE;;8CAEL,oBAACkC,oBAAoBA;oCACnBtE,KAAKyF,WAAWzD,KAAK,GAAGyD,WAAWhD,GAAG,GAAG8D;oCACzCC,SAAS,CAACf,WAAWzD,KAAK,GAAGyD,WAAWhD,GAAG,GAAG8D;oCAC9CE,OAAOvB;mCAHkB,eAA8B,OAAfO,WAAWhD,GAAG;;;wBAQ3DuC,gCACC,qBAACtF,kBAAGA;;8CACF,oBAAC0E,yBAAUA;oCAACT,SAAQ;oCAAYqC,YAAY;8CACzC5D,EAAE;;8CAEL,oBAACkC,oBAAoBA;oCACnBtE,KAAKgF,eAAehD,KAAK,GAAGgD,eAAevC,GAAG,GAAG8D;oCACjDC,SAAS,CAACxB,eAAehD,KAAK,GAAGgD,eAAevC,GAAG,GAAG8D;oCACtDE,OAAOvB;mCAHkB,eAAkC,OAAnBF,eAAevC,GAAG;;;;;;;;AAY5E;AAEA,wDAAe8B,cAAcA,EAAC;;;;AC3IsB;AACG;AAE+B;AAIvE,SAASsC;IACpB,MAAMC,aAA0B;QAC5BtC,MAAM;QACNE,SAAS;QACTE,aAAa;QACba,YAAY;YACVhD,KAAK;YACLT,OAAO;QACT;QACA+E,YAAY;YACVtE,KAAK;YACLT,OAAO;QACT;IACF;IACF,MAAMgF,aAAa,IAAIJ,4BAAUA;IACjC,MAAM,EAACxE,CAAC,EAAC,GAAGxC,sBAAcA,CAAC;IAC3B,qBACI,qBAAC+G,wBAAQA;;0BACL,oBAACD,6BAAeA;gBAACO,aAAa;oBAACC,OAAO9E,EAAE;oBAAkB+E,MAAK;oBAAKC,gBAAeJ;gBAAU;;0BAE7F,oBAACzC,iBAAcA;;;AAG3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9B2B;AAG3B,MAAM,aAAa,IAAI,4BAAU,CAAC;AAO3B,MAAM,cAA2B;IACpC;IACA,iBAAgB;IAChB,YAAW,IAAS;YAChB,WAAW,SAAS,YAAY;YAChC,YAAY,kBAAkB;QAClC;IACA,kBAAiB,CAAC;QACd,OAAO,WAAW,YAAY,cAAa,QAAQ;IACvD;AACJ;;;;;;;;ACVY;AAT4B;AACd;AAGnB,SAAS,oBAA0B;UAAT,SAAS,GAAsB,CAAjC;IAC3B,MAAM,SAAS,yBAAS,CAAC;IACzB,OAEI,oCAAC,sCAAe,EAAf;QAAgB,MAAK;QAClB,8CAAC,mBAAM,CAAC,KAAP;YAEG,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,MAAM;gBAAE,SAAS;gBAAG,GAAG;YAAK;YAC5B,YAAY;gBAAE,UAAU;YAAI;YAE3B;QAAA,GANI,OAAO;IAOhB,CACJ;AAER;;;;ACGY;AAxBgB;AACR;AACM;AACK;AAC/B,IAAI,UAAU;AACP,SAAS,eAAmB;UAAR,SAAQ,GAA6B,CAAtC;IACtB,MAAM,KAAK,aAAsB,OAAT,SAAS;IACjC,mBAAS,CAAC;QACN,MAAM,MAAM,SAAS,cAAc,IAAM,CAAE,MAAJ,EAAE;QACzC,MAAM,WAAW,WAAW,CAAC,iBAAiB;YAC1C,IAAG,CAAC,IAAI;QACZ,CAAC;QACD,IAAG,CAAC,IAAI;QACR,IAAI,iBAAiB,SAAQ,CAAC;YAC1B,IAAG,WAAW,CAAC,mBAAmB,EAAE;YACpC,EAAE,gBAAgB;YAClB,EAAE,eAAe;QACrB,CAAC;QACD,OAAO;YACH,SAAS;QACb;IACJ,GAAE,CAAC,CAAC;IACJ,OACI,oCAAC,kBAAG,EAAH;QAAI;QACD,8CAAC,cAAc,EAAd;YACI;QAAA,CACL;IAAA,CACJ;AAER;;;;;;;;;;;;;;;;;;;;;;;;;;ACIyB;AAjCoF;AAG5D;AACnB;AACE;AACT;AACG;AACA;AAEK;AAY/B,SAAS,aAAa,OAAc;IAChC,MAAM,EAAE,UAAU,OAAO,IAAI;IAI7B,MAAM,UAAU,mCAAgB,CAAC;QAC7B,QAAQ,SAAS,OAAO,IAAI;IAChC,CAAC;IAED,OACI,oCAAC,oBAAK,EAAL;QAAM,QAAQ;QAAO,WAAU;QAAO,IAAI,CAAC;QACvC,wCAAY,oCAAC,SAAI;IAAA,CACtB;AAER;AAOO,SAAS,YAAe,EAA6C;QAArD,EAAE,MAAM;IAC3B,OAEI,oBAAC;QAAO,OAAO;QACX,8BAAC;YACG,8BAAC;gBAAW,SAAQ;gBAAK,WAAU;gBAC9B;YAAA,CACL;QAAA,CACJ;IAAA,CACJ;AAER;AAYA,SAAS,UAAU,OAAc;IAC7B,MAAM,EAAE,UAAU,OAAO,IAAI;IAI7B,MAAM,UAAU,mCAAgB,CAAC;QAC7B,QAAQ,SAAS,OAAO,IAAI;QAC5B,mBAAmB;QACnB,WAAW;IACf,CAAC;IAED,MAAM,cAAc,CAAC;QACjB,MAAM,UACD,MAAM,OAA0B,iBAAiB,UACpD,cAAc,qBAAqB;QAErC,IAAI,QAAQ;YACR,OAAO,eAAe;gBAClB,OAAO;YACX,CAAC;QACL;IACJ;IAEA,OACI,oCAAC,mBAAI,EAAJ;QAAK,IAAI;QACN,8CAAC,kBAAG,EAAH;YAAI,WAAQ;YACT,SAAS;YACT,MAAK;YACL,IAAI;gBAAE,UAAU;gBAAS,QAAQ;gBAAI,OAAO;YAAG;YAE9C;QAAA;IACL,CACJ;AAER;AACO,SAAS,gBAAgB,OAA8B;IAC1D,MAAM,EAAE,UAAU,aAAa,WAAW,OAAO,IAAI;IACrD,MAAM,SAAS,yBAAS,CAAC;IACzB,SAAS,aAAY;QAEjB,MAAM,QAAQ,+CAAmB,CAAC,eAAe;QACjD,IAAG,MAAM,iBAAiB;QAC1B,IAAG,YAAY,gBAAe;YAC1B,MAAM,IAAwB;gBAAC,kBAAiB;YAAK;YACrD,YAAY,eAAe,SAAS,QAAO,CAAC;YAC5C,IAAG,EAAE,iBAAiB;QAC1B;QACA,OAAO,KAAK;IAChB;IACA,OACI,oCAAC,SAAS,EAAT;QACD,+CAAC,cAAM,EAAN;YACG;gBAAA,oCAAC,2BAAW,EAAX,EAAY;gBACb,oCAAC,+CAAiB,QAAjB;oBACG,8CAAC,4BAAM,EAAN;wBAAO,OAAM;wBACV,+CAAC,8BAAO,EAAP;4BACG;gCAAA,oCAAC,gCAAiB,EAAjB;oCAAkB,SAAS;gCAAA,CAAY;gCACvC,YAAY;6BAAA;wBAAA,CACjB;oBAAA,CACJ;gBAAA,EACJ;gBACA,oCAAC,8BAAO,EAAP;oBAAQ,IAAG;gBAAA,CAAqB;gBACjC,oCAAC,wBAAS,EAAT;oBAAU,IAAI;wBAAC,SAAQ;wBAAK,WAAU;oBAAM;oBACzC,8CAAC,iCAAkB,EAAlB;wBAAmB;wBAAsB;wBACrC;oBAAA,CACL;gBAAA,CACJ;gBAEA,oCAAC,4CAAc,QAAd;oBACG,8CAAC,kBAAG,EAAH;wBAAI,MAAK;wBAAQ,cAAW;wBACzB,8CAAC,8BAAmB,EAAnB,EAAoB;oBAAA,CACzB;gBAAA,EACJ;aAAA;QAAA,CACJ;IAAA,CACA;AAER","sources":["webpack://_N_E/?38b8","webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.1.4_i18next@24.1.0_typescript@5.8.2__react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../../../src/components/app/AppShell.tsx","webpack://_N_E/../../../../src/components/page/PageContent.tsx","webpack://_N_E/../../../../src/components/page/AndroidPageContent.tsx","webpack://_N_E/../../../src/iframe/IFrameContainer.ts","webpack://_N_E/../../../src/iframe/IFrameReactContainer.tsx","webpack://_N_E/./src/components/page/add-market-by-url/ui/market-input-form/MarketInputForm.tsx","webpack://_N_E/./src/components/page/add-market-by-url/ui/AddMarketByUrl.tsx","webpack://_N_E/./src/pages/add-market-by-url/index.tsx","webpack://_N_E/../../../src/mc/static-model.ts","webpack://_N_E/../../../../src/components/motion/page-transition.tsx","webpack://_N_E/../../../../src/components/app/PageShell.tsx","webpack://_N_E/../../../../src/components/appbar/AppBar.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/add-market-by-url\",\n      function () {\n        return require(\"private-next-pages/add-market-by-url/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/add-market-by-url\"])\n      });\n    }\n  ","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.1.4_i18next@24.1.0_typescript@5.8.2__react-dom@19.0.0_react@19.0.0__react@19.0.0\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","'use client'\r\nimport { i18n, i18nInit, IPageScrollPosition, StorePageContext, StorePageDynamicContext, toProxy, watchUpdates, storeUtils } from \"@fanfanlo\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PropsWithChildren, useEffect } from \"react\";\r\nimport { I18nextProvider } from \"react-i18next\";\r\n\r\n\r\ni18nInit()\r\nexport function AppShell({ children }: PropsWithChildren) {\r\n  const router = useRouter();\r\n  const scrollKey = 'scrollPositionInfo'\r\n  const href = window.location.href.split(\"#\")[0]\r\n  const dynamicKey = `dynamic-${href}`\r\n  const s = storeUtils.namespace(dynamicKey);\r\n  let o: Record<string, unknown>|undefined = s.read(dynamicKey)\r\n  if (!o) {\r\n    o = {}\r\n    s.write(dynamicKey, o)\r\n  }\r\n  o = toProxy(o)\r\n  useEffect(() => {\r\n\r\n    router.beforePopState((state) => {\r\n      s.clearAll()\r\n      return true\r\n    })\r\n  })\r\n  useEffect(() => {\r\n    s.write(dynamicKey, o)\r\n    return watchUpdates(o, () => {\r\n      s.write(dynamicKey, o)\r\n    })\r\n  }, [])\r\n  useEffect(() => {\r\n    const info = (s.read(scrollKey) || { x: 0, y: 0 }) as IPageScrollPosition\r\n    // console.log('app shell scroll info info = ', info)\r\n    if (info.x == 0 && info.y == 0) {\r\n      listenScroll()\r\n    } else {\r\n      window.requestAnimationFrame(() => {\r\n        window.scrollTo(info.x, info.y)\r\n        listenScroll()\r\n      })\r\n    }\r\n    function onScroll(e: Event) {\r\n      // console.log('app shell on scroll', { x: window.scrollX, y: window.scrollY })\r\n      s.write(scrollKey, { x: window.scrollX, y: window.scrollY })\r\n    }\r\n    function listenScroll() {\r\n      window.addEventListener('scroll', onScroll)\r\n    }\r\n\r\n    function unsub() {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n    return unsub\r\n  });\r\n  return (\r\n    <StorePageContext value={s}>\r\n      <StorePageDynamicContext value={o}>\r\n\r\n        <I18nextProvider i18n={i18n}>\r\n          {children}\r\n        </I18nextProvider>\r\n      </StorePageDynamicContext>\r\n    </StorePageContext>\r\n  )\r\n}","import { Box, Button, Container } from '@mui/material';\r\nimport { createContext, PropsWithChildren, useContext, useEffect } from 'react';\r\nimport { ITitleI18nConf, ITitleI18nNsConf, ITitleI18nTitleConf } from '.';\r\nimport { isBuild, isDev, isServer, loadI18nValue, publicRuntimeConfig } from '@fanfanlo';\r\nimport { read } from 'fs';\r\n\r\n\r\nfunction Reload(){\r\n  if(!isDev)return <>  </>\r\n  return(\r\n    <Box>\r\n      <Button onClick={() => {window.location.reload()}}>重新加载全部功能</Button>\r\n      {new Date().toLocaleString()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst ScrollP = createContext({ x: 0, y: 0 });\r\nlet index = 0;\r\nexport default function PageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren) {\r\n  index++;\r\n  const scroll = useContext(ScrollP);\r\n  const clazz = `${Date.now() + Math.random() * Date.now()}`;\r\n  useEffect(()=>{\r\n    async function loadTitle(){\r\n      if(!titleConf)return\r\n      let title = titleConf.title\r\n      if(titleConf.ns){\r\n        title = await loadI18nValue(titleConf.ns, titleConf.key || \"content.title\")\r\n      }\r\n      if(!title)return\r\n      document.title = title\r\n    }\r\n    loadTitle()\r\n  }, [])\r\n  useEffect(() => {\r\n    const container = document.getElementsByClassName(clazz)[0];\r\n    if (!container) return;\r\n    container.scrollTop = scroll.y;\r\n    const onScroll = () => {\r\n      var scrollTop = container.scrollTop;\r\n      scroll.y = scrollTop;\r\n    };\r\n    container.removeEventListener('scroll', onScroll);\r\n    container.addEventListener('scroll', onScroll, { passive: true });\r\n    return () => container.removeEventListener('scroll', onScroll);\r\n  }, [clazz, scroll]);\r\n  return (\r\n\r\n    <Container className={clazz} sx={{ flexGrow: 1, overflow: 'auto', padding: \"0px\" }}>\r\n      <Box>\r\n        {(reload || (reload == undefined)) && <Reload />}\r\n        {children}\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { PropsWithChildren } from \"react\";\r\nimport PageContent from \"./PageContent\";\r\nimport { ITitleI18nConf } from \".\";\r\nexport default function AndroidPageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren)  {\r\n    return (\r\n        <PageContent titleConf={titleConf} reload={reload}>\r\n            {children}\r\n        </PageContent>\r\n    )\r\n}\r\n","\"use client\";\r\n\r\nimport axios from \"axios\";\r\n\r\n// import iFrameResize from 'iframe-resizer'\r\nexport class IFrameContainer {\r\n    private container: HTMLDivElement;\r\n    private iframe: HTMLIFrameElement;\r\n    private readonly iframeId: string;\r\n    private minWidth: number | null = null;\r\n    private minHeight: number | null = null;\r\n    private maxWidth: number | null = null;\r\n    private maxHeight: number | null = null;\r\n    private currentLoadCallback: (() => void) | null = null;\r\n    private currentErrorCallback: ((error: Error) => void) | null = null;\r\n\r\n    constructor() {\r\n        this.iframeId = 'iframe_' + Math.random().toString(36).substr(2, 9);\r\n        \r\n        // 创建容器和iframe\r\n        this.container = document.createElement('div');\r\n        this.iframe = document.createElement('iframe');\r\n        \r\n        // 设置容器样式\r\n        this.container.style.width = '100%';\r\n        this.container.style.height = '100%';\r\n        this.container.style.overflow = 'hidden';\r\n        this.container.style.position = 'relative';\r\n        this.container.style.maxWidth = '100%';\r\n        this.container.style.margin = '0 auto';\r\n        \r\n        // 设置iframe样式\r\n        this.iframe.style.width = '100%';\r\n        this.iframe.style.height = '100%';\r\n        this.iframe.style.border = 'none';\r\n        this.iframe.style.overflow = 'hidden';\r\n        this.iframe.setAttribute('scrolling', 'no');\r\n        this.iframe.setAttribute('seamless', 'seamless');\r\n\r\n        // --- Add Load and Error Handlers ---\r\n        this.iframe.onload = () => {\r\n            if (this.currentLoadCallback) {\r\n                this.currentLoadCallback();\r\n                // Optionally clear callback after use if needed\r\n                // this.currentLoadCallback = null; \r\n            }\r\n            if(typeof window !== 'undefined' ) {\r\n                const iFrameResize = (window as any).iframeResize;\r\n                // console.log('iframeResize_fn', iFrameResize)\r\n                iFrameResize({\r\n                    onReady:(iframe:any)=>{\r\n                        // console.log('onReady_fn', iframe)\r\n                    },\r\n                    license: 'GPLv3',\r\n                    waitForLoad:true,\r\n                    log: false, // 可选：是否输出日志\r\n                    checkOrigin: false, // 可选：如果 iframe 是跨域的必须设为 false\r\n                  }, `#${this.iframeId}`);\r\n    // `#${this.iframeId}`\r\n            }\r\n        };\r\n\r\n        this.iframe.onerror = (event: Event | string, source?: string, lineno?: number, colno?: number, error?: Error) => {\r\n            console.error('%cIFrameContainer: iframe \"error\" event triggered.', 'color: red; font-weight: bold;', event);\r\n            const err = error || new Error(typeof event === 'string' ? event : 'Failed to load iframe content');\r\n            if (this.currentErrorCallback) {\r\n                this.currentErrorCallback(err);\r\n                // Optionally clear callback after use if needed\r\n                // this.currentErrorCallback = null;\r\n            }\r\n        };\r\n        // --- End Handlers ---\r\n\r\n        // 将iframe添加到容器中\r\n        this.container.appendChild(this.iframe);\r\n        \r\n        // 设置iframe的ID\r\n        this.iframe.id = this.iframeId;\r\n        \r\n        // 添加message事件监听\r\n        window.addEventListener('message', this.handleIframeMessage.bind(this));\r\n    }\r\n\r\n    public loadContent(content: string): void {\r\n        this.currentLoadCallback = null;\r\n        this.currentErrorCallback = null;\r\n        const resizeScript = `\r\n            <script>\r\n                const IFRAME_ID = '${this.iframeId}';\r\n                function notifyResize() {\r\n                    const body = document.body;\r\n                    const html = document.documentElement;\r\n                    \r\n                    // 获取实际内容高度（取最大值）\r\n                    const height = Math.max(\r\n                        body.scrollHeight,\r\n                        body.offsetHeight,\r\n                        html.clientHeight,\r\n                        html.scrollHeight,\r\n                        html.offsetHeight\r\n                    );\r\n                    \r\n                    // 获取实际内容宽度（取最大值）\r\n                    const width = Math.max(\r\n                        body.scrollWidth,\r\n                        body.offsetWidth,\r\n                        html.clientWidth,\r\n                        html.scrollWidth,\r\n                        html.offsetWidth\r\n                    );\r\n                    \r\n                    window.parent.postMessage({ \r\n                        type: 'resize', \r\n                        height, \r\n                        width,\r\n                        iframeId: IFRAME_ID \r\n                    }, '*');\r\n                }\r\n                \r\n                // 监听DOM变化\r\n                const observer = new MutationObserver(() => {\r\n                    requestAnimationFrame(notifyResize);\r\n                });\r\n                \r\n                observer.observe(document.body, { \r\n                    childList: true, \r\n                    subtree: true, \r\n                    attributes: true \r\n                });\r\n                \r\n                // 监听图片加载完成\r\n                document.addEventListener('load', function(e) {\r\n                    if (e.target.tagName === 'IMG') {\r\n                        notifyResize();\r\n                    }\r\n                }, true);\r\n                \r\n                // 监听窗口大小变化\r\n                window.addEventListener('resize', notifyResize);\r\n                \r\n                // 初始化时多次检查大小\r\n                window.addEventListener('load', () => {\r\n                    notifyResize();\r\n                    // 延迟再次检查，处理动态内容\r\n                    setTimeout(notifyResize, 100);\r\n                    setTimeout(notifyResize, 500);\r\n                });\r\n                \r\n                // 立即执行一次\r\n                notifyResize();\r\n            </script>\r\n        `;\r\n\r\n        // 将内容和脚本组合\r\n        const fullContent = content.includes('</body>') \r\n            ? content.replace('</body>', `${resizeScript}</body>`)\r\n            : `${content}${resizeScript}`;\r\n\r\n        this.iframe.srcdoc = fullContent;\r\n    }\r\n\r\n    /**\r\n     * 设置最小宽度和高度\r\n     * @param minWidth 最小宽度（像素）\r\n     * @param minHeight 最小高度（像素）\r\n     */\r\n    public setMinSize(minWidth: number | null, minHeight: number | null): void {\r\n        this.minWidth = minWidth;\r\n        this.minHeight = minHeight;\r\n    }\r\n\r\n    /**\r\n     * 设置最大宽度和高度\r\n     * @param maxWidth 最大宽度（像素）\r\n     * @param maxHeight 最大高度（像素）\r\n     */\r\n    public setMaxSize(maxWidth: number | null, maxHeight: number | null): void {\r\n        this.maxWidth = maxWidth;\r\n        this.maxHeight = maxHeight;\r\n    }\r\n\r\n    private handleIframeMessage(event: MessageEvent): void {\r\n        if (event.data.type === 'resize' && event.data.iframeId === this.iframeId) {\r\n            let { height, width } = event.data;\r\n            const windowMaxWidth = window.innerWidth;\r\n            \r\n            // 应用最小尺寸限制\r\n            if (this.minWidth !== null) {\r\n                width = Math.max(width, this.minWidth);\r\n            }\r\n            if (this.minHeight !== null) {\r\n                height = Math.max(height, this.minHeight);\r\n            }\r\n            \r\n            // 应用最大尺寸限制\r\n            if (this.maxWidth !== null) {\r\n                width = Math.min(width, this.maxWidth);\r\n            } else {\r\n                // 如果没有设置最大宽度，则使用窗口宽度作为限制\r\n                width = Math.min(width, windowMaxWidth);\r\n            }\r\n            \r\n            if (this.maxHeight !== null) {\r\n                height = Math.min(height, this.maxHeight);\r\n            }\r\n            \r\n            // 设置容器尺寸\r\n            this.container.style.height = `${height}px`;\r\n            this.container.style.width = `${width}px`;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 通过URL加载iframe\r\n     * @param url 要加载的URL\r\n     * @param onLoad 加载成功回调函数\r\n     * @param onError 加载失败回调函数\r\n     */\r\n    public async loadUrl(url: string, onLoad?: () => void, onError?: (error: Error) => void) {\r\n        this.currentLoadCallback = onLoad || null;\r\n        this.currentErrorCallback = onError || null;\r\n        if (this.iframe) {\r\n            // await this.testUrl(url)\r\n            this.iframe.src = url;\r\n        } else {\r\n            console.error('IFrameContainer: iframe element is null in loadUrl!');\r\n        }\r\n    }\r\n\r\n    async testUrl(url:string){\r\n        try{\r\n            const res = await axios.get(url)\r\n            console.log('res=', res)\r\n        }catch(e){\r\n            console.error('test load url error', e)\r\n        }\r\n    }\r\n    // 移除 createLoadingElement, showLoading, removeLoading 方法\r\n\r\n    /**\r\n     * 从URL加载内容并作为字符串显示\r\n     * @param url 要加载的资源URL\r\n     * @returns Promise<void>\r\n     */\r\n    public async loadUrlAsContent(url: string): Promise<void> {\r\n        console.log('laodUrlAsContent_fn', url)\r\n        try {\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            const content = await response.text();\r\n            this.loadContent(content);\r\n        } catch (error) {\r\n            console.error('Failed to load URL content:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取容器元素\r\n     * @returns HTMLDivElement 容器元素\r\n     */\r\n    public getContainer(): HTMLDivElement {\r\n        return this.container;\r\n    }\r\n\r\n    /**\r\n     * 设置容器大小\r\n     * @param width 宽度\r\n     * @param height 高度\r\n     */\r\n    public setSize(width: string, height: string): void {\r\n        this.container.style.width = width;\r\n        this.container.style.height = height;\r\n    }\r\n}","import React, { useEffect, useRef, useState } from 'react';\r\nimport { IFrameContainer } from './IFrameContainer';\r\n// --- Add MUI Imports ---\r\nimport Box from '@mui/material/Box';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Typography from '@mui/material/Typography';\r\nimport Alert from '@mui/material/Alert';\r\n// --- End MUI Imports ---\r\n\r\ninterface IFrameReactContainerProps {\r\n    /** 容器样式 */\r\n    style?: React.CSSProperties;\r\n    /** 容器类名 */\r\n    className?: string;\r\n    /** 要加载的URL */\r\n    url?: string;\r\n    /** 要加载的HTML内容 */\r\n    content?: string;\r\n    /** 最小宽度（像素） */\r\n    minWidth?: number;\r\n    /** 最小高度（像素） */\r\n    minHeight?: number;\r\n    /** 最大宽度（像素） */\r\n    maxWidth?: number;\r\n    /** 最大高度（像素） */\r\n    maxHeight?: number;\r\n    /** 加载失败的回调 */\r\n    onError?: (error: Error) => void;\r\n    /** 加载完成的回调 */\r\n    onLoad?: () => void;\r\n}\r\n\r\nexport const IFrameReactContainer: React.FC<IFrameReactContainerProps> = ({\r\n    style,\r\n    className,\r\n    url,\r\n    content,\r\n    minWidth,\r\n    minHeight,\r\n    maxWidth,\r\n    maxHeight,\r\n    onError,\r\n    onLoad,\r\n}) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const iframeContainerRef = useRef<IFrameContainer | null>(null);\r\n    // Internal loading state for the iframe itself\r\n    const [iframeLoading, setIframeLoading] = useState<boolean>(false); \r\n    // Internal error state for the iframe itself\r\n    const [iframeError, setIframeError] = useState<Error | null>(null); \r\n \r\n    useEffect(() => {\r\n        // 创建 IFrameContainer 实例\r\n        if (!iframeContainerRef.current && containerRef.current) {\r\n            iframeContainerRef.current = new IFrameContainer();\r\n            const container = iframeContainerRef.current;\r\n            container.setMinSize(minWidth ?? null, minHeight ?? null);\r\n            container.setMaxSize(maxWidth ?? null, maxHeight ?? null);\r\n            containerRef.current.appendChild(container.getContainer());\r\n        }\r\n\r\n        return () => {\r\n            // 清理事件监听\r\n            if (containerRef.current && iframeContainerRef.current) {\r\n                containerRef.current.removeChild(iframeContainerRef.current.getContainer());\r\n                iframeContainerRef.current = null;\r\n            }\r\n        };\r\n    }, [minWidth, minHeight, maxWidth, maxHeight]);\r\n\r\n    useEffect(() => {\r\n        const iframeContainer = iframeContainerRef.current;\r\n        if (!iframeContainer) return;\r\n\r\n        const loadContentOrUrl = async () => {\r\n            // Reset internal state before loading\r\n            setIframeLoading(true); \r\n            setIframeError(null);\r\n            \r\n            try {\r\n                if (content) { // Check for content first\r\n                    iframeContainer.loadContent(content);\r\n                    // For srcdoc, loading might be considered finished immediately\r\n                    // or rely on resizer events. Let's tentatively set loading false.\r\n                    setIframeLoading(false); \r\n                    onLoad?.(); // Call parent onLoad immediately for content\r\n                } else if (url) { // Then check for URL\r\n                    // Pass wrapped callbacks to the actual loadUrl\r\n                    const handleLoad = () => {\r\n                        setIframeLoading(false);\r\n                        setIframeError(null);\r\n                        onLoad?.(); // Call the parent's onLoad\r\n                    };\r\n\r\n                    const handleError = (error: Error) => {\r\n                        console.error('%cIFrameReactContainer: handleError (callback from IFrameContainer) triggered.', 'color: red;', error);\r\n                        setIframeLoading(false);\r\n                        setIframeError(error);\r\n                        onError?.(error); // Call the parent's onError\r\n                    };\r\n\r\n                    iframeContainer.loadUrl(url, handleLoad, handleError);\r\n                    // Note: setIframeLoading(false) is now handled inside the callbacks\r\n                } else {\r\n                    setIframeLoading(false); // No URL or content, stop loading\r\n                }\r\n            } catch (error) { // Catch synchronous errors during setup if any\r\n                console.error('>>> Sync Error during loadContentOrUrl setup:', error);\r\n                if (error instanceof Error) {\r\n                    setIframeLoading(false);\r\n                    setIframeError(error);\r\n                    onError?.(error);\r\n                } else {\r\n                    const unknownError = new Error('An unknown error occurred during setup');\r\n                    setIframeLoading(false);\r\n                    setIframeError(unknownError);\r\n                    onError?.(unknownError);\r\n                }\r\n            }\r\n        };\r\n\r\n        loadContentOrUrl();\r\n    }, [url, content, onError, onLoad, iframeContainerRef.current]); \r\n  \r\n    return (\r\n        <div ref={containerRef} style={style} className={className}>\r\n            {/* Display internal loading/error state */}\r\n            {iframeLoading && (\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', padding: 2 }}>\r\n                    <CircularProgress size={24} />\r\n                    <Typography variant=\"body2\" sx={{ ml: 1 }}>Loading preview...</Typography>\r\n                </Box>\r\n            )}\r\n            {iframeError && !iframeLoading && (\r\n                <Alert severity=\"error\" sx={{ m: 1 }}>Preview Error: {iframeError.message}</Alert>\r\n            )}\r\n            {/* The actual iframe container (managed by IFrameContainer class) is appended here */}\r\n        </div>\r\n    );\r\n};","import React, { useState, useCallback } from 'react';\nimport TextField from '@mui/material/TextField';\nimport Checkbox from '@mui/material/Checkbox';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Box from '@mui/material/Box';\nimport { useDebounceFn } from 'ahooks';\nimport { useTranslation } from '@fanfanlo';\nimport axios from 'axios';\n\ninterface MarketInputFormProps {\n  // Callback to notify parent when valid input is ready\n  onMarketConfigReady: (config: { str: string; isUrl: boolean }) => void;\n  // Initial values if needed\n  initialValue?: string;\n  initialIsUrl?: boolean;\n  isFullMarketPage:boolean;\n}\n\nasync function loadHtmlFromUrl(value: string): Promise<string> {\n  const url = `https://autumn-mouse-8da2.mailregios.workers.dev/?url=${encodeURIComponent(value)}`\n  const res = await axios.get(url);\n  if(!res.data || !res.data.html){\n    throw new Error('Failed to fetch HTML content.')\n  }\n  // 这个html就是html的内容。\n    // 获取url的origin\n  const { origin } = new URL(value);\n  // 替换所有script和link标签的src/href为绝对路径\n  let html = res.data.html;\n  // 拼接时去除重复斜杠，保证只有一个/\n  function joinOriginPath(origin: string, path: string) {\n    let url: string;\n    if (origin.endsWith('/') && path.startsWith('/')) {\n      url = origin + path.slice(1);\n    } else if (!origin.endsWith('/') && !path.startsWith('/')) {\n      url = origin + '/' + path;\n    } else {\n      url = origin + path;\n    }\n    // 追加__time__参数\n    const timeParam = `__time__=${Date.now()}`;\n    if (url.includes('?')) {\n      // 已有参数，判断是否已带__time__，避免重复\n      if (/([&?])__time__=/.test(url)) return url;\n      return url + (url.endsWith('?') || url.endsWith('&') ? '' : '&') + timeParam;\n    } else {\n      return url + '?' + timeParam;\n    }\n  }\n  // 替换<script src=\"...\">\n  html = html.replace(/(<script[^>]*src=[\"'])(?!https?:|\\/\\/)([^\"'>]+)/gi, (match:any, p1:any, p2:any) => `${p1}${joinOriginPath(origin, p2)}`);\n  // 替换<link href=\"...\">，常用于css\n  html = html.replace(/(<link[^>]*href=[\"'])(?!https?:|\\/\\/)([^\"'>]+)/gi, (match:any, p1:any, p2:any) => `${p1}${joinOriginPath(origin, p2)}`);\n  // 替换<style>@import '...'</style> 里的路径（简单处理）\n  html = html.replace(/(@import\\s+[\"'])(?!https?:|\\/\\/)([^\"']+)/gi, (match:any, p1:any, p2:any) => `${p1}${joinOriginPath(origin, p2)}`);\n  console.log('parsed html=', html)\n  return html;\n}\n\nconst MarketInputForm: React.FC<MarketInputFormProps> = ({ \n  isFullMarketPage,\n  onMarketConfigReady,\n  initialValue = '',\n  initialIsUrl = true, // Default to URL input\n}) => {\n  const [inputValue, setInputValue] = useState<string>(initialValue);\n  const [isUrl, setIsUrl] = useState<boolean>(initialIsUrl);\n  const [error, setError] = useState<string>('');\n  const {t} = useTranslation(\"homepage/components/page/add-market-by-url/ui/market-input-form/content\");\n  // Basic URL validation (can be improved)\n  const isValidUrl = (url: string): boolean => {\n    try {\n      new URL(url);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  };\n\n  // The core logic for processing input\n  const processInput = useCallback(async (value: string, isUrlChecked: boolean) => {\n    console.log('Processing input:', value, 'Is URL:', isUrlChecked);\n    if(!value){\n      setError('')\n      onMarketConfigReady({ str: '', isUrl });\n      console.log('cleared')\n      return;\n    }\n    if (isUrlChecked) {\n      if (value && isValidUrl(value)) {\n        const html = await loadHtmlFromUrl(value)\n        if(html){\n          setError('');\n          onMarketConfigReady({ str: html, isUrl: false });\n        }else{\n          setError('Failed to fetch HTML content.');\n        }\n      } else if (value) {\n        setError('Please enter a valid URL.');\n      } else {\n        setError(''); // Clear error if input is empty\n      }\n    } else {\n      // For HTML content, maybe trigger on button click or explicit action?\n      // For now, let's assume direct content is always 'ready'\n      setError(''); \n      onMarketConfigReady({ str: value, isUrl: false });\n    }\n  }, [onMarketConfigReady]);\n\n  // Create the debounced version of the processing function\n  const { run: debouncedProcessInput } = useDebounceFn(\n    processInput,\n    {\n      wait: 500, // Debounce wait time in milliseconds (e.g., 500ms)\n    },\n  );\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = event.target.value;\n    setInputValue(newValue);\n    // Call the debounced function when typing\n    debouncedProcessInput(newValue, isUrl);\n  };\n\n  const handleCheckboxChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newIsUrl = event.target.checked;\n    setIsUrl(newIsUrl);\n    // Call the original function immediately when checkbox changes\n    processInput(inputValue, newIsUrl); \n  };\n  let isUrlLabel = \"\";\n  if(isUrl){\n    isUrlLabel = isFullMarketPage ? t('content.full.url') : t('content.item.url');\n  }else{\n    isUrlLabel = isFullMarketPage ? t('content.full.html') : t('content.item.html');\n  }\n  let placeholder = \"\"\n  if(!isUrl){\n    placeholder = isFullMarketPage ? `<html><body><div>script list<div></body></html>` :`<html><body><div>${t('content.item.come')}<a href=\"https://github.com/your-name/your-repo/docs/index.html\">${t('content.item.myMarketName')}</a>${t('content.item.stroll')}</div></body></html>`\n  }else{\n    placeholder = isFullMarketPage ? `https://github.com/your-name/your-repo/docs/market.html` : `https://github.com/your-name/your-repo/docs/summary.html`\n  }\n  return (\n    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n      <TextField\n        label={isUrlLabel}\n        variant=\"outlined\"\n        fullWidth\n        value={inputValue}\n        onChange={handleInputChange}\n        error={!!error}\n        helperText={error}\n        placeholder={placeholder}\n        multiline={!isUrl} // Allow multiline for HTML\n        rows={isUrl ? 1 : 4} // Adjust rows based on type\n      />\n      <FormControlLabel\n        control={\n          <Checkbox \n            checked={isUrl} \n            onChange={handleCheckboxChange} \n          />\n        }\n        label={t(\"content.isUrl\")}\n      />\n    </Box>\n  );\n};\n\nexport default MarketInputForm;\n","import React, { useState, useCallback } from 'react';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Divider from '@mui/material/Divider';\nimport TextField from '@mui/material/TextField';\nimport { IFrameReactContainer, useTranslation } from '@fanfanlo';\nimport { IMarketConf, IUrlOrHtmlStringConf } from './add-market-by-url.intf';\nimport MarketInputForm from './market-input-form/MarketInputForm';\n\nconst AddMarketByUrl: React.FC = () => {\n  const [name, setName] = useState<string>('');\n  const [summary, setSummary] = useState<string>('');\n  const [description, setDescription] = useState<string>('');\n  const [urlOrHtmlConf, setUrlOrHtmlConf] = useState<IUrlOrHtmlStringConf | null>(null);\n  const [fullMarketConf, setFullMarketConf] = useState<IUrlOrHtmlStringConf | null>(null);\n\n  const {t} = useTranslation(\"homepage/components/page/add-market-by-url/ui/content\");\n  const iframeStyle: React.CSSProperties = {\n    minWidth: '300px',\n    minHeight: '200px',\n    border: '1px solid #ccc',\n    display: 'block',\n  };\n\n  const handleMarketConfigReady = useCallback((config: IUrlOrHtmlStringConf) => {\n    setUrlOrHtmlConf(config);\n  }, []);\n\n  const handleFullMarketConfigReady = useCallback((config: IUrlOrHtmlStringConf) => {\n    setFullMarketConf(config);\n  }, []);\n\n  const itemMarket = urlOrHtmlConf;\n\n  return (\n    <Card sx={{ maxWidth: 800, margin: 'auto', mt: 2 }}>\n      <CardContent>\n        <Box sx={{ mb: 2, color: 'error.main' }}>\n          {t(\"content.warning\")}\n        </Box>\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom>\n          {t(\"content.setNewMarket\")}\n        </Typography>\n\n        <Box sx={{ mb: 2 }}>\n          <TextField\n            fullWidth\n            label={t(\"content.marketName\")}\n            variant=\"outlined\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            sx={{ mb: 1 }}\n          />\n          <TextField\n            fullWidth\n            label={t(\"content.marketSummary\")}\n            variant=\"outlined\"\n            value={summary}\n            onChange={(e) => setSummary(e.target.value)}\n            multiline\n            rows={2}\n            sx={{ mb: 1 }}\n          />\n          <TextField\n            fullWidth\n            label={t(\"content.marketDescription\")}\n            variant=\"outlined\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            multiline\n            rows={4}\n            sx={{ mb: 2 }}\n          />\n        </Box>\n\n        <Typography variant=\"h6\" gutterBottom sx={{ mt: 2 }}>\n          {t(\"content.itemMarket\")}\n        </Typography>\n        <MarketInputForm onMarketConfigReady={handleMarketConfigReady} isFullMarketPage={false} />\n\n        <Typography variant=\"h6\" gutterBottom sx={{ mt: 2 }}>\n          {t(\"content.fullMarket\")}\n        </Typography>\n        <MarketInputForm onMarketConfigReady={handleFullMarketConfigReady} isFullMarketPage={true} />\n\n        <Divider sx={{ my: 2 }} />\n\n        {(name || summary || description || itemMarket || fullMarketConf) && (\n          <Box>\n            <hr />\n            \n            <Typography sx={{textAlign: 'center'}} variant=\"h6\" component=\"h3\" gutterBottom>\n            {t(\"content.settingPreview\")}\n              \n            </Typography>\n            <Typography variant=\"body1\" component=\"p\" paragraph>\n              <strong>{t(\"content.marketName\")}:</strong> {name || t(\"content.isNotSet\")}\n            </Typography>\n            <Typography variant=\"body1\" component=\"p\" paragraph>\n              <strong>{t(\"content.marketSummary\")}:</strong> {summary || t(\"content.isNotSet\")}\n            </Typography>\n            <Typography variant=\"body1\" component=\"p\" paragraph>\n              <strong>{t(\"content.marketDescription\")}:</strong> {description || t(\"content.isNotSet\")}\n            </Typography>\n\n            {itemMarket && (\n              <Box sx={{ mb: 2 }}>\n                <Typography variant=\"subtitle1\" gutterBottom>\n                  {t(\"content.marketCardPreview\")}\n                </Typography>\n                <IFrameReactContainer key={`item-market-${itemMarket.str}`}\n                  url={itemMarket.isUrl ? itemMarket.str : undefined}\n                  content={!itemMarket.isUrl ? itemMarket.str : undefined}\n                  style={iframeStyle}\n                />\n              </Box>\n            )}\n\n            {fullMarketConf && (\n              <Box>\n                <Typography variant=\"subtitle1\" gutterBottom>\n                  {t(\"content.marketFullPreview\")}  \n                </Typography>\n                <IFrameReactContainer key={`full-market-${fullMarketConf.str}`}\n                  url={fullMarketConf.isUrl ? fullMarketConf.str : undefined}\n                  content={!fullMarketConf.isUrl ? fullMarketConf.str : undefined}\n                  style={iframeStyle}\n                />\n              </Box>\n            )}\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default AddMarketByUrl;\n","import { AppbarContainer, AppShell } from \"@app/ui\";\r\nimport { Dispatcher, useTranslation } from \"@fanfanlo\";\r\nimport { IMarketConf } from \"@src/components/page/add-market-by-url/ui/add-market-by-url.intf\";\r\nimport AddMarketByUrl from \"@src/components/page/add-market-by-url/ui/AddMarketByUrl\";\r\n\r\n\r\n\r\nexport default function AddMarketByUrlPage(){\r\n    const marketConf: IMarketConf = {\r\n        name: 'Test Market URL',\r\n        summary: 'Test Summary',\r\n        description: 'Test Description',\r\n        itemMarket: {\r\n          str: '',\r\n          isUrl: true,\r\n        },\r\n        fullMarket: {\r\n          str: '',\r\n          isUrl: true,\r\n        },\r\n      };\r\n    const dispatcher = new Dispatcher()\r\n    const {t} = useTranslation('homepage/pages/add-market-by-url/content')\r\n    return (\r\n        <AppShell>\r\n            <AppbarContainer appbarProps={{title: t(\"content.title\"), back:true,backDispatcher:dispatcher}} />\r\n            {/* <AddMarketByUrlContent /> */}\r\n            <AddMarketByUrl />\r\n        </AppShell>\r\n    )\r\n}","import { Dispatcher } from \"@fanfanlo\"\r\nimport { DispatcherUnsubscribe } from \"@fanfanlo\"\r\n\r\nconst dipsatcher = new Dispatcher()\r\ninterface IStaticModel{\r\n    dipsatcher:Dispatcher\r\n    screenLockCount:number\r\n    switchPage:()=>void\r\n    listenSwitchPage:(callback:()=>void)=>DispatcherUnsubscribe \r\n}\r\nexport const staticModel:IStaticModel = {\r\n    dipsatcher,\r\n    screenLockCount:0,\r\n    switchPage:async()=>{\r\n        dipsatcher.dispatch(\"switchPage\")\r\n        staticModel.screenLockCount = 0\r\n    },\r\n    listenSwitchPage:(callback:()=>void)=>{\r\n        return dipsatcher.addListener(\"switchPage\",callback)\r\n    }\r\n}   \r\n","import { PropsWithChildren } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/router\";\r\n\r\n\r\nexport function PageTransition({ children }: PropsWithChildren) {\r\n    const router = useRouter()\r\n    return (\r\n\r\n        <AnimatePresence mode=\"sync\">\r\n            <motion.div\r\n                key={router.route}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -110 }}\r\n                transition={{ duration: 0.3 }}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    )\r\n}","import { staticModel } from \"@app/static\";\r\nimport { Box } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { PageTransition } from \"../motion\";\r\nlet idCount = 0\r\nexport function PageShell({children}:{children:React.ReactNode}){\r\n    const id = `app-shell-${idCount++}`\r\n    useEffect(()=>{\r\n        const box = document.querySelector(`#${id}`)\r\n        const unlisten = staticModel.listenSwitchPage(()=>{\r\n            if(!box)return\r\n        })\r\n        if(!box)return\r\n        box.addEventListener(\"click\",(e)=>{\r\n            if(staticModel.screenLockCount == 0)return\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n        })\r\n        return ()=>{\r\n            unlisten()\r\n        }\r\n    },[])\r\n    return (\r\n        <Box id={id}>\r\n            <PageTransition>\r\n                {children}  \r\n            </PageTransition>\r\n        </Box>\r\n    )\r\n}\r\n","import { AppBar, Box, Container, CssBaseline, Fab, Fade, Slide, Toolbar, Typography, useScrollTrigger } from \"@mui/material\";\r\nimport { PropsWithChildren, ReactNode } from \"react\";\r\n// import {AndroidPageContent} from \"../../\";\r\nimport { browserHistoryUtils, IDispatcher } from \"@fanfanlo\";\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PageShell } from \"../app/PageShell\";\r\nimport shadows from \"@mui/material/styles/shadows\";\r\nimport AndroidPageContent from \"../page/AndroidPageContent\";\r\nimport { IAppBarBackAskEvent } from \"@app/static\";\r\nimport { ITitleI18nConf } from \"../page\";\r\ninterface Props {\r\n    /**\r\n     * Injected by the documentation to work in an iframe.\r\n     * You won't need it on your project.\r\n     */\r\n    window?: () => Window;\r\n    children?: React.ReactElement<unknown>;\r\n}\r\n\r\nfunction HideOnScroll(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n    });\r\n\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children ?? <div />}\r\n        </Slide>\r\n    );\r\n}\r\nexport interface IAppbarProps extends PropsWithChildren {\r\n    title: ReactNode\r\n    back: boolean\r\n    backHandler?: () => boolean\r\n    backDispatcher?:IDispatcher\r\n}\r\nexport function Appbar({ title }: { title: ReactNode } & PropsWithChildren) {\r\n    return (\r\n\r\n        <AppBar color={\"inherit\"}>\r\n            <Toolbar>\r\n                <Typography variant=\"h6\" component=\"div\">\r\n                    {title}\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\ninterface IAppbarContainerProps extends PropsWithChildren {\r\n    appbarProps: IAppbarProps\r\n    titleConf?:ITitleI18nConf\r\n    reload?: boolean\r\n}\r\n\r\n// export interface IAppBarBackAskEvent{\r\n//     defaultPrevented:boolean\r\n// }\r\n\r\nfunction ScrollTop(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n        disableHysteresis: true,\r\n        threshold: 100,\r\n    });\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n        const anchor = (\r\n            (event.target as HTMLDivElement).ownerDocument || document\r\n        ).querySelector('#back-to-top-anchor');\r\n\r\n        if (anchor) {\r\n            anchor.scrollIntoView({\r\n                block: 'center',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fade in={trigger}>\r\n            <Box data-id=\"content-scroll-top-button\"\r\n                onClick={handleClick}\r\n                role=\"presentation\"\r\n                sx={{ position: 'fixed', bottom: 16, right: 16 }}\r\n            >\r\n                {children}\r\n            </Box>\r\n        </Fade>\r\n    );\r\n}\r\nexport function AppbarContainer(props: IAppbarContainerProps) {\r\n    const { children, appbarProps, titleConf, reload } = props;\r\n    const router = useRouter()\r\n    function handleBack(){\r\n        // 本想抽象成底层一个方法，但是考虑了一下router需要注入或者是一个callback，似乎像现在这样判断一下event也可以。回头继续观察一下吧。\r\n        const event = browserHistoryUtils.askHistoryBack()\r\n        if(event.defaultPrevented)return\r\n        if(appbarProps.backDispatcher){\r\n            const e:IAppBarBackAskEvent = {defaultPrevented:false}\r\n            appbarProps.backDispatcher.dispatch('back',e)\r\n            if(e.defaultPrevented)return\r\n        }\r\n        router.back()\r\n    }\r\n    return (\r\n        <PageShell>\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <HideOnScroll {...props}>\r\n                <AppBar color=\"inherit\">\r\n                    <Toolbar>\r\n                        <KeyboardArrowLeft onClick={handleBack} />\r\n                        {appbarProps.title}\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </HideOnScroll>\r\n            <Toolbar id=\"back-to-top-anchor\" />\r\n            <Container sx={{padding:\"0\", marginTop:\"17px\"}}>\r\n                <AndroidPageContent titleConf={titleConf} reload={reload}>\r\n                    {children}\r\n                </AndroidPageContent>\r\n            </Container>\r\n\r\n            <ScrollTop {...props}>\r\n                <Fab size=\"small\" aria-label=\"scroll back to top\">\r\n                    <KeyboardArrowUpIcon />\r\n                </Fab>\r\n            </ScrollTop>\r\n        </React.Fragment>\r\n        </PageShell>\r\n    );\r\n}\r\n"],"names":["React","useState","useCallback","TextField","Checkbox","FormControlLabel","Box","useDebounceFn","useTranslation","axios","loadHtmlFromUrl","value","url","encodeURIComponent","res","get","data","html","Error","origin","URL","joinOriginPath","path","endsWith","startsWith","slice","timeParam","Date","now","includes","test","replace","match","p1","p2","console","log","MarketInputForm","isFullMarketPage","onMarketConfigReady","initialValue","initialIsUrl","inputValue","setInputValue","isUrl","setIsUrl","error","setError","t","isValidUrl","_","processInput","isUrlChecked","str","run","debouncedProcessInput","wait","handleInputChange","event","newValue","target","handleCheckboxChange","newIsUrl","checked","isUrlLabel","placeholder","sx","display","flexDirection","gap","label","variant","fullWidth","onChange","helperText","multiline","rows","control","Card","CardContent","Typography","Divider","IFrameReactContainer","AddMarketByUrl","name","setName","summary","setSummary","description","setDescription","urlOrHtmlConf","setUrlOrHtmlConf","fullMarketConf","setFullMarketConf","iframeStyle","minWidth","minHeight","border","handleMarketConfigReady","config","handleFullMarketConfigReady","itemMarket","maxWidth","margin","mt","mb","color","component","gutterBottom","e","my","hr","textAlign","paragraph","strong","undefined","content","style","AppbarContainer","AppShell","Dispatcher","AddMarketByUrlPage","marketConf","fullMarket","dispatcher","appbarProps","title","back","backDispatcher"],"sourceRoot":"","ignoreList":[1]}