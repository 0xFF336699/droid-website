(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{43932:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-editor",function(){return n(22147)}])},50497:(e,t,n)=>{"use strict";n.d(t,{j:()=>D,v:()=>E});var i=n(22938),o=n(39561),r=n(77758),a=n(18856),c=n(95536),s=n(49365),l=n(59840),d=n(15751),p=n(26841),u=n(27458),g=n(33914),h=n(45396);let x=[{activeActivity:"com.fanfanlo.droid.MainActivity",pn:"com.fanfanlo.droid.debug",cn:"android.widget.FrameLayout",node:{availableExtraData:["android.view.accessibility.extra.DATA_TEXT_CHARACTER_LOCATION_KEY"],boundsInScreen:{bottom:733,left:57,right:264,top:631},children:[],className:"android.widget.Button",isAccessibilityDataSensitive:!1,isAccessibilityFocused:!1,isCheckable:!1,isChecked:!1,isClickable:!0,isContentInvalid:!1,isContextClickable:!1,isDismissable:!1,isEditable:!1,isEnabled:!0,isFocusable:!0,isFocused:!0,isHeading:!1,isImportantForAccessibility:!1,isLongClickable:!1,isMultiLine:!1,isPassword:!1,isScreenReaderFocusable:!1,isScrollable:!1,isSelected:!1,isShowingHintText:!1,isTextEntryKey:!1,isTextSelectable:!1,isVisibleToUser:!0,text:"选择节点",viewIdResourceName:"a11y-node-select-action-item-df1c",index:0,listIndex:24}},{activeActivity:"com.fanfanlo.droid.MainActivity",pn:"com.fanfanlo.droid.debug",cn:"android.widget.FrameLayout",node:{availableExtraData:["android.view.accessibility.extra.DATA_TEXT_CHARACTER_LOCATION_KEY"],boundsInScreen:{bottom:1258,left:60,right:467,top:1186},children:[],className:"android.widget.TextView",isAccessibilityDataSensitive:!1,isAccessibilityFocused:!1,isCheckable:!1,isChecked:!1,isClickable:!1,isContentInvalid:!1,isContextClickable:!1,isDismissable:!1,isEditable:!1,isEnabled:!0,isFocusable:!1,isFocused:!1,isHeading:!1,isImportantForAccessibility:!1,isLongClickable:!1,isMultiLine:!1,isPassword:!1,isScreenReaderFocusable:!1,isScrollable:!1,isSelected:!1,isShowingHintText:!1,isTextEntryKey:!1,isTextSelectable:!1,isVisibleToUser:!0,text:"动作组",index:15,listIndex:40}}];var f=n(23026);let m={id:"a11y-node-select-action-item-df1c",i18nNs:"homepage/components/page/action-list/groups/a11y/node-select/content",nameKey:"content.name",group:"a11yNodeSelectActionItem.group",descriptionKey:"content.description",type:"action",LinkRender:(0,g.cI)(y)};async function j(){return new Promise(e=>{if(!o.nd)return e(x[parseInt((Math.random()*x.length).toString())]);let t="a11yNodeSelectActionItem",n=r.yx.shellListen(a.m.WebViewJsDispatcher.name,t,t,!1,function(t){let o=JSON.parse(t);console.log("fffffffffffffff",t),c.q.exitWindowById(i),r.yx.shellRemoveListen(a.m.WebViewJsDispatcher.name,n),e(o)}),i=(0,h.Z0)();(0,s.d)(t,i)})}async function y(e){let{query:t,router:n}=e,o=n.pathname,a=await j(),c=l.p.mergeDataToDefultData({});c.javaData.info=a;let s=(0,d.getTriggerOrActionListPageParams)(t);p.T.dispatchEditEvent(p.T.EditType.add,{data:c,projectMemberType:u.K.actionGroup,projectInfo:s.data}),i.V.checkToPath(n,o,t.backPath||"",1),r.yx.openSelfByPackage()}async function b(e){let{query:t,onDataSelectedEventType:n}=e;console.log("lllllllllllllllllllllllllll2223333");let i=await j(),o=(0,d.getTriggerOrActionListPageParams)(t);if(n&&o.data.action){console.log("fffffffffffrom event type "),(0,f.Ax)(o.data.action).dispatch(n,i);return}p.T.dispatchEditEvent(p.T.EditType.updateJavaData,{data:{info:i},projectMemberType:u.K.action,projectInfo:o.data}),r.yx.openSelfByPackage()}l.p.onClickChange=b;var A=n(21725);let v={id:"selectAppActionItem-7537eb25-586d-4178-9d9b-b817706a4c6b",i18nNs:"homepage/components/page/action-list/groups/app/app-select/content",nameKey:"content.name",group:"selectAppActionItem.group",descriptionKey:"content.description",type:"page",LinkRender:(0,g.IS)("/app-selector","selectAppActionItem-7537eb25-586d-4178-9d9b-b817706a4c6b",{actionType:A.F.type})};var w=n(78725),k=n(77545),C=n(21858);let T={id:"to-app-main-page-action-item-df1c",i18nNs:"homepage/components/page/action-list/groups/app/to-app-main-page/content",nameKey:"content.name",group:"toAppMainPageActionItem.group",descriptionKey:"content.description",type:"action",LinkRender:(0,g.cI)(S)};async function P(){return o.nd?await (0,w.U)(!0):{pn:"".concat((0,C.g0)(Math.floor(5*Math.random())+5),".").concat((0,C.g0)(Math.floor(5*Math.random())+5),".").concat((0,C.g0)(Math.floor(5*Math.random())+5)),an:(0,C.g0)(Math.floor(5*Math.random())+5)}}async function S(e){let{query:t}=e,n=await P(),i=(0,d.getTriggerOrActionListPageParams)(t),o=k.w.mergeDataToDefultData({javaData:{pn:n.pn,an:n.an}});p.T.dispatchEditEvent(p.T.EditType.add,{data:o,projectMemberType:u.K.actionGroup,projectInfo:i.data}),window.history.back(),r.yx.openSelfByPackage()}async function I(e){let{query:t}=e,n=await P(),i=(0,d.getTriggerOrActionListPageParams)(t);p.T.dispatchEditEvent(p.T.EditType.updateJavaData,{data:n,projectMemberType:u.K.action,projectInfo:i.data}),r.yx.openSelfByPackage()}k.w.onClickChange=I;let D=[{i18nNs:"homepage/components/page/action-list/groups/app/content",nameKey:"content.name",descriptionKey:"content.description",items:[v,T]},{i18nNs:"homepage/components/page/action-list/groups/a11y/content",nameKey:"content.name",descriptionKey:"content.description",items:[m]}];async function E(){}},20017:(e,t,n)=>{"use strict";n.d(t,{J:()=>A,R:()=>b});var i=n(83421),o=n(15751),r=n(72028),a=n(27458),c=n(26841),s=n(91239),l=n(33914);let d={id:"timeout-trigger-item-ce8c",i18nNs:"homepage/components/page/trigger-list/groups/time/timeout/content",nameKey:"content.name",group:"timeoutTriggerItem.group",descriptionKey:"content.description",type:"trigger",LinkRender:(0,l.cI)(function(e){let{query:t,item:n}=e,l=(0,o.getTriggerOrActionListPageParams)(t);switch(t.type){case i.ActionOrTriggerListTypeEnum.addAction:let d=r.V.createDefultData();if(!l.data.triggerGroup)return(0,s.w)("triggerGroup is not found",t);c.T.dispatchEditEvent(c.T.EditType.add,{projectMemberType:a.K.triggerGroup,data:d,projectInfo:l.data}),window.history.back();case i.ActionOrTriggerListTypeEnum.updateAction:}})};var p=n(39561),u=n(78725),g=n(77758),h=n(88474),x=n(21858);let f={id:"activity-in-item-ce8c",i18nNs:"homepage/components/page/trigger-list/groups/app/activity/content",nameKey:"content.name",group:"activityInItem.group",descriptionKey:"content.description",type:"trigger",LinkRender:(0,l.cI)(j)};async function m(){return p.nd?await (0,u.U)(!0):{pn:"".concat((0,x.g0)(Math.floor(5*Math.random())+5),".").concat((0,x.g0)(Math.floor(5*Math.random())+5),".").concat((0,x.g0)(Math.floor(5*Math.random())+5)),an:(0,x.g0)(Math.floor(5*Math.random())+5),cn:(0,x.g0)(Math.floor(5*Math.random())+5)}}async function j(e){let{query:t}=e,n=await m(),i=(0,o.getTriggerOrActionListPageParams)(t),r=h.S.mergeDataToDefultData({javaData:{pn:n.pn,an:n.an,cn:n.cn}});c.T.dispatchEditEvent(c.T.EditType.add,{data:r,projectMemberType:a.K.triggerGroup,projectInfo:i.data}),console.log("ccccccccccccccall open self"),g.yx.openSelfByPackage(),window.history.back()}async function y(e){let{query:t}=e,n=await m(),i=(0,o.getTriggerOrActionListPageParams)(t);c.T.dispatchEditEvent(c.T.EditType.updateJavaData,{data:n,projectMemberType:a.K.trigger,projectInfo:i.data}),g.yx.openSelfByPackage()}h.S.onClickChange=y;let b=[{i18nNs:"homepage/components/page/trigger-list/groups/time/content",nameKey:"content.name",descriptionKey:"content.description",items:[d]},{i18nNs:"homepage/components/page/trigger-list/groups/app/content",nameKey:"content.name",descriptionKey:"content.description",items:[f]}];async function A(){}},33914:(e,t,n)=>{"use strict";n.d(t,{IS:()=>l,cI:()=>d});var i=n(50612),o=n(94011),r=n(88816),a=n.n(r),c=n(53757);function s(e){let{query:t,children:n,pathname:o,id:r}=e;return(0,i.jsx)(a(),{href:{pathname:o,query:t},"data-id":r,children:n})}function l(e,t,n){return o=>{let{query:r,children:a,item:l}=o,d=(0,c.useRouter)(),p="".concat(d.pathname).concat(e);return(0,i.jsx)(s,{query:{...r,...n},pathname:p,id:t,children:a})}}function d(e){return t=>{let{query:n,children:r,item:a}=t,s=(0,c.useRouter)();return(0,i.jsx)(o.A,{id:a.id,"data-id":a.id,onClick:function(){e({query:n,item:a,router:s})},children:r})}}},22147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e4});var i=n(50612),o=n(25065);window.android,window.global||(window.global=window);let r=new o.m;var a=n(15751),c=n(87696),s=n(67835),l=n(87825),d=n(81681),p=n(2599),u=n(23026),g=n(96421),h=n(42590),x=n(36734),f=n(38212),m=n(80740),j=n(88171),y=n(22066),b=n(94011),A=n(94344),v=n(7843);function w(e){let{setText:t,title:n,cancelText:o,saveText:r,contentText:a,helperText:c,minHeight:s,children:l}=e,{t:d}=(0,v.Bd)("fanfanlo/mui/dialog/content"),[p,u]=(0,A.useState)(""),[g,h]=(0,A.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{style:{cursor:"pointer",width:"100%",textAlign:"center",display:"inline-block",backgroundColor:"",minHeight:s||"1rem"},onClick:()=>h(!0),children:(0,i.jsx)("span",{children:l||""})}),g&&(0,i.jsxs)(x.A,{open:g,onClose:()=>h(!1),children:[(0,i.jsx)(f.A,{children:n||d("EditableText.title")}),a&&(0,i.jsx)(m.A,{children:a}),(0,i.jsx)(m.A,{children:(0,i.jsx)(j.A,{id:"editable-text","aria-label":"editable-text",autoFocus:!0,required:!0,fullWidth:!0,helperText:c,variant:"standard",value:p,onChange:e=>{u(e.target.value)}})}),(0,i.jsxs)(y.A,{children:[(0,i.jsx)(b.A,{id:"editable-text-cancel","data-id":"editable-text-cancel",onClick:()=>h(!1),children:o||d("EditableText.cancel")}),(0,i.jsx)(b.A,{id:"editable-text-save","data-id":"editable-text-save",onClick:()=>{h(!1),t(p)},children:r||d("EditableText.save")})]})]})]})}var k=n(60789),C=n(40614),T=n(6048),P=n(67779),S=n(64565),I=n(17777),D=n(96142),E=n(21239),L=n(38149),O=n(85364),_=n(53757),G=n(84116),M=n(38712),B=n(32537),N=n.n(B);let K=new Map;function R(e){let t=function(e){let t=K.get(e)||[];return t[t.length-1]}(e.id);return!(t&&N().isEqual(t.project,e))&&(!function(e){G.o.runPauseProxyFn(()=>{e.project=N().cloneDeep((0,M.EL)(e.project))});let t=K.get(e.project.id);if(!t){K.set(e.project.id,[e]);return}t.push(e)}({index:t?t.index+1:0,project:e,date:new Date().toISOString()}),!0)}var W=n(40242),q=n(52591),F=(e,t,n)=>new Promise((i,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,a);c((n=n.apply(e,t)).next())});let J=(0,u.I$)({}),V=new o.m,U={edit:e=>J[e.id]=function(e){let t=(0,u.I$)({project:e,askStay:!1,giveup:!1,updated:!1,historyId:0,testTime:new Date().toLocaleString(),save:()=>F(this,null,function*(){t.updated=!1,t.askStay=!1,t.giveup=!1,c.D.saveProject(e),V.dispatch("project-saved",e);let n=yield(0,W.loadI18nValue)("droid-project/project/manager/content","edit-project-info-utils.projectSaved");q.Ay.success(n)})});return t}(e)},z=(0,A.createContext)({});var H=n(52229),$=n(82987),X=n(7892);let Y=0,Z=new WeakMap;function Q(e){let t=Z.get(e)||(0,u.I$)({version:++Y,count:0,key:"".concat(Y,"-0")});return Z.has(e)||(Z.set(e,t),(0,u.Ax)(e).addListener(X._l,(e,n)=>{t.count++,t.version=++Y,t.key="".concat(t.version,"-").concat(t.count)})),t}var ee=n(96062),et=n(63437),en=n(4079),ei=n(49820),eo=n(17387),er=n(48658),ea=n(83421),ec=n(91884),es=n(25355),el=n(18668),ed=Object.defineProperty,ep=Object.getOwnPropertySymbols,eu=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,eh=(e,t,n)=>t in e?ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ex=(e,t)=>{for(var n in t||(t={}))eu.call(t,n)&&eh(e,n,t[n]);if(ep)for(var n of ep(t))eg.call(t,n)&&eh(e,n,t[n]);return e};function ef(e,t){let[n,i]=(0,A.useState)(e);return(0,A.useEffect)(()=>{(0,h.c)(e,t=>{N().isArray(t.target)?[...t.target]:t.target,i(N().isArray(e)?[...e]:ex({},e))},t)},[]),[n]}var em=n(58553),ej=n(42623);function ey(e){let{list:t,index:n}=e,o=new l.tG(!1,"Check2_fn");o.isPaused=!0,o.log("list=",t);let[r]=ef(t),c=(0,A.useContext)(a.GroupCheckList1Context);return o.log("l=",r),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(eo.A,{container:!0,children:[(0,i.jsx)(eo.A,{container:!0,size:"grow",children:r.map((e,n)=>(0,i.jsx)(eo.A,{children:(0,i.jsx)(ec.A,{children:(0,i.jsx)(es.A,{label:n.toString(),control:(0,i.jsx)(ej.A,{"data-id":"group-check-checkbox","data-checked":e,"data-value":e,checked:e,onChange:e=>{t[n]=e.target.checked}})})})},p._.getNewCountId().toString()))}),(0,i.jsx)(eo.A,{children:(0,i.jsx)(em.b,{title:"提醒",onConfirm:function(){c.splice(n,1)},content:"您要删除此条校验吗？",children:(0,i.jsx)(D.A,{"data-id":"group-check-remove",children:(0,i.jsx)(er.A,{})})})})]})})}function eb(e){let{list:t}=e,n=new l.tG(!1,"Check1_fn");return n.isPaused=!0,n.log("Check1 list=",t),(0,i.jsx)(a.GroupCheckList1Context.Provider,{value:t,children:t.map((e,n)=>(0,i.jsx)(ey,{list:t[n],index:n},Q(e).key))})}function eA(e){let{group:t}=e,n=new l.tG(!1,"GroupCheck_fn");n.isPaused=!0;let[o]=(0,d.x)(t,"isSequential",t.isSequential),[r]=(0,d.x)(t,"list",t.list),[a]=ef(r),[c]=(0,d.x)(a,"length",a.length),[s]=(0,d.x)(t,"checks",t.checks),[p]=ef(s);return((0,A.useEffect)(()=>{n.log("updateChecks2_fn","listSize=",c,t.checks),t.checks.forEach(e=>{n.log("updateChecks2_fn","checks2=",e);for(let t=e.length;t<c;t++)e.push(!0);e.length=c})},[c]),n.log("list.length=",a.length),a.length<=1||o)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(P.A,{children:[(0,i.jsx)(eo.A,{container:!0,children:(0,i.jsx)(eo.A,{children:(0,i.jsx)(O.A,{"data-id":"group-add-check-list.875aec4f-5049-426a-a395-0ac0c6666a35",onClick:()=>{t.checks.push(Array(c).fill(!0))},children:"添加校验组"})})}),(0,i.jsx)(eb,{list:t.checks})]})}var ev=Object.defineProperty,ew=Object.defineProperties,ek=Object.getOwnPropertyDescriptors,eC=Object.getOwnPropertySymbols,eT=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,eS=(e,t,n)=>t in e?ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eI=(e,t)=>{for(var n in t||(t={}))eT.call(t,n)&&eS(e,n,t[n]);if(eC)for(var n of eC(t))eP.call(t,n)&&eS(e,n,t[n]);return e},eD=(e,t)=>ew(e,ek(t));function eE(e){let{query:t,attrs:n,path:o,btnId:r,children:a}=e,c=(0,_.useRouter)();return t.backPath=c.pathname,(0,i.jsx)(O.A,eD(eI({onClick:function(){let e=new URLSearchParams(Object.keys(t).map(e=>[e,t[e].toString()])),n="".concat(o,"?").concat(e.toString());c.push(n)}},n),{id:r,"data-id":r,children:a}))}var eL=n(24048),eO=n(12066);function e_(e){let{actionData:t}=e,n=(0,A.useContext)(a.ActionListContext),o=eL.Gh[t.type];return(0,i.jsxs)(eO.A,{sx:{position:"relative",padding:"2px",marginTop:"2px",marginBottom:"2px","&::after":{content:'""',position:"absolute",right:0,top:"5px",bottom:"5px",borderRight:"1px solid red"},"&::before":{content:'""',position:"absolute",left:0,top:"5px",bottom:"5px",borderLeft:"1px solid red"}},children:[o.UI(t),(0,i.jsx)(eO.A,{sx:{textAlign:"center"},children:(0,i.jsx)(em.b,{title:"删除动作",content:"确定删除本动作吗？",onConfirm:function(){let e=n.indexOf(t);-1!==e&&n.splice(e,1)},children:(0,i.jsx)(b.A,{id:"del-action-btn","data-id":"del-action-btn",children:"删除"})})})]})}function eG(){let e=(0,A.useContext)(a.ActionGroupContext),[t]=ef(e.list);return t&&N().isArray(t)||console.log("lllllllllllllist is null",e),(0,i.jsx)("div",{children:e.list.map(e=>(0,i.jsx)(e_,{actionData:e},Q(e).key))})}function eM(e){let{actionGroup:t}=e,{t:n}=(0,W.useTranslation)("droid-project/project/ui/project/edit-project/trigger-action-group/trigger-action/action-group/content"),o=(0,A.useContext)(z),r=(0,A.useContext)(a.TriggerActionGroupContext),c=(0,A.useContext)(a.TriggerActionContext),s={projectId:o.project.id,triggerActionGroupId:r.id,triggerActionId:c.id,actionGroupId:t.id,type:ea.ActionOrTriggerListTypeEnum.addAction,actionType:""},[l]=(0,d.x)(t,"isSequential",t.isSequential),[p]=(0,d.x)(t.list,"length",t.list.length);return(0,i.jsx)(a.ActionGroupContext.Provider,{value:t,children:(0,i.jsx)(a.ActionListContext.Provider,{value:t.list,children:(0,i.jsxs)(P.A,{sx:{border:"2px solid #ccc",padding:"4px"},children:[(0,i.jsxs)(eo.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsx)(eo.A,{size:"grow",children:(0,i.jsx)(P.A,{children:n("content.title")})}),(0,i.jsx)(eo.A,{children:p>1&&(0,i.jsx)(ec.A,{children:(0,i.jsx)(es.A,{control:(0,i.jsx)(el.A,{checked:l,"data-id":"action-group-checkbox-is-sequential.122f","aria-checked":l,"data-checked":l,onChange:e=>{var n;n=e.target.checked,(0,u.I$)(t).isSequential=n}}),label:n("content.sequential")})})}),(0,i.jsx)(eo.A,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(eE,{query:s,attrs:(0,$.q_)(t),path:"/action-list",btnId:"link-router-to-action-list",children:n("content.list")})})})]}),(0,i.jsx)(eA,{group:t}),(0,i.jsx)(eG,{})]})})})}var eB=n(56700);function eN(e){let{triggerData:t}=e,n=(0,A.useContext)(a.TriggerListContext),o=(0,eB.gq)(t.type);return(0,i.jsx)(a.TriggerContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{children:[o.UI(t),(0,i.jsx)(P.A,{sx:{textAlign:"center"},children:(0,i.jsx)(em.b,{title:"删除触发",content:"确定删除本触发吗？",onConfirm:()=>{let e=n.indexOf((0,u.I$)(t));-1!==e&&(0,u.I$)(n).splice(e,1)},children:(0,i.jsx)(O.A,{id:"del-trigger-btn","data-id":"del-trigger-btn",children:"删除"})})})]})})}function eK(){let e=(0,A.useContext)(a.TriggerGroupContext),[t]=ef(e.list);return(0,i.jsx)(a.TriggerListContext.Provider,{value:e.list,children:(0,i.jsx)(P.A,{children:e.list.map(e=>(0,i.jsx)(eN,{triggerData:e},Q(e).version))})})}function eR(e){let{triggerGroup:t}=e,{t:n}=(0,W.useTranslation)("droid-project/project/ui/project/edit-project/trigger-action-group/trigger-action/trigger-group/content"),o=(0,A.useContext)(z),r=(0,A.useContext)(a.TriggerActionGroupContext),c=(0,A.useContext)(a.TriggerActionContext),s={projectId:o.project.id,triggerActionGroupId:r.id,triggerActionId:c.id,triggerGroupId:t.id,type:ea.ActionOrTriggerListTypeEnum.addAction,actionType:""},[l]=(0,d.x)(t,"isSequential",t.isSequential),[p]=(0,d.x)(t.list,"length",t.list.length);return(0,i.jsx)(a.TriggerGroupContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{sx:{border:"2px solid #a4a737",padding:"4px",marginBottom:"2px",marginTop:"2px"},children:[(0,i.jsxs)(eo.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsx)(eo.A,{size:"grow",children:(0,i.jsx)(P.A,{children:n("content.title")})}),(0,i.jsx)(eo.A,{children:p>1&&(0,i.jsx)(ec.A,{children:(0,i.jsx)(es.A,{control:(0,i.jsx)(el.A,{checked:l,"data-id":"trigger-group-checkbox-is-sequential.122f","aria-checked":l,"data-checked":l,onChange:e=>{var n;n=e.target.checked,(0,u.I$)(t).isSequential=n}}),label:n("content.sequential")})})}),(0,i.jsx)(eo.A,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(eE,{query:s,attrs:$.mR.triggerGroup.getTriggerGroupElement(t),path:"/trigger-list",btnId:"link-router-to-trigger-list",children:n("content.list")})})})]}),(0,i.jsx)(eA,{group:t}),(0,i.jsx)(eK,{})]})})}function eW(e){let{triggerAction:t}=e,[n,o]=(0,A.useState)(t.name||"未命名");return(0,i.jsx)(a.TriggerActionContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{sx:{border:"2px solid #02450e",padding:"4px"},"data-id-trigger-action":t.id,children:[(0,i.jsxs)(eo.A,{sx:{alignItems:"center"},container:!0,children:[(0,i.jsxs)(eo.A,{children:[(0,i.jsx)(en.A,{}),(0,i.jsx)(et.A,{})]}),(0,i.jsx)(eo.A,{size:"grow",children:(0,i.jsx)(w,{setText:function(e){t.name=e,o(e)},children:(0,i.jsx)("span",{"data-id":"rename-trigger-action-btn.a4c6",children:n})})}),(0,i.jsx)(eo.A,{children:(0,i.jsx)(em.b,{title:"提示",content:"确认要删除这条触发器和动作吗",onConfirm:function(){let e=(0,g.SZ)(t);e&&e.splice(e.indexOf(t),1)},children:(0,i.jsx)(D.A,{"data-id":"del-trigger-action-btn",children:(0,i.jsx)(er.A,{})})})})]}),(0,i.jsx)(eR,{triggerGroup:t.triggerGroup}),(0,i.jsx)(eM,{actionGroup:t.actionGroup})]})})}var eq=Object.defineProperty,eF=Object.defineProperties,eJ=Object.getOwnPropertyDescriptors,eV=Object.getOwnPropertySymbols,eU=Object.prototype.hasOwnProperty,ez=Object.prototype.propertyIsEnumerable,eH=(e,t,n)=>t in e?eq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,e$=(e,t)=>{for(var n in t||(t={}))eU.call(t,n)&&eH(e,n,t[n]);if(eV)for(var n of eV(t))ez.call(t,n)&&eH(e,n,t[n]);return e},eX=(e,t)=>eF(e,eJ(t));function eY(){let{t:e}=(0,v.Bd)("droid-project/project/ui/project/edit-project/trigger-action-group/content"),t=(0,A.useContext)(z),[n,o]=(0,A.useState)(t.project.triggerActionGroup.name||e("TriggerActionGroup.unamed")),[r]=function(e){let[t,n]=(0,A.useState)([...e]),i=(0,u.Ax)(e).addListener(X._l,()=>{n([...e])});return(0,A.useEffect)(()=>()=>{i()},[]),[t,i]}(t.project.triggerActionGroup.list),c=t.project.triggerActionGroup;return(0,i.jsx)(a.TriggerActionGroupContext.Provider,{value:c,children:(0,i.jsxs)(P.A,eX(e$({sx:{border:"2px solid rgb(217, 217, 217)",padding:"4px"}},$.mR.triggerActionGroup.getTriggerActionGroupElementByProp(c.list)),{"data-id-trigger-action-group":c.id,children:[(0,i.jsxs)(eo.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsxs)(eo.A,{container:!0,sx:{alignItems:"center"},children:[(0,i.jsx)(en.A,{}),(0,i.jsx)(et.A,{}),(0,i.jsx)(ei.A,{})]}),(0,i.jsx)(eo.A,{size:"grow",sx:{alignItems:"center",width:"100%"},children:(0,i.jsx)(P.A,{sx:{width:"100%"},children:(0,i.jsx)(w,{setText:function(n){t.project.triggerActionGroup.name=n,o(n||e("TriggerActionGroup.unamed"))},children:(0,i.jsx)("span",{"data-id":"rename-groupname-btn-a322",style:{backgroundColor:"red"},children:n})})})}),(0,i.jsx)(eo.A,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(D.A,{"data-id":"add-trigger-action-btn.22fab779-75e2-4e34-82f4-64667e7fc017",onClick:function(){let e=(0,H.n)();(0,g.sd)(c).list.push(e)},children:(0,i.jsx)(ee.A,{})})})})]}),(0,i.jsx)(P.A,{children:r.map((e,t)=>{let n=c.list[t];return(0,i.jsx)(eW,{triggerAction:n},Q(n).version)})})]}))})}var eZ=n(34552);let eQ=(0,C.Ay)(T.A)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function e0(){let e=(0,A.useContext)(a.ProjectContext);return(0,i.jsx)(P.A,{"data-id-project":e.id,children:(0,i.jsx)(S.A,{children:(0,i.jsx)(eY,{})})})}function e1(){let e=(0,A.useContext)(z),t=l.tG.createCountedLogger(!1,"project-editor-effect"),[n]=(0,d.x)(e,"askStay",e.askStay),o=(0,_.useRouter)();function r(){e.askStay=!1,e.giveup=!0,o.back(),e.giveup=!1,e.updated=!1}function a(){e.askStay=!1}return(0,i.jsx)(P.A,{children:(0,i.jsxs)(eQ,{onClose:a,"aria-labelledby":"customized-dialog-title",open:n,children:[(0,i.jsx)(I.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:"提示:您有更改没有保存，确定要离开吗？"}),(0,i.jsx)(D.A,{"aria-label":"close",onClick:a,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,i.jsx)(k.A,{})}),(0,i.jsx)(E.A,{dividers:!0}),(0,i.jsxs)(L.A,{children:[(0,i.jsx)(O.A,{onClick:function(){r(),c.D.deleteDraft(e.project.id)},children:"放弃保存并离开"}),(0,i.jsx)(O.A,{onClick:function(){c.D.addDraft(e.project),r()},children:"保存变更到草稿并离开"}),(0,i.jsx)(O.A,{onClick:function(){e.save(),r(),c.D.deleteDraft(e.project.id)},children:"保存并离开"}),(0,i.jsx)(O.A,{onClick:function(){e.askStay=!1,e.giveup=!1,t.log("handleStayAndEdit fn called ","objectCount=",p._.getObjectCount(e),"editInfo=",e)},children:"留下编辑"})]})]})})}function e2(){let{t:e}=(0,v.Bd)("droid-project/project/ui/project/edit-project/content");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(P.A,{children:(0,i.jsx)(O.A,{onClick:function(){},children:e("content.projectTools.run")})})})}var e5=n(75936),e8=n(73256),e7=n(50497),e6=n(20017);function e4(){let{Content:e,Title:t,dispatcher:n}=function(){let e=new o.m,{id:t}=(0,_.useRouter)().query,n=c.D.findDraftOrSavedProject(t||"-1")||(0,s.D)({id:t||"-1"}),p=n,x=n=c.D.addDraft(p),f=n=(0,u.I$)(x),m=n=(0,g.sd)(f),j=U.edit(m);function y(){let e=new l.tG(!1,"checkUpdated_fn");e.isPaused=!0;let t=c.D.findSavedProject(n.id);return(e.log("checkUpdated fn called","c=",t),j.updated=!t||!N().isEqual(t,n),e.log("editInfo.updated=",j.updated),j.updated&&!j.giveup)?(j.askStay=!0,e.log("checkUpdated fn called","editInfo.askStay=",j.askStay),!0):(e.log("checkUpdated fn called2","editInfo.askStay=",j.askStay),!1)}return{Content:function(){(0,A.useEffect)(()=>{if(R(n),!n)return;let e=(0,h.c)((0,g.Al)(n),()=>{R(n),j.updated=!0});return()=>{e()}},[]),(0,A.useEffect)(()=>{let e=r.addListener("checkBrowserCanBack",e=>{let t=e.result=y();console.log("ooooooooooooooooooooooooo checkBrowserCanBack_fn",e,"canback=",t),t&&c.D.deleteDraft(n.id)});return()=>{e()}},[]),(0,A.useEffect)(()=>e.addListener("back",e=>{(e.defaultPrevented=y())&&c.D.deleteDraft(n.id)}),[]);let t=(0,u.I$)(j.project);return(0,i.jsx)(z.Provider,{value:j,children:(0,i.jsx)(a.ProjectContext.Provider,{value:t,children:(0,i.jsxs)(P.A,{sx:{width:"100%"},children:[(0,i.jsx)(e2,{}),(0,i.jsx)(e0,{}),(0,i.jsx)(e1,{})]})})})},Title:function(){let{t:e}=(0,v.Bd)("droid-project/project/ui/project/edit-project/content"),t=e("content.clickToSetProjectName"),[o]=(0,d.x)(n,"name",t);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:16,width:"100%",alignItems:"center"},children:[(0,i.jsx)("span",{style:{flexGrow:1,paddingLeft:"2rem"},children:(0,i.jsx)(w,{setText:function(e){n.name=e},children:(0,i.jsx)("h2",{children:(0,i.jsx)("span",{id:"project-name-editor","data-id":"project-name-editor",children:o||t})})})}),(0,i.jsx)(D.A,{onClick:()=>{j.save()},children:(0,i.jsx)(eZ.A,{})})]})},dispatcher:e}}();(0,e7.v)(),(0,e6.J)();let p={title:(0,i.jsx)(t,{}),back:!0,backDispatcher:n};return(0,i.jsx)(e5.G,{children:(0,i.jsx)(e8.W,{appbarProps:p,titleConf:{ns:"homepage/pages/project-editor/content",key:"editor.title"},children:(0,i.jsx)(e,{})})})}},22938:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var i=(e,t,n)=>new Promise((i,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,a);c((n=n.apply(e,t)).next())});let o={checkToPath:function(e,t,n,o){return i(this,null,function*(){let i=e.pathname;if(console.log("nowpath=",i),console.log("expectNowPath=",t),console.log("pointPath=",n),i!==n){for(t!==i&&e.replace(n);o>0;)e.back(),o--;e.pathname!==n&&n&&e.push(n)}})}}},73256:(e,t,n)=>{"use strict";n.d(t,{W:()=>K});var i=n(50612),o=n(35011),r=n(80686),a=n(9655),c=n(67779),s=n(16425),l=n(23235),d=n(92776),p=n(64909),u=n(61150),g=n(88778),h=n(62754),x=n(28542),f=n(94344),m=n(53757),j=n(25065),y=(e,t,n)=>new Promise((i,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,a);c((n=n.apply(e,t)).next())});let b=new j.m,A={dipsatcher:b,screenLockCount:0,switchPage:()=>y(void 0,null,function*(){b.dispatch("switchPage"),A.screenLockCount=0}),listenSwitchPage:e=>b.addListener("switchPage",e)};var v=n(76838),w=n(2196);function k(e){let{children:t}=e,n=(0,m.useRouter)();return(0,i.jsx)(v.N,{mode:"wait",children:(0,i.jsx)(w.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:t},n.route)})}let C=0;function T(e){let{children:t}=e,n="app-shell-".concat(C++);return(0,f.useEffect)(()=>{let e=document.querySelector("#".concat(n)),t=A.listenSwitchPage(()=>{if(!e)return});if(e)return e.addEventListener("click",e=>{0!=A.screenLockCount&&(e.stopPropagation(),e.preventDefault())}),()=>{t()}},[]),(0,i.jsx)(c.A,{id:n,children:(0,i.jsx)(k,{children:t})})}var P=n(22726),S=Object.defineProperty,I=Object.defineProperties,D=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,_=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&_(e,n,t[n]);if(E)for(var n of E(t))O.call(t,n)&&_(e,n,t[n]);return e},M=(e,t)=>I(e,D(t));function B(e){let{children:t,window:n}=e,a=(0,o.A)({target:n?n():void 0});return(0,i.jsx)(r.A,{appear:!1,direction:"down",in:!a,children:null!=t?t:(0,i.jsx)("div",{})})}function N(e){let{children:t,window:n}=e,r=(0,o.A)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return(0,i.jsx)(a.A,{in:r,children:(0,i.jsx)(c.A,{"data-id":"content-scroll-top-button",onClick:e=>{let t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}function K(e){let{children:t,appbarProps:n,titleConf:o}=e,r=(0,m.useRouter)();return(0,i.jsx)(T,{children:(0,i.jsxs)(f.Fragment,{children:[(0,i.jsx)(s.Ay,{}),(0,i.jsx)(B,M(G({},e),{children:(0,i.jsx)(l.A,{color:"inherit",children:(0,i.jsxs)(d.A,{children:[(0,i.jsx)(h.A,{onClick:function(){if(!g.W.askHistoryBack().defaultPrevented){if(n.backDispatcher){let e={defaultPrevented:!1};if(n.backDispatcher.dispatch("back",e),e.defaultPrevented)return}r.back()}}}),n.title]})})})),(0,i.jsx)(d.A,{id:"back-to-top-anchor"}),(0,i.jsx)(p.A,{sx:{padding:"0",marginTop:"17px"},children:(0,i.jsx)(P.A,{titleConf:o,children:t})}),(0,i.jsx)(N,M(G({},e),{children:(0,i.jsx)(u.A,{size:"small","aria-label":"scroll back to top",children:(0,i.jsx)(x.A,{})})}))]})})}},95536:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});var i=n(77758),o=(e,t,n)=>new Promise((i,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,a);c((n=n.apply(e,t)).next())});let r={exitWindowById:function(e){return o(this,null,function*(){let t='var bl = com.fanfanlo.lib.components.floatview.floatwindow.WindowUtils.exitById("'.concat(e,'", "");\n bl;');return console.log("exitWindowById_fn called",e,t),i.yx.callScript(t)})}}},78725:(e,t,n)=>{"use strict";n.d(t,{U:()=>j});var i=n(68872),o=n(45396),r=n(54634),a=n(62169),c=n(31678),s=n(83451),l=n(87825),d=n(79786),p=n(75421),u=n(18856);let g=class e extends s.Q{static getDismissEventType(e){return"window-".concat(e,"-dismiss")}static create(t){return new e(t)}constructor(t){super(),this.logger=new l.tG(!1,this.constructor.name),this.dismissListenIndex="",this.init=()=>{let{print:t,error:n,warn:i,logger:o}=this.logger.sub(!1,"fn_init"),r=e.getDismissEventType(this.conf.windowId);return t("type is",r),this.dismissListenIndex=p.L.instance.shellListen(u.m.Window.name,r,r,!0,this.onDismiss),t("dismissListenIndex is",this.dismissListenIndex),this},this.open=()=>{if(!this.conf)throw Error("no window conf");return console.log("crate window res=",p.L.instance.createWindow(JSON.stringify(this.conf))),this},this.onDismiss=()=>{let{print:t,error:n,warn:i,logger:o}=this.logger.sub(!1,"fn_onDismiss");t("dismiss",e.getDismissEventType(this.conf.windowId)),this.dispatchEvent(new d.P(e.eventTypeDismiss))},this.conf=t}};g.eventTypeDismiss="dismiss";var h=n(40242),x=n(95536),f=(e,t,n)=>new Promise((i,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,a);c((n=n.apply(e,t)).next())});let{htmlOrigin:m}=i._;function j(e){return f(this,null,function*(){console.log("openPnAnInfoWindow_fn");let t=!1,n=yield(0,h.getI18nT)("droid-android/htmls/content");return new Promise(function(i,s){let l=!1,d=(0,a.ps)();d.addEventListener(c.v.eventComplete,()=>{console.log("group.isSuccess=",d.isSuccess,"opened",t),t||(d.isSuccess?function(){let a;t=!0;let c=(0,o.Z0)(),d="openAppBackToMainActivitySelected-".concat(c),h="".concat(d,"back"),f=p.L.instance.shellListen(u.m.WebViewJsDispatcher.name,d,h,!0,function(n){console.log("openWindow_fn onSelectApp",n);let o=JSON.parse(n);l=!0,i(o),e&&(t=!1,p.L.instance.shellRemoveListen(u.m.WebViewJsDispatcher.name,f),x.q.exitWindowById(c))});console.log("openWindow_fn eventType=",d,h);let j=(a={htmlConf:{url:"".concat(m,"pages/accessibility-pn-an-info/"),webViewJsParams:{javaToJsDataString:JSON.stringify({eventType:d})}},floatWindowConf:{floatConf:{positionSaveName:"a11y-pn-a-an-info-panel"}},windowId:c},(0,r.Sb)(a));g.create(j).init().open().addEventListener(g.eventTypeDismiss,function(){t=!1,p.L.instance.shellRemoveListen(u.m.WebViewJsDispatcher.name,f),console.log("openWindow_fnonDismiss_fn",u.m.WebViewJsDispatcher.name,f),l||s(n("PnAnInfoWindow.noPnSelected"))})}():s(n("PnAnInfoWindow.noPermission")))}),d.run()})})}},49365:(e,t,n)=>{"use strict";n.d(t,{d:()=>d});var i=n(32788),o=n(89243),r=n(62169),a=n(54634),c=n(75421),s=n(68872),l=(e,t,n)=>new Promise((i,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,a);c((n=n.apply(e,t)).next())});function d(e,t){return l(this,null,function*(){let n,l,[d,p]=yield(0,i.A)((0,r.uu)(o._.Permission.SYSTEM_ALERT_WINDOW,o._.Permission.BIND_ACCESSIBILITY_SERVICE));if(d){alert(d.toString()),c.L.instance.toast(d.toString());return}return n={htmlConf:{url:"".concat(s._.htmlOrigin,"pages/accessibility-info-buttons/#/"),webViewJsParams:{javaToJsDataString:JSON.stringify({event:e})}},windowId:t},l=(0,a.Sb)(n),c.L.instance.createWindow(JSON.stringify(l))})}},58553:(e,t,n)=>{"use strict";n.d(t,{b:()=>p});var i=n(50612),o=n(36734),r=n(38212),a=n(80740),c=n(22066),s=n(94011),l=n(94344),d=n(7843);function p(e){let{title:t,content:n,confirmText:p,cancelText:u,onConfirm:g,onCancel:h,onClose:x,cancelId:f,confirmId:m,children:j}=e,[y,b]=(0,l.useState)(!1),{t:A}=(0,d.Bd)("fanfanlo/mui/dialog/content");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{onClick:()=>b(!0),children:j}),(0,i.jsxs)(o.A,{open:y,onClose:()=>b(!1),children:[(0,i.jsx)(r.A,{children:t||A("ButtonConfirm.title")}),(0,i.jsx)(a.A,{children:n||A("ButtonConfirm.content")}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(s.A,{id:f||"btn-dialog-button-confirm-cancel","data-id":f||"btn-dialog-button-confirm-cancel",onClick:()=>{b(!1),null==h||h(),null==x||x(!1)},children:u||A("ButtonConfirm.cancel")}),(0,i.jsx)(s.A,{id:m||"btn-dialog-button-confirm-confirm","data-id":m||"btn-dialog-button-confirm-confirm",onClick:()=>{b(!1),null==g||g(),null==x||x(!0)},children:p||A("ButtonConfirm.confirm")})]})]})]})}},21858:(e,t,n)=>{"use strict";function i(e){for(var t=[],n=0;n<e;n++)t.push(function(){let e=String.fromCharCode(65+Math.ceil(25*Math.random()));return 2*Math.random()>1&&(e=e.toLocaleLowerCase()),e}());return t.join("")}n.d(t,{g0:()=>i})},7843:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>i.Bd});var i=n(26954)}},e=>{var t=t=>e(e.s=t);e.O(0,[781,602,852,506,11,162,426,140,889,108,816,171,185,293,636,593,792],()=>t(43932)),_N_E=e.O()}]);