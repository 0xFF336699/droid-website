(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{31220:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>eQ});var i=t(50612),s=t(75936),r=t(68839),o=t(39561),l=t(87696),a=t(42590),c=t(79155),d=t(85784),u=t(67779),h=t(94344),m=t(7843),p=t(67835),f=t(85364),x=t(53757),j=(e,n,t)=>new Promise((i,s)=>{var r=e=>{try{l(t.next(e))}catch(e){s(e)}},o=e=>{try{l(t.throw(e))}catch(e){s(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((t=t.apply(e,n)).next())});let g=()=>{let{t:e}=(0,m.Bd)("droid-project/project/ui/components/content"),n=(0,x.useRouter)();return(0,i.jsx)("span",{children:(0,i.jsx)(f.A,{"data-id":"create-project-button.b79975b3-cc10-4e3e-bc05-478a98c925b5","data-typeof-create-project-id":"create-project-btn-from-ui-components-create-project-button",id:"typeof-create-project-id-create-project-btn-from-ui-components-create-project-button",onClick:function(){return j(this,null,function*(){let e=(0,p.k)();l.D.addDraft(e);let t="/project-editor?id=".concat(e.id);yield n.prefetch(t),n.push(t)})},children:e("content.create")})})};var b=t(82987),v=t(15751),y=t(17387);let A={getProjectName:e=>(null==e?void 0:e.localName)||(null==e?void 0:e.name)||(null==e?void 0:e.id.slice((null==e?void 0:e.id.length)-8))||""};var S=t(58553);function w(){let{t:e}=(0,m.Bd)("droid-project/project/ui/components/content"),n=(0,h.useContext)(v.ProjectContext),t=n.id,s=(0,i.jsxs)(u.A,{style:{textAlign:"center"},children:[(0,i.jsx)("span",{style:{color:"#FF0000"},children:n.name}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{children:e("content.confirmDelete")})]});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(S.b,{title:e("content.title"),content:s,onConfirm:()=>{l.D.deleteProject(t)},children:(0,i.jsx)(f.A,{id:"project-simple-title-list-del-btn","data-id":"project-simple-title-list-del-btn",children:e("content.delete")})})})}var C=Object.defineProperty,k=Object.defineProperties,P=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,R=(e,n,t)=>n in e?C(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,T=(e,n)=>{for(var t in n||(n={}))E.call(n,t)&&R(e,t,n[t]);if(I)for(var t of I(n))M.call(n,t)&&R(e,t,n[t]);return e},L=(e,n)=>k(e,P(n));function D(e){let{project:n}=e,t=(0,x.useRouter)(),{t:s}=(0,m.Bd)("droid-project/project/ui/project/content");return(0,i.jsxs)(y.A,{container:!0,spacing:2,sx:{width:"100%"},children:[(0,i.jsx)(y.A,{size:"grow",children:(0,i.jsx)("span",{children:A.getProjectName(n)})}),(0,i.jsxs)(y.A,{container:!0,spacing:2,children:[(0,i.jsx)(f.A,L(T({},b.mR.getProjectElementsId({project:n},"project-list-edit-btn")),{"data-listof-project-list-edit-btn-id":n.id,id:"project-simple-title-list-edit-btn","data-id":"project-simple-title-list-edit-btn",onClick:function(){let e="/project-editor?id=".concat(n.id);t.push(e,void 0,{shallow:!0})},children:s("content.project.edit")})),(0,i.jsx)(w,{})]})]})}function _(e){let{project:n}=e;return(0,i.jsx)(v.ProjectContext.Provider,{value:n,children:(0,i.jsx)(u.A,L(T({sx:{width:"100%",backgroundColor:"#f0f0f0",padding:1},"data-id":n.id},b.mR.getProjectElementsId({project:n})),{children:(0,i.jsx)(D,{project:n})}))})}function F(){let{t:e}=(0,m.Bd)("droid-project/project/ui/projects/content");return(0,i.jsx)("div",{children:(0,i.jsx)("h4",{children:e("content.projects")})})}function U(e){let{projects:n}=e;return(0,i.jsx)(c.A,{sx:{width:"100%"},children:n.length>0&&n.map(e=>(0,i.jsx)(d.Ay,{sx:{width:"100%"},children:(0,i.jsx)(_,{project:e},e.id)},e.id))})}function W(){let{t:e}=(0,m.Bd)("droid-project/project/ui/projects/content"),[n,t]=(0,h.useState)(l.D.getListCopy());return(0,h.useEffect)(()=>{let e=(0,a.c)(l.D.list,()=>{t(l.D.getListCopy())});return()=>{e()}},[]),(0,i.jsxs)(u.A,{children:[(0,i.jsx)(g,{}),0==n.length&&(0,i.jsx)(u.A,{children:(0,i.jsxs)(u.A,{children:[(0,i.jsx)("span",{children:e("content.noProjects")}),(0,i.jsx)("span",{children:e("content.orFindFromMarket")})]})}),n.length>0&&(0,i.jsx)(U,{projects:n})]})}function O(){return(0,i.jsxs)(u.A,{children:[(0,i.jsx)(F,{}),(0,i.jsx)(W,{})]})}var B=t(40242),J=t(12066),N=t(77758),H=t(18856),z=t(49365),V=t(23026),G=t(81681),$=t(94011),q=t(45396);let K=(0,V.I$)({opened:!1});async function Y(){if(K.opened)return;let e="a11yNodeSelectActionItem",n=N.yx.shellListen(H.m.WebViewJsDispatcher.name,e,e,!1,function(e){t(),N.yx.clipboardSetText(e)});function t(){K.opened=!1,console.log("ccccccccccclear"),N.yx.shellRemoveListen(H.m.WebViewJsDispatcher.name,n),N.yx.shellRemoveListen(H.m.Window.name,l),r&&N.yx.removeListen(H.m.Window.name,parseInt(r))}let i=(0,q.Z0)();(0,z.d)(e,i),K.opened=!0;let s="window-".concat(i,"-dismiss"),{javaResultString:r,errMsg:o}=N.yx.listen(H.m.Window.name,s,s,!0);if(o)throw Error(o);let l=N.yx.shellListen(H.m.Window.name,s,s,!0,()=>{t()})}function Q(){let{t:e}=(0,B.useTranslation)("homepage/components/a11y/content"),[n]=(0,G.x)(K,"opened",K.opened);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)($.A,{onClick:Y,disabled:n,children:e("open-a11y-node-button.btnName")})})}var Z=t(52591);function X(){let{t:e}=(0,B.useTranslation)("homepage/components/app/kill-self/content");async function n(){Z.Ay.success(e("KillSelf.toast")),await new Promise(e=>setTimeout(e,1e3)),N.w6.instance.callScript("com.fanfanlo.lib.sys.Sys.killMyApp()")}return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)($.A,{onClick:n,children:e("KillSelf.name")})})}function ee(){let e=(0,x.useRouter)(),{t:n}=(0,B.useTranslation)("homepage/components/markets/content");return(0,i.jsx)($.A,{onClick:function(){e.push("/add-market")},children:n("AddExternalMarketButton.name")})}var en=t(78733),et=t(42782),ei=t(87756);let es=()=>{let e=(0,x.useRouter)(),[n,t]=(0,h.useState)(null),s=()=>{t(null)},{t:r}=(0,B.useTranslation)("homepage/components/markets/main-page-add-buttons/content"),o=[{name:r("content.sub.addScriptByUrl"),url:"/listen-editing-market"},{name:r("content.sub.addScriptByText"),url:"/add-market-by-text"},{name:r("content.sub.addMarket"),url:"/add-market-by-url"},{name:r("content.sub.addMarketByText"),url:"/listen-editing-market"}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($.A,{variant:"contained",startIcon:(0,i.jsx)(ei.A,{}),onClick:e=>{t(e.currentTarget)},children:r("content.add")}),(0,i.jsx)(en.A,{anchorEl:n,open:!!n,onClose:s,children:o.map((n,t)=>(0,i.jsx)(et.A,{onClick:()=>{s(),e.push(n.url)},children:n.name},t))})]})},er={hasPermission:function(){return!!(0,o.bj)()&&N.yx.onCallGetA11yPermission().javaResultData},checkPermission:function(){return N.yx.callScript("var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.LibMainModel.Companion.instance.application, com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.class);\nbl;")}};var eo=t(88111),el=(e=>(e.granted="granted",e.denied="denied",e.shouldAskAgain="shouldAskAgain",e))(el||{}),ea=t(45404),ec=t(30186),ed=t(36800),eu=t(35384);function eh(){let{t:e}=(0,B.useTranslation)("homepage/components/permissions/accessibility/content"),[n,t]=(0,h.useState)(er.hasPermission()),s=function(e){let{t:n}=(0,eo.Bd)("app-model/mc/android-permission/content");return n("androidPermission.".concat(e))}(n?el.granted:el.shouldAskAgain),[r,l]=(0,h.useState)(!1),a=function(){let[e,n]=(0,h.useState)(ea.T.isActive);return(0,h.useEffect)(()=>{ea.T.listen(e=>{n(e)})},[]),e}();return(0,h.useEffect)(()=>{a&&t(er.hasPermission())},[a]),(0,h.useEffect)(()=>{if(!(0,o.bj)()){console.log("check a11y permission in webview,but not in android");return}let e="var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\n var s = com.fanfanlo.lib.utils.companion.gson2.toJson(info);\n s;";e="var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\n var s = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(info);\n s;",N.yx.callScript(e),er.checkPermission()},[]),(0,i.jsx)(J.A,{children:(0,i.jsxs)(J.A,{children:[(0,i.jsx)("span",{children:e("AccessibilityInfo.name")}),(0,i.jsx)("span",{children:":"}),(0,i.jsx)("button",{onClick:function(){N.yx.onCallOpenA11yPermission()},role:"button",style:{marginLeft:"0.5rem",marginRight:"0.5rem"},children:e("AccessibilityInfo.setting")}),(0,i.jsx)("span",{children:s}),(0,i.jsx)("span",{children:n?"ok":"no"}),(0,i.jsx)("span",{style:{paddingLeft:"1rem"}}),(0,i.jsx)(ed.x,{onClickAway:()=>l(!1),children:(0,i.jsx)(eu.A,{disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:e("AccessibilityInfo.dangerDesc"),slotProps:{popper:{disablePortal:!0}},open:r,onOpen:()=>l(!0),onClose:()=>l(!1),children:(0,i.jsxs)("span",{onMouseDown:()=>l(!0),children:[(0,i.jsx)("span",{children:e("AccessibilityInfo.danger")}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:(0,i.jsx)(ec.A,{fontSize:"small",sx:{verticalAlign:"sub"}})})]})})})]})})}var em=t(85028),ep=t.n(em);function ef(){let{t:e}=(0,B.useTranslation)("homepage/components/permissions/components/content");return(0,i.jsx)("span",{className:ep().permissionComponentsSpanPadding,children:(0,i.jsx)("button",{children:(0,i.jsx)("span",{children:e("Components.setting")})})})}function ex(){let{t:e}=(0,B.useTranslation)("homepage/components/permissions/components/content");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:ep().permissionComponentsSpanPadding,children:e("Components.notPass")})})}function ej(){let{t:e}=(0,B.useTranslation)("homepage/components/permissions/components/content");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:ep().permissionComponentsSpanPadding,children:e("Components.pass")})})}function eg(e){let{desc:n}=e,{t}=(0,B.useTranslation)("homepage/components/permissions/components/content"),[s,r]=(0,h.useState)(!1);return(0,i.jsx)("span",{className:ep().danger,children:(0,i.jsx)(ed.x,{onClickAway:()=>r(!1),children:(0,i.jsx)(eu.A,{disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:n,slotProps:{popper:{disablePortal:!0}},open:s,onOpen:()=>r(!0),onClose:()=>r(!1),children:(0,i.jsxs)("span",{onMouseDown:()=>r(!0),children:[(0,i.jsx)("span",{children:t("Components.danger")}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:(0,i.jsx)(ec.A,{fontSize:"small",sx:{verticalAlign:"sub"}})})]})})})})}function eb(e){let{children:n}=e;return(0,i.jsx)("span",{children:n})}let ev={hasPermission:function(){return N.yx.callScript("var bl = com.fanfanlo.lib.permissions.FloatPermission.hasPermission();\n bl;").javaResultData},openPermission:function(){return N.yx.callScript("var bl = com.fanfanlo.lib.permissions.FloatPermission.openPermission();\n bl;").javaResultData}};function ey(){let{t:e}=(0,B.useTranslation)("homepage/components/permissions/floating/content"),[n,t]=(0,h.useState)(ev.hasPermission());return(0,h.useEffect)(()=>{let e=ea.T.listen(e=>{t(ev.hasPermission())});return()=>{e()}},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)(eb,{children:e("FloatingInfo.name")}),(0,i.jsx)("span",{onClick:()=>{ev.openPermission()},children:(0,i.jsx)(ef,{})}),n?(0,i.jsx)(ej,{}):(0,i.jsx)(ex,{}),(0,i.jsx)(eg,{desc:e("FloatingInfo.dangerDesc")})]})}function eA(){return(0,i.jsxs)(J.A,{children:[(0,i.jsx)(eh,{}),(0,i.jsx)(ey,{})]})}var eS=t(89434),ew=t(40863),eC=t(36734),ek=t(17728),eP=t(88171),eI=t(28364);let eE="fanfanlo/sms/listener/1",eM='\nvar data = com.fanfanlo.droidlib.auto.rhino.RhinoManager.isRunning("'.concat(eE,'");\n\nvar res = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(data);\n\nres;\n'),eR='\nvar data = com.fanfanlo.droidlib.auto.rhino.RhinoManager.stopById("'.concat(eE,'");\nvar res = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(data);\nres;\n');function eT(e){if(!/^https?:\/\/[^\s/$.?#].[^\s]*$/i.test(e))return console.log("not legal url",e),"";try{let n=new URL(e),t=n.hostname.split(".");if(console.log('u.hostname.split(".")',n.hostname.split(".")),t.length<2||t.some(e=>0===e.length)||t[t.length-1].length<2)return console.log("not legal url with .",e),"";return n.href}catch(n){return console.log("not legal url2",e),""}}function eL(e){return e.length<4||0!=e.indexOf("re_")?"":e}function eD(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?e:""}let e_="@test",eF="".concat(e_,"/sendSmsUrl"),eU="".concat(e_,"/resendUrl"),eW="".concat(e_,"/resendAuth"),eO="".concat(e_,"/email"),eB="".concat(e_,"/mobilePathKey"),eJ="https://d.shangwoa.top/redis-lrange-get-upstash",eN=(()=>{let e=localStorage.getItem(eF);return e&&"null"!=e||(e="https://d.shangwoa.top/redis-set-sms-upstash",localStorage.setItem(eF,e)),e})(),eH=(()=>{let e=localStorage.getItem(eU);return e&&"null"!=e||(e="https://resend.com",localStorage.setItem(eU,e)),e})(),ez=(()=>{let e=localStorage.getItem(eW);return e&&"null"!=e||(e="re_17h7y4J2_Jw88LxFtdJCfxomHhjtM44Y5",localStorage.setItem(eW,e)),e})(),eV=(()=>{let e=localStorage.getItem(eB);return e&&"null"!=e||(e=(0,eI.A)(),localStorage.setItem(eB,e)),e})();function eG(){let[e,n]=(0,h.useState)(!1),[t,s]=(0,h.useState)(!1),[r,l]=(0,h.useState)(""),[a,c]=(0,h.useState)(""),[d,u]=(0,h.useState)(""),[m,p]=(0,h.useState)(eV);function f(){let e=localStorage.getItem(eF)||eN;console.log("reloadSmsUrl",e),l(e)}function x(){let e=localStorage.getItem(eW)||ez;console.log("reloadResendAuth",e),c(e)}function j(){let e=localStorage.getItem(eO)||"";console.log("reloadEmail",e),u(e)}(0,h.useEffect)(()=>{f(),x(),j()},[]),(0,h.useEffect)(()=>{r.length>0||setTimeout(()=>{console.log("later check sendSmsUrl",r),r.length>0||l(eN)},3e3)},[r]),(0,h.useEffect)(()=>{a.length>0||setTimeout(()=>{console.log("later check resendAuth",a),a.length>0||c(ez)},3e3)},[a]),(0,h.useEffect)(()=>{d.length>0||setTimeout(()=>{if(console.log("later check email",d),d.length>0)return},3e3)},[d]);let g=async()=>{let e=N.yx.callScriptByConf({injects:["console"],onlyRunSingle:!0,stopPrevIfOnlyRunSingle:!0,scriptId:eE,script:'\n\nvar domain = {}\nvar smsEventType = "smsReceived";\nvar smsDispatcher = com.fanfanlo.lib.smstransfer.receiver.SmsReceiver.dispatcher;\n\nfunction runAskPermissions(){\n    com.fanfanlo.lib.utils.PermissionUtils.askPermissions(["'.concat(ew.Manifest.Permission.RECEIVE_SMS,'","').concat(ew.Manifest.Permission.READ_SMS,'", "').concat(ew.Manifest.Permission.READ_PHONE_STATE,'", "').concat(ew.Manifest.Permission.READ_PHONE_NUMBERS,'", "').concat(ew.Manifest.Permission.READ_CALL_LOG,'"], {\n        onGranted:function(permissions, granted){\n            if(granted){\n                runScriptAfterHasPermissions();\n            }\n        },\n        onDenied:function(permissions, doNotAskAgain){\n        }\n    });\n}\nrunAskPermissions();\n\nfunction runScriptAfterHasPermissions(){\n    function onSmsReceived(data){\n        java.lang.System.out.println("js sms received sender is " + data.sender + " sms is " + data.msg + " receive time is " + data.time + "receiver number is" + data.receiver + " slot is " + data.slot);\n        sendMsm(data);\n        sendMail(data);\n    }\n    smsDispatcher.addListener(smsEventType, onSmsReceived, false, domain);\n}\n\nfunction sendMsm(data){\n    // var key = "57a60ecf-4c79-4b3d-b0ad-aa4e70e70d40:" + data.receiver ? data.receiver : "abc";\n    var key = "').concat(localStorage.getItem(eB),'";\n    if(!key || key == \'null\'){\n        return;\n    }\n    // var url = "https://d.shangwoa.top/redis-set-sms-upstash";\n    var url = "').concat(localStorage.getItem(eF),"\";\n    if(!url || url == 'null'){return;}\n    var body = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson({k:key, v:data});\n    com.fanfanlo.lib.utils.UIThreadUtil.runInNewThread(function(){\n        com.fanfanlo.lib.net.HttpUtils.post(url, body);\n    });\n}\n    function sendMail(data){\n    var to = \"").concat(localStorage.getItem(eO),"\";\n    if(!to || to == 'null'){return;}\n    var auth = \"").concat(localStorage.getItem(eW),'";\n    if(!auth || auth == \'null\'){return;}\n    java.lang.System.out.println("start send mail");\n    var url = "').concat("https://api.resend.com/emails",'";\n        if(!url || url == \'null\'){return;}\n        var body = {\n            from: "onboarding@resend.dev",\n            to: to,\n            subject: String("new message from " + data.sender),\n            html: String("<div><p>content:" + data.msg + "</p><p>from:" + data.sender + "</p><p>time:" + data.time + "</p><p>receiver:" + data.receiver + "</p><p>slot:" + data.slot + "</p></div>")\n        };\n        var header = {\n            "Authorization": String("Bearer " + auth),\n            "Content-Type": "application/json"\n        }\n        com.fanfanlo.lib.utils.UIThreadUtil.runInNewThread(function(){\n            com.fanfanlo.lib.net.HttpUtils.post(url, body, header);\n        });\n        java.lang.System.out.println("end send mail");\n    }\nfunction onJavaCallTerminate(){\n    smsDispatcher.removeDomainListeners(domain);\n    return true;\n}\n')});console.log("FirstProjectButton call run script res is",e),e.javaResultData,b()};function b(){let e=N.yx.callScript(eM),t=!!e.javaResultData&&"false"!==e.javaResultData;console.log("FirstProjectButton call isRunningScript res is",t,e),n(t)}function v(e,n){o.nd&&(e.stopPropagation(),e.preventDefault(),N.yx.callScript('\n        com.fanfanlo.lib.intent.Funcs.browserOpenUrl("'.concat(n,'");')))}async function y(){console.log("start testSendEmail");let e=localStorage.getItem(eO);if(!e)return;let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:"+15205309873",msg:"test",time:Date.now(),receiver:"+15321167889",slot:0})});console.log("testSendEmail complete",await n.json())}async function A(){let e="".concat(r),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({k:m,v:{sender:"+15205309873",msg:"test",time:Date.now(),receiver:"+15321167889",slot:0}})});console.log("testSendSms complete",await n.json())}async function S(){await y(),await A()}return(0,h.useEffect)(()=>{b()},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(J.A,{children:[(0,i.jsx)("span",{children:"转发短信"}),(0,i.jsx)("span",{children:e?"运行中":"未运行"}),(0,i.jsx)($.A,{onClick:g,children:"运行"}),(0,i.jsx)($.A,{onClick:()=>{console.log("stop project",eE),console.log("FirstProjectButton call onStopClick res is",N.yx.callScript(eR)),b()},children:"停止"}),(0,i.jsx)($.A,{onClick:()=>void(s(!0),f(),x(),j()),children:"设置"}),(0,i.jsx)(eC.A,{open:t,onClose:()=>s(!1),children:(0,i.jsxs)(ek.A,{sx:{bgcolor:"background.paper",m:1,p:1,height:"100%"},direction:"column",spacing:2,children:[(0,i.jsxs)(J.A,{children:[(0,i.jsx)("span",{children:"设置"}),(0,i.jsx)($.A,{onClick:()=>s(!1),children:"关闭"}),(r&&m||eD(d))&&(0,i.jsx)($.A,{onClick:S,children:"模拟接收到短信"})]}),(0,i.jsx)(ek.A,{sx:{border:"1px solid #ccc",borderRadius:1,p:1},direction:"column",spacing:1,children:(0,i.jsx)(J.A,{children:(0,i.jsx)("span",{style:{color:"red"},children:"强烈建议您使用自己的服务进行转发，如您懂些编程的话，请自行修改代码并进行加密发送信息。"})})}),(0,i.jsxs)(ek.A,{sx:{border:"1px solid #ccc",borderRadius:1,p:1},direction:"column",spacing:1,children:[(0,i.jsx)(J.A,{children:(0,i.jsx)("b",{children:"邮箱地址"})}),(0,i.jsx)(J.A,{children:(0,i.jsx)("span",{children:"不填写将不会发送邮件"})}),(0,i.jsx)(J.A,{children:(0,i.jsx)(eP.A,{error:!!d&&!eD(d),id:"editable-text","aria-label":"editable-text",required:!0,fullWidth:!0,multiline:!0,placeholder:"name@example.com",helperText:d?eD(d)?"请输入您要转发邮件的邮箱地址":"您输入的邮箱地址可能不正确":"不填写将不会发送邮件",variant:"standard",value:d,onChange:e=>(function(e){if(u(e),""===e){localStorage.removeItem(eO);return}let n=eD(e);n&&localStorage.setItem(eO,n)})(e.target.value)})})]}),(0,i.jsxs)(ek.A,{sx:{border:"1px solid #ccc",borderRadius:1,p:1},direction:"column",spacing:1,children:[(0,i.jsx)(J.A,{children:(0,i.jsx)("b",{children:"读取短信的路径"})}),(0,i.jsxs)(J.A,{children:[(0,i.jsx)(J.A,{children:(0,i.jsx)("span",{children:"不填写将不会把短信内容发送到远程服务器。"})}),(0,i.jsx)(J.A,{children:(0,i.jsx)("span",{children:"该字符串可以起到轻微加密的作用，长度您可以设置在100个字符以内，建议30个字符以上。"})}),(0,i.jsx)(J.A,{children:(0,i.jsx)("span",{children:"我们提供的默认存储并没有访问限制，任何人知道、猜到、枚举到路径都可以获取到您的短信内容，强烈建议您替换为您的安全方式接收和存储短信，以免被恶意获取到。"})}),r&&m&&r==eN&&(0,i.jsxs)(J.A,{children:[(0,i.jsx)("a",{target:"_blank",onClick:function(e){v(e,"".concat(eJ,"/?k=").concat(m))},href:"".concat(eJ,"/?k=").concat(m),children:"打开访问路径"}),(0,i.jsx)("span",{children:"".concat(eJ,"/?k=").concat(m)})]})]}),(0,i.jsx)(J.A,{children:(0,i.jsx)(eP.A,{id:"editable-text","aria-label":"editable-text",required:!0,fullWidth:!0,multiline:!0,placeholder:eV,variant:"standard",value:m,onChange:e=>{var n;p(n=e.target.value),localStorage.setItem(eB,n)}})})]}),(0,i.jsxs)(J.A,{children:[(0,i.jsx)(J.A,{children:"因为没时间开发，所以默认发送信息和邮件是我们申请的免费资源用来测试的，额度不多，大家都用的话，很快就会用完，用完后就所有人都发不出去了，如果出现这种情况，您可以自己申请或建设您自己的转发渠道。"}),(0,i.jsx)(J.A,{children:"如果该功能受欢迎，我们也会很快自己开发提供无限量免费使用资源。"})]}),(0,i.jsxs)(ek.A,{sx:{border:"1px solid #ccc",borderRadius:1,p:1},direction:"column",spacing:1,children:[(0,i.jsx)(J.A,{children:(0,i.jsx)("b",{children:"邮件转发"})}),(0,i.jsx)(J.A,{children:(0,i.jsxs)("span",{children:["我们默认是用",(0,i.jsx)("a",{onClick:function(e){v(e,eH)},href:eH,target:"_blank",children:"resend"}),"发送邮件的，您可以到它的官网申请自己的账号使用。"]})}),(0,i.jsx)(J.A,{children:(0,i.jsx)(eP.A,{error:!eL(a),id:"editable-text","aria-label":"editable-text",required:!0,fullWidth:!0,multiline:!0,helperText:eL(a)?"请输入您要转发邮件的auth":"您输入的auth可能不正确",variant:"standard",value:a,onChange:e=>(function(e){if(c(e),""===e){localStorage.removeItem(eW);return}localStorage.setItem(eW,e)})(e.target.value)})})]}),(0,i.jsxs)(ek.A,{sx:{border:"1px solid #ccc",borderRadius:1,p:1},direction:"column",spacing:1,children:[(0,i.jsxs)(J.A,{children:[(0,i.jsx)(J.A,{children:(0,i.jsx)("b",{children:"短信转发地址"})}),(0,i.jsx)(J.A,{children:(0,i.jsxs)("span",{children:["默认为：",eN]})}),(0,i.jsx)(J.A,{children:(0,i.jsxs)("span",{children:["如果您是自己使用，可以在",(0,i.jsx)("a",{onClick:function(e){v(e,"https://console.upstash.com/")},href:"https://console.upstash.com/",target:"_blank",children:"upstash"}),"申请免费redis进行操作即可。"]})}),(0,i.jsx)(J.A,{children:(0,i.jsxs)("span",{children:["您还可以做一个代理层，在",(0,i.jsx)("a",{onClick:function(e){v(e,"https://cloudflare.com/")},href:"https://cloudflare.com",target:"_blank",children:"cloudflare"}),"网站创建worker，然后将worker的url填到这里。"]})}),(0,i.jsx)(J.A,{children:(0,i.jsx)("span",{children:"您也可以自建服务器或者使用钉钉、server酱等接收消息推送的api。"})})]}),(0,i.jsx)(eP.A,{error:!eT(r),id:"editable-text","aria-label":"editable-text",required:!0,fullWidth:!0,multiline:!0,helperText:eT(r)?"请输入您要转发短信的url":"您输入的url不合法",variant:"standard",value:r,onChange:e=>(function(e){l(e),""===e&&localStorage.removeItem(eF);let n=eT(e);n&&(console.log("save url",n),localStorage.setItem(eF,n))})(e.target.value)})]})]})})]})})}var e$=t(28841);function eq(){let[e,n]=(0,h.useState)([]),[t,s]=(0,h.useState)(!1),r=()=>{s(!1)};return(0,h.useEffect)(()=>{let e=N.yx.callScript("\n        var data = com.fanfanlo.lib.utils.PermissionUtils.getGrantedPermissions();\n        var res = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(data);\n        res;\n        ");e.javaResultData&&n(e.javaResultData)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J.A,{children:(0,i.jsxs)(J.A,{children:[(0,i.jsx)("span",{children:"授权"}),(0,i.jsx)($.A,{onClick:()=>{N.yx.callScript("\n        com.fanfanlo.lib.utils.PermissionUtils.openAppSettings();")},children:"打开设置页"}),(0,i.jsx)($.A,{onClick:()=>s(!0),children:"已授权"})]})}),(0,i.jsx)(e$.A,{open:t,onClose:r,children:(0,i.jsxs)(J.A,{sx:{bgcolor:"background.paper",p:2},children:[(0,i.jsxs)(J.A,{children:[(0,i.jsx)("span",{children:"已授权的权限"}),(0,i.jsx)($.A,{onClick:r,children:"关闭"})]}),(0,i.jsx)("ul",{children:e.map((e,n)=>(0,i.jsx)("li",{style:{wordBreak:"break-all",wordWrap:"break-word"},children:e.replace("android.permission","")},n))})]})})]})}var eK=t(57988);function eY(){let[e,n]=(0,h.useState)("");return(0,h.useEffect)(()=>{(async function(){let e=await fetch("./temp/FirstProjectButton.html");n(await e.text())})()},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eK.T,{content:e})})}function eQ(){return(0,i.jsx)(s.G,{children:(0,i.jsx)(r.y,{titleConf:{ns:"homepage/pages/home/content",key:"home.title"},children:(0,i.jsx)(eZ,{})})})}function eZ(){let[e,n]=(0,h.useState)(null);return(0,h.useEffect)(()=>{window.sayHello=function(e){alert("child"+e)},console.log("window say=",window.sayHello),setTimeout(()=>{n((function(){let e=Function('var script1=function(n){"use strict";return function(){function v(){return new Date().getTime()}var u={exports:{}},e={};/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function s(T,t,r){var i=null;if(r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),"key"in t){r={};for(var o in t)o!=="key"&&(r[o]=t[o])}else r=t;return t=r.ref,{$$typeof:c,type:T,key:i,ref:t!==void 0?t:null,props:r}}e.Fragment=d,e.jsx=s,e.jsxs=s,u.exports=e;var l=u.exports;function a(){return l.jsx("div",{children:l.jsx("button",{children:"按钮12"})})}const x={UI:a};function E(){return v()}n.components=x,n.printA=E,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}(),n}({}); return script1;')();return e.printA(),console.log("cccccccccccccccomponents=",e.components),e})().components.UI())},5e3)},[]),(0,i.jsxs)(J.A,{children:[(0,i.jsx)(eY,{}),(0,i.jsx)(eq,{}),(0,i.jsx)(eG,{}),(0,i.jsx)(ee,{}),e,(0,i.jsx)(eA,{}),(0,i.jsx)(J.A,{children:(0,i.jsx)(Q,{})}),(0,i.jsx)(eS.TestScript,{}),(0,i.jsx)(J.A,{children:(0,i.jsx)(X,{})}),(0,i.jsx)(es,{}),(0,i.jsx)(O,{}),(0,i.jsxs)("div",{children:["isInAndroid:",(0,o.bj)().toString()]}),(0,i.jsxs)("div",{children:["count:",0]}),(0,i.jsx)("div",{})]})}(0,B.i18nInit)()},89434:(e,n,t)=>{"use strict";t.r(n),t.d(n,{TestScript:()=>r,default:()=>o});var i=t(50612),s=t(94011);function r(){async function e(){}return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.A,{onClick:e,children:"script"})})}let o=r},68839:(e,n,t)=>{"use strict";t.d(n,{y:()=>x});var i=t(50612),s=t(64565),r=t(6065),o=t(62723),l=t(67779),a=t(16425),c=t(16281),d=t(85347),u=t(53757),h=t(7843),m=t(22726);function p(){return(0,i.jsx)(s.A,{id:"bottom-navigation",sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:(0,i.jsx)(f,{})})}function f(){let e=(0,u.useRouter)(),{pathname:n}=e,{t}=(0,h.Bd)("app-ui/components/tabbar/content"),s=[{label:t("content.home"),value:"/",icon:(0,i.jsx)(d.A,{})},{label:t("content.me"),value:"/me",icon:(0,i.jsx)(d.A,{})}];return(0,i.jsx)(r.A,{showLabels:!0,value:n,children:s.map(t=>(0,i.jsx)(o.A,{label:t.label,icon:t.icon,"data-id":"tabbar-".concat(t.value),className:n===t.value?"Mui-selected":"",onClick:()=>{n!==t.value&&e.push(t.value)}},t.value))})}function x(e){let{children:n,titleConf:t}=e;return(0,i.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[(0,i.jsx)(a.Ay,{}),(0,i.jsxs)(c.A,{direction:"column",spacing:3,children:[(0,i.jsx)(m.A,{titleConf:t,children:n}),(0,i.jsx)(p,{})]})]})}},83688:(e,n,t)=>{"use strict";t.d(n,{Manifest:()=>i._});var i=t(89243)},199:(e,n,t)=>{"use strict";t.d(n,{Manifest:()=>i.Manifest});var i=t(83688)},49365:(e,n,t)=>{"use strict";t.d(n,{d:()=>d});var i=t(32788),s=t(89243),r=t(62169),o=t(54634),l=t(75421),a=t(68872),c=(e,n,t)=>new Promise((i,s)=>{var r=e=>{try{l(t.next(e))}catch(e){s(e)}},o=e=>{try{l(t.throw(e))}catch(e){s(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((t=t.apply(e,n)).next())});function d(e,n){return c(this,null,function*(){let t,c,[d,u]=yield(0,i.A)((0,r.uu)(s._.Permission.SYSTEM_ALERT_WINDOW,s._.Permission.BIND_ACCESSIBILITY_SERVICE));if(d){alert(d.toString()),l.L.instance.toast(d.toString());return}return t={htmlConf:{url:"".concat(a._.htmlOrigin,"pages/accessibility-info-buttons/#/"),webViewJsParams:{javaToJsDataString:JSON.stringify({event:e})}},windowId:n},c=(0,o.Sb)(t),l.L.instance.createWindow(JSON.stringify(c))})}},40863:(e,n,t)=>{"use strict";var i=t(199);t.o(i,"Manifest")&&t.d(n,{Manifest:function(){return i.Manifest}});var s=t(86021);t.o(s,"Manifest")&&t.d(n,{Manifest:function(){return s.Manifest}})},61873:()=>{},86021:(e,n,t)=>{"use strict";var i=t(61873);t.o(i,"Manifest")&&t.d(n,{Manifest:function(){return i.Manifest}})},57988:(e,n,t)=>{"use strict";t.d(n,{T:()=>m});var i=t(50612),s=t(94344),r=t(22467),o=(e,n,t)=>new Promise((i,s)=>{var r=e=>{try{l(t.next(e))}catch(e){s(e)}},o=e=>{try{l(t.throw(e))}catch(e){s(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((t=t.apply(e,n)).next())});class l{loadContent(e){this.currentLoadCallback=null,this.currentErrorCallback=null;let n="\n            <script>\n                const IFRAME_ID = '".concat(this.iframeId,"';\n                function notifyResize() {\n                    const body = document.body;\n                    const html = document.documentElement;\n                    \n                    // 获取实际内容高度（取最大值）\n                    const height = Math.max(\n                        body.scrollHeight,\n                        body.offsetHeight,\n                        html.clientHeight,\n                        html.scrollHeight,\n                        html.offsetHeight\n                    );\n                    \n                    // 获取实际内容宽度（取最大值）\n                    const width = Math.max(\n                        body.scrollWidth,\n                        body.offsetWidth,\n                        html.clientWidth,\n                        html.scrollWidth,\n                        html.offsetWidth\n                    );\n                    \n                    window.parent.postMessage({ \n                        type: 'resize', \n                        height, \n                        width,\n                        iframeId: IFRAME_ID \n                    }, '*');\n                }\n                \n                // 监听DOM变化\n                const observer = new MutationObserver(() => {\n                    requestAnimationFrame(notifyResize);\n                });\n                \n                observer.observe(document.body, { \n                    childList: true, \n                    subtree: true, \n                    attributes: true \n                });\n                \n                // 监听图片加载完成\n                document.addEventListener('load', function(e) {\n                    if (e.target.tagName === 'IMG') {\n                        notifyResize();\n                    }\n                }, true);\n                \n                // 监听窗口大小变化\n                window.addEventListener('resize', notifyResize);\n                \n                // 初始化时多次检查大小\n                window.addEventListener('load', () => {\n                    notifyResize();\n                    // 延迟再次检查，处理动态内容\n                    setTimeout(notifyResize, 100);\n                    setTimeout(notifyResize, 500);\n                });\n                \n                // 立即执行一次\n                notifyResize();\n            <\/script>\n        "),t=e.includes("</body>")?e.replace("</body>","".concat(n,"</body>")):"".concat(e).concat(n);this.iframe.srcdoc=t}setMinSize(e,n){this.minWidth=e,this.minHeight=n}setMaxSize(e,n){this.maxWidth=e,this.maxHeight=n}handleIframeMessage(e){if("resize"===e.data.type&&e.data.iframeId===this.iframeId){let{height:n,width:t}=e.data,i=window.innerWidth;null!==this.minWidth&&(t=Math.max(t,this.minWidth)),null!==this.minHeight&&(n=Math.max(n,this.minHeight)),t=null!==this.maxWidth?Math.min(t,this.maxWidth):Math.min(t,i),null!==this.maxHeight&&(n=Math.min(n,this.maxHeight)),this.container.style.height="".concat(n,"px"),this.container.style.width="".concat(t,"px")}}loadUrl(e,n,t){return o(this,null,function*(){this.currentLoadCallback=n||null,this.currentErrorCallback=t||null,this.iframe?this.iframe.src=e:console.error("IFrameContainer: iframe element is null in loadUrl!")})}testUrl(e){return o(this,null,function*(){try{let n=yield r.A.get(e);console.log("res=",n)}catch(e){console.error("test load url error",e)}})}loadUrlAsContent(e){return o(this,null,function*(){console.log("laodUrlAsContent_fn",e);try{let n=yield fetch(e);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let t=yield n.text();this.loadContent(t)}catch(e){throw console.error("Failed to load URL content:",e),e}})}getContainer(){return this.container}setSize(e,n){this.container.style.width=e,this.container.style.height=n}constructor(){this.minWidth=null,this.minHeight=null,this.maxWidth=null,this.maxHeight=null,this.currentLoadCallback=null,this.currentErrorCallback=null,this.iframeId="iframe_"+Math.random().toString(36).substr(2,9),this.container=document.createElement("div"),this.iframe=document.createElement("iframe"),this.container.style.width="100%",this.container.style.height="100%",this.container.style.overflow="hidden",this.container.style.position="relative",this.container.style.maxWidth="100%",this.container.style.margin="0 auto",this.iframe.style.width="100%",this.iframe.style.height="100%",this.iframe.style.border="none",this.iframe.style.overflow="hidden",this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("seamless","seamless"),this.iframe.onload=()=>{this.currentLoadCallback&&this.currentLoadCallback(),(0,window.iframeResize)({onReady:e=>{},license:"GPLv3",waitForLoad:!0,log:!1,checkOrigin:!1},"#".concat(this.iframeId))},this.iframe.onerror=(e,n,t,i,s)=>{console.error('%cIFrameContainer: iframe "error" event triggered.',"color: red; font-weight: bold;",e);let r=s||Error("string"==typeof e?e:"Failed to load iframe content");this.currentErrorCallback&&this.currentErrorCallback(r)},this.container.appendChild(this.iframe),this.iframe.id=this.iframeId,window.addEventListener("message",this.handleIframeMessage.bind(this))}}var a=t(12066),c=t(76806),d=t(65820),u=t(10216),h=(e,n,t)=>new Promise((i,s)=>{var r=e=>{try{l(t.next(e))}catch(e){s(e)}},o=e=>{try{l(t.throw(e))}catch(e){s(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);l((t=t.apply(e,n)).next())});let m=e=>{let{style:n,className:t,url:r,content:o,minWidth:m,minHeight:p,maxWidth:f,maxHeight:x,onError:j,onLoad:g}=e,b=(0,s.useRef)(null),v=(0,s.useRef)(null),[y,A]=(0,s.useState)(!1),[S,w]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!v.current&&b.current){v.current=new l;let e=v.current;e.setMinSize(null!=m?m:null,null!=p?p:null),e.setMaxSize(null!=f?f:null,null!=x?x:null),b.current.appendChild(e.getContainer())}return()=>{b.current&&v.current&&(b.current.removeChild(v.current.getContainer()),v.current=null)}},[m,p,f,x]),(0,s.useEffect)(()=>{let e=v.current;e&&h(void 0,null,function*(){A(!0),w(null);try{o?(e.loadContent(o),A(!1),null==g||g()):r?e.loadUrl(r,()=>{A(!1),w(null),null==g||g()},e=>{console.error("%cIFrameReactContainer: handleError (callback from IFrameContainer) triggered.","color: red;",e),A(!1),w(e),null==j||j(e)}):A(!1)}catch(e){if(console.error(">>> Sync Error during loadContentOrUrl setup:",e),e instanceof Error)A(!1),w(e),null==j||j(e);else{let e=Error("An unknown error occurred during setup");A(!1),w(e),null==j||j(e)}}})},[r,o,j,g,v.current]),(0,i.jsxs)("div",{ref:b,style:n,className:t,children:[y&&(0,i.jsxs)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:2},children:[(0,i.jsx)(c.A,{size:24}),(0,i.jsx)(d.A,{variant:"body2",sx:{ml:1},children:"Loading preview..."})]}),S&&!y&&(0,i.jsxs)(u.A,{severity:"error",sx:{m:1},children:["Preview Error: ",S.message]})]})}},58553:(e,n,t)=>{"use strict";t.d(n,{b:()=>u});var i=t(50612),s=t(36734),r=t(38212),o=t(80740),l=t(22066),a=t(94011),c=t(94344),d=t(7843);function u(e){let{title:n,content:t,confirmText:u,cancelText:h,onConfirm:m,onCancel:p,onClose:f,cancelId:x,confirmId:j,children:g}=e,[b,v]=(0,c.useState)(!1),{t:y}=(0,d.Bd)("fanfanlo/mui/dialog/content");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{onClick:()=>v(!0),children:g}),(0,i.jsxs)(s.A,{open:b,onClose:()=>v(!1),children:[(0,i.jsx)(r.A,{children:n||y("ButtonConfirm.title")}),(0,i.jsx)(o.A,{children:t||y("ButtonConfirm.content")}),(0,i.jsxs)(l.A,{children:[(0,i.jsx)(a.A,{id:x||"btn-dialog-button-confirm-cancel","data-id":x||"btn-dialog-button-confirm-cancel",onClick:()=>{v(!1),null==p||p(),null==f||f(!1)},children:h||y("ButtonConfirm.cancel")}),(0,i.jsx)(a.A,{id:j||"btn-dialog-button-confirm-confirm","data-id":j||"btn-dialog-button-confirm-confirm",onClick:()=>{v(!1),null==m||m(),null==f||f(!0)},children:u||y("ButtonConfirm.confirm")})]})]})]})}},7843:(e,n,t)=>{"use strict";t.d(n,{Bd:()=>i.Bd});var i=t(26954)},85028:e=>{e.exports={permissionComponentsSpanPadding:"components_permissionComponentsSpanPadding___8iUl",danger:"components_danger__at2U4",pass:"components_pass__QEjyt"}}}]);