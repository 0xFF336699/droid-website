(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{1604:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>eP});var s=t(50612),i=t(75936),o=t(68839),r=t(39561),c=t(87696),l=t(42590),a=t(79155),d=t(85784),u=t(67779),p=t(94344),m=t(7843),j=t(67835),x=t(85364),h=t(53757),f=(e,n,t)=>new Promise((s,i)=>{var o=e=>{try{c(t.next(e))}catch(e){i(e)}},r=e=>{try{c(t.throw(e))}catch(e){i(e)}},c=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);c((t=t.apply(e,n)).next())});let b=()=>{let{t:e}=(0,m.Bd)("droid-project/project/ui/components/content"),n=(0,h.useRouter)();return(0,s.jsx)("span",{children:(0,s.jsx)(x.A,{"data-id":"create-project-button.b79975b3-cc10-4e3e-bc05-478a98c925b5","data-typeof-create-project-id":"create-project-btn-from-ui-components-create-project-button",id:"typeof-create-project-id-create-project-btn-from-ui-components-create-project-button",onClick:function(){return f(this,null,function*(){let e=(0,j.k)();c.D.addDraft(e);let t="/project-editor?id=".concat(e.id);yield n.prefetch(t),n.push(t)})},children:e("content.create")})})};var g=t(82987),v=t(15751),y=t(17387);let A={getProjectName:e=>(null==e?void 0:e.localName)||(null==e?void 0:e.name)||(null==e?void 0:e.id.slice((null==e?void 0:e.id.length)-8))||""};var w=t(58553);function C(){let{t:e}=(0,m.Bd)("droid-project/project/ui/components/content"),n=(0,p.useContext)(v.ProjectContext),t=n.id,i=(0,s.jsxs)(u.A,{style:{textAlign:"center"},children:[(0,s.jsx)("span",{style:{color:"#FF0000"},children:n.name}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{children:e("content.confirmDelete")})]});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(w.b,{title:e("content.title"),content:i,onConfirm:()=>{c.D.deleteProject(t)},children:(0,s.jsx)(x.A,{id:"project-simple-title-list-del-btn","data-id":"project-simple-title-list-del-btn",children:e("content.delete")})})})}var k=Object.defineProperty,P=Object.defineProperties,S=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=(e,n,t)=>n in e?k(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,L=(e,n)=>{for(var t in n||(n={}))I.call(n,t)&&D(e,t,n[t]);if(T)for(var t of T(n))E.call(n,t)&&D(e,t,n[t]);return e},B=(e,n)=>P(e,S(n));function F(e){let{project:n}=e,t=(0,h.useRouter)(),{t:i}=(0,m.Bd)("droid-project/project/ui/project/content");return(0,s.jsxs)(y.A,{container:!0,spacing:2,sx:{width:"100%"},children:[(0,s.jsx)(y.A,{size:"grow",children:(0,s.jsx)("span",{children:A.getProjectName(n)})}),(0,s.jsxs)(y.A,{container:!0,spacing:2,children:[(0,s.jsx)(x.A,B(L({},g.mR.getProjectElementsId({project:n},"project-list-edit-btn")),{"data-listof-project-list-edit-btn-id":n.id,id:"project-simple-title-list-edit-btn","data-id":"project-simple-title-list-edit-btn",onClick:function(){let e="/project-editor?id=".concat(n.id);t.push(e,void 0,{shallow:!0})},children:i("content.project.edit")})),(0,s.jsx)(C,{})]})]})}function _(e){let{project:n}=e;return(0,s.jsx)(v.ProjectContext.Provider,{value:n,children:(0,s.jsx)(u.A,B(L({sx:{width:"100%",backgroundColor:"#f0f0f0",padding:1},"data-id":n.id},g.mR.getProjectElementsId({project:n})),{children:(0,s.jsx)(F,{project:n})}))})}function R(){let{t:e}=(0,m.Bd)("droid-project/project/ui/projects/content");return(0,s.jsx)("div",{children:(0,s.jsx)("h4",{children:e("content.projects")})})}function M(e){let{projects:n}=e;return(0,s.jsx)(a.A,{sx:{width:"100%"},children:n.length>0&&n.map(e=>(0,s.jsx)(d.Ay,{sx:{width:"100%"},children:(0,s.jsx)(_,{project:e},e.id)},e.id))})}function N(){let{t:e}=(0,m.Bd)("droid-project/project/ui/projects/content"),[n,t]=(0,p.useState)(c.D.getListCopy());return(0,p.useEffect)(()=>{let e=(0,l.c)(c.D.list,()=>{t(c.D.getListCopy())});return()=>{e()}},[]),(0,s.jsxs)(u.A,{children:[(0,s.jsx)(b,{}),0==n.length&&(0,s.jsx)(u.A,{children:(0,s.jsxs)(u.A,{children:[(0,s.jsx)("span",{children:e("content.noProjects")}),(0,s.jsx)("span",{children:e("content.orFindFromMarket")})]})}),n.length>0&&(0,s.jsx)(M,{projects:n})]})}function O(){return(0,s.jsxs)(u.A,{children:[(0,s.jsx)(R,{}),(0,s.jsx)(N,{})]})}var J=t(40242),W=t(12066),U=t(77758),V=t(18856),H=t(49365),z=t(23026),G=t(81681),K=t(94011),$=t(45396);let Y=(0,z.I$)({opened:!1});async function Q(){if(Y.opened)return;let e="a11yNodeSelectActionItem",n=U.yx.shellListen(V.m.WebViewJsDispatcher.name,e,e,!1,function(e){t(),U.yx.clipboardSetText(e)});function t(){Y.opened=!1,console.log("ccccccccccclear"),U.yx.shellRemoveListen(V.m.WebViewJsDispatcher.name,n),U.yx.shellRemoveListen(V.m.Window.name,c),o&&U.yx.removeListen(V.m.Window.name,parseInt(o))}let s=(0,$.Z0)();(0,H.d)(e,s),Y.opened=!0;let i="window-".concat(s,"-dismiss"),{javaResultString:o,errMsg:r}=U.yx.listen(V.m.Window.name,i,i,!0);if(r)throw Error(r);let c=U.yx.shellListen(V.m.Window.name,i,i,!0,()=>{t()})}function Z(){let{t:e}=(0,J.useTranslation)("homepage/components/a11y/content"),[n]=(0,G.x)(Y,"opened",Y.opened);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(K.A,{onClick:Q,disabled:n,children:e("open-a11y-node-button.btnName")})})}var q=t(52591);function X(){let{t:e}=(0,J.useTranslation)("homepage/components/app/kill-self/content");async function n(){q.Ay.success(e("KillSelf.toast")),await new Promise(e=>setTimeout(e,1e3)),U.w6.instance.callScript("com.fanfanlo.lib.sys.Sys.killMyApp()")}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(K.A,{onClick:n,children:e("KillSelf.name")})})}function ee(){let e=(0,h.useRouter)(),{t:n}=(0,J.useTranslation)("homepage/components/markets/content");return(0,s.jsx)(K.A,{onClick:function(){e.push("/add-market")},children:n("AddExternalMarketButton.name")})}var en=t(78733),et=t(42782),es=t(87756);let ei=()=>{let e=(0,h.useRouter)(),[n,t]=(0,p.useState)(null),i=()=>{t(null)},{t:o}=(0,J.useTranslation)("homepage/components/markets/main-page-add-buttons/content"),r=[{name:o("content.sub.addScriptByUrl"),url:"/listen-editing-market"},{name:o("content.sub.addScriptByText"),url:"/add-market-by-text"},{name:o("content.sub.addMarket"),url:"/add-market-by-url"},{name:o("content.sub.addMarketByText"),url:"/listen-editing-market"}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.A,{variant:"contained",startIcon:(0,s.jsx)(es.A,{}),onClick:e=>{t(e.currentTarget)},children:o("content.add")}),(0,s.jsx)(en.A,{anchorEl:n,open:!!n,onClose:i,children:r.map((n,t)=>(0,s.jsx)(et.A,{onClick:()=>{i(),e.push(n.url)},children:n.name},t))})]})},eo={hasPermission:function(){return!!(0,r.bj)()&&U.yx.onCallGetA11yPermission().javaResultData},checkPermission:function(){return U.yx.callScript("var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.LibMainModel.Companion.instance.application, com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.class);\nbl;")}};var er=t(88111),ec=(e=>(e.granted="granted",e.denied="denied",e.shouldAskAgain="shouldAskAgain",e))(ec||{}),el=t(45404),ea=t(30186),ed=t(36800),eu=t(35384);function ep(){let{t:e}=(0,J.useTranslation)("homepage/components/permissions/accessibility/content"),[n,t]=(0,p.useState)(eo.hasPermission()),i=function(e){let{t:n}=(0,er.Bd)("app-model/mc/android-permission/content");return n("androidPermission.".concat(e))}(n?ec.granted:ec.shouldAskAgain),[o,c]=(0,p.useState)(!1),l=function(){let[e,n]=(0,p.useState)(el.T.isActive);return(0,p.useEffect)(()=>{el.T.listen(e=>{n(e)})},[]),e}();return(0,p.useEffect)(()=>{l&&t(eo.hasPermission())},[l]),(0,p.useEffect)(()=>{if(!(0,r.bj)()){console.log("check a11y permission in webview,but not in android");return}let e="var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\n var s = com.fanfanlo.lib.utils.companion.gson2.toJson(info);\n s;";e="var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\n var s = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(info);\n s;",U.yx.callScript(e),eo.checkPermission()},[]),(0,s.jsx)(W.A,{children:(0,s.jsxs)(W.A,{children:[(0,s.jsx)("span",{children:e("AccessibilityInfo.name")}),(0,s.jsx)("span",{children:":"}),(0,s.jsx)("button",{onClick:function(){U.yx.onCallOpenA11yPermission()},role:"button",style:{marginLeft:"0.5rem",marginRight:"0.5rem"},children:e("AccessibilityInfo.setting")}),(0,s.jsx)("span",{children:i}),(0,s.jsx)("span",{children:n?"ok":"no"}),(0,s.jsx)("span",{style:{paddingLeft:"1rem"}}),(0,s.jsx)(ed.x,{onClickAway:()=>c(!1),children:(0,s.jsx)(eu.A,{disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:e("AccessibilityInfo.dangerDesc"),slotProps:{popper:{disablePortal:!0}},open:o,onOpen:()=>c(!0),onClose:()=>c(!1),children:(0,s.jsxs)("span",{onMouseDown:()=>c(!0),children:[(0,s.jsx)("span",{children:e("AccessibilityInfo.danger")}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{children:(0,s.jsx)(ea.A,{fontSize:"small",sx:{verticalAlign:"sub"}})})]})})})]})})}var em=t(85028),ej=t.n(em);function ex(){let{t:e}=(0,J.useTranslation)("homepage/components/permissions/components/content");return(0,s.jsx)("span",{className:ej().permissionComponentsSpanPadding,children:(0,s.jsx)("button",{children:(0,s.jsx)("span",{children:e("Components.setting")})})})}function eh(){let{t:e}=(0,J.useTranslation)("homepage/components/permissions/components/content");return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:ej().permissionComponentsSpanPadding,children:e("Components.notPass")})})}function ef(){let{t:e}=(0,J.useTranslation)("homepage/components/permissions/components/content");return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:ej().permissionComponentsSpanPadding,children:e("Components.pass")})})}function eb(e){let{desc:n}=e,{t}=(0,J.useTranslation)("homepage/components/permissions/components/content"),[i,o]=(0,p.useState)(!1);return(0,s.jsx)("span",{className:ej().danger,children:(0,s.jsx)(ed.x,{onClickAway:()=>o(!1),children:(0,s.jsx)(eu.A,{disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:n,slotProps:{popper:{disablePortal:!0}},open:i,onOpen:()=>o(!0),onClose:()=>o(!1),children:(0,s.jsxs)("span",{onMouseDown:()=>o(!0),children:[(0,s.jsx)("span",{children:t("Components.danger")}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{children:(0,s.jsx)(ea.A,{fontSize:"small",sx:{verticalAlign:"sub"}})})]})})})})}function eg(e){let{children:n}=e;return(0,s.jsx)("span",{children:n})}let ev={hasPermission:function(){return U.yx.callScript("var bl = com.fanfanlo.lib.permissions.FloatPermission.hasPermission();\n bl;").javaResultData},openPermission:function(){return U.yx.callScript("var bl = com.fanfanlo.lib.permissions.FloatPermission.openPermission();\n bl;").javaResultData}};function ey(){let{t:e}=(0,J.useTranslation)("homepage/components/permissions/floating/content"),[n,t]=(0,p.useState)(ev.hasPermission());return(0,p.useEffect)(()=>{let e=el.T.listen(e=>{t(ev.hasPermission())});return()=>{e()}},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)(eg,{children:e("FloatingInfo.name")}),(0,s.jsx)("span",{onClick:()=>{ev.openPermission()},children:(0,s.jsx)(ex,{})}),n?(0,s.jsx)(ef,{}):(0,s.jsx)(eh,{}),(0,s.jsx)(eb,{desc:e("FloatingInfo.dangerDesc")})]})}function eA(){return(0,s.jsxs)(W.A,{children:[(0,s.jsx)(ep,{}),(0,s.jsx)(ey,{})]})}var ew=t(89434),eC=t(28841);function ek(){let[e,n]=(0,p.useState)([]),[t,i]=(0,p.useState)(!1),o=()=>{i(!1)};return(0,p.useEffect)(()=>{let e=U.yx.callScript("\n        var data = com.fanfanlo.lib.utils.PermissionUtils.getGrantedPermissions();\n        var res = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(data);\n        res;\n        ");e.javaResultData&&n(e.javaResultData)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.A,{children:(0,s.jsxs)(W.A,{children:[(0,s.jsx)("span",{children:"授权"}),(0,s.jsx)(K.A,{onClick:()=>{U.yx.callScript("\n        com.fanfanlo.lib.utils.PermissionUtils.openAppSettings();")},children:"打开设置页"}),(0,s.jsx)(K.A,{onClick:()=>i(!0),children:"已授权"})]})}),(0,s.jsx)(eC.A,{open:t,onClose:o,children:(0,s.jsxs)(W.A,{sx:{bgcolor:"background.paper",p:2},children:[(0,s.jsxs)(W.A,{children:[(0,s.jsx)("span",{children:"已授权的权限"}),(0,s.jsx)(K.A,{onClick:o,children:"关闭"})]}),(0,s.jsx)("ul",{children:e.map((e,n)=>(0,s.jsx)("li",{style:{wordBreak:"break-all",wordWrap:"break-word"},children:e.replace("android.permission","")},n))})]})})]})}function eP(){return(0,s.jsx)(i.G,{children:(0,s.jsx)(o.y,{titleConf:{ns:"homepage/pages/home/content",key:"home.title"},children:(0,s.jsx)(eS,{})})})}function eS(){let[e,n]=(0,p.useState)(null);return(0,p.useEffect)(()=>{window.sayHello=function(e){alert("child"+e)},console.log("window say=",window.sayHello),setTimeout(()=>{n((function(){let e=Function('var script1=function(n){"use strict";return function(){function v(){return new Date().getTime()}var u={exports:{}},e={};/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function s(T,t,r){var i=null;if(r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),"key"in t){r={};for(var o in t)o!=="key"&&(r[o]=t[o])}else r=t;return t=r.ref,{$$typeof:c,type:T,key:i,ref:t!==void 0?t:null,props:r}}e.Fragment=d,e.jsx=s,e.jsxs=s,u.exports=e;var l=u.exports;function a(){return l.jsx("div",{children:l.jsx("button",{children:"按钮12"})})}const x={UI:a};function E(){return v()}n.components=x,n.printA=E,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}(),n}({}); return script1;')();return e.printA(),console.log("cccccccccccccccomponents=",e.components),e})().components.UI())},5e3)},[]),(0,s.jsxs)(W.A,{children:[(0,s.jsx)(ek,{}),(0,s.jsx)(ee,{}),e,(0,s.jsx)(eA,{}),(0,s.jsx)(W.A,{children:(0,s.jsx)(Z,{})}),(0,s.jsx)(ew.TestScript,{}),(0,s.jsx)(W.A,{children:(0,s.jsx)(X,{})}),(0,s.jsx)(ei,{}),(0,s.jsx)(O,{}),(0,s.jsxs)("div",{children:["isInAndroid:",(0,r.bj)().toString()]}),(0,s.jsxs)("div",{children:["count:",0]}),(0,s.jsx)("div",{})]})}(0,J.i18nInit)()},89434:(e,n,t)=>{"use strict";t.r(n),t.d(n,{TestScript:()=>o,default:()=>r});var s=t(50612),i=t(94011);function o(){async function e(){}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.A,{onClick:e,children:"script"})})}let r=o},68839:(e,n,t)=>{"use strict";t.d(n,{y:()=>h});var s=t(50612),i=t(64565),o=t(6065),r=t(62723),c=t(67779),l=t(16425),a=t(16281),d=t(85347),u=t(53757),p=t(7843),m=t(22726);function j(){return(0,s.jsx)(i.A,{id:"bottom-navigation",sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:(0,s.jsx)(x,{})})}function x(){let e=(0,u.useRouter)(),{pathname:n}=e,{t}=(0,p.Bd)("app-ui/components/tabbar/content"),i=[{label:t("content.home"),value:"/",icon:(0,s.jsx)(d.A,{})},{label:t("content.me"),value:"/me",icon:(0,s.jsx)(d.A,{})}];return(0,s.jsx)(o.A,{showLabels:!0,value:n,children:i.map(t=>(0,s.jsx)(r.A,{label:t.label,icon:t.icon,"data-id":"tabbar-".concat(t.value),className:n===t.value?"Mui-selected":"",onClick:()=>{n!==t.value&&e.push(t.value)}},t.value))})}function h(e){let{children:n,titleConf:t}=e;return(0,s.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[(0,s.jsx)(l.Ay,{}),(0,s.jsxs)(a.A,{direction:"column",spacing:3,children:[(0,s.jsx)(m.A,{titleConf:t,children:n}),(0,s.jsx)(j,{})]})]})}},49365:(e,n,t)=>{"use strict";t.d(n,{d:()=>d});var s=t(32788),i=t(89243),o=t(62169),r=t(54634),c=t(75421),l=t(68872),a=(e,n,t)=>new Promise((s,i)=>{var o=e=>{try{c(t.next(e))}catch(e){i(e)}},r=e=>{try{c(t.throw(e))}catch(e){i(e)}},c=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);c((t=t.apply(e,n)).next())});function d(e,n){return a(this,null,function*(){let t,a,[d,u]=yield(0,s.A)((0,o.uu)(i._.Permission.SYSTEM_ALERT_WINDOW,i._.Permission.BIND_ACCESSIBILITY_SERVICE));if(d){alert(d.toString()),c.L.instance.toast(d.toString());return}return t={htmlConf:{url:"".concat(l._.htmlOrigin,"pages/accessibility-info-buttons/#/"),webViewJsParams:{javaToJsDataString:JSON.stringify({event:e})}},windowId:n},a=(0,r.Sb)(t),c.L.instance.createWindow(JSON.stringify(a))})}},58553:(e,n,t)=>{"use strict";t.d(n,{b:()=>u});var s=t(50612),i=t(36734),o=t(38212),r=t(80740),c=t(22066),l=t(94011),a=t(94344),d=t(7843);function u(e){let{title:n,content:t,confirmText:u,cancelText:p,onConfirm:m,onCancel:j,onClose:x,cancelId:h,confirmId:f,children:b}=e,[g,v]=(0,a.useState)(!1),{t:y}=(0,d.Bd)("fanfanlo/mui/dialog/content");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>v(!0),children:b}),(0,s.jsxs)(i.A,{open:g,onClose:()=>v(!1),children:[(0,s.jsx)(o.A,{children:n||y("ButtonConfirm.title")}),(0,s.jsx)(r.A,{children:t||y("ButtonConfirm.content")}),(0,s.jsxs)(c.A,{children:[(0,s.jsx)(l.A,{id:h||"btn-dialog-button-confirm-cancel","data-id":h||"btn-dialog-button-confirm-cancel",onClick:()=>{v(!1),null==j||j(),null==x||x(!1)},children:p||y("ButtonConfirm.cancel")}),(0,s.jsx)(l.A,{id:f||"btn-dialog-button-confirm-confirm","data-id":f||"btn-dialog-button-confirm-confirm",onClick:()=>{v(!1),null==m||m(),null==x||x(!0)},children:u||y("ButtonConfirm.confirm")})]})]})]})}},7843:(e,n,t)=>{"use strict";t.d(n,{Bd:()=>s.Bd});var s=t(26954)},85028:e=>{e.exports={permissionComponentsSpanPadding:"components_permissionComponentsSpanPadding___8iUl",danger:"components_danger__at2U4",pass:"components_pass__QEjyt"}}}]);